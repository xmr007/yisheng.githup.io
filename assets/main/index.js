System.register("chunks:///_virtual/AdTip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Platform.ts","./GameMain.ts","./ResultCtrl.ts"],(function(n){"use strict";var e,c,t,o,a,i,d,l;return{setters:[function(n){e=n.inheritsLoose},function(n){c=n.cclegacy,t=n._decorator,o=n.Component},function(n){a=n.default,i=n.AdSceneId},function(n){d=n.GameMain},function(n){l=n.ResultCtrl}],execute:function(){var r;c._RF.push({},"e7cf4niBdRNQqzBFbOdx2Yd","AdTip",void 0);var s=t.ccclass;t.property,n("AdTip",s("AdTip")(r=function(n){function c(){return n.apply(this,arguments)||this}e(c,n);var t=c.prototype;return t.show=function(){this.node.active=!0},t.close=function(){this.node.active=!1,null!==a.ttVideoAdCloseCallback&&a.ttVideoAdCloseCallback()},t.onConfirmClicked=function(){a.adSceneId===i.MoreAward?l.instance.resultUI.onAwardClicked():a.adSceneId===i.TryVIPRole?d.instance.mainUI.onPlayClicked():a.adSceneId===i.RolePopUnlock?l.instance.rolePopUI.onUnlockClicked():a.adSceneId===i.RoleUnlock?d.instance.mainUI.unlockRoleUI.unlockClicked():a.adSceneId===i.DayAward?l.instance.dayAwardUI.onAwardClicked():a.adSceneId===i.EquipmentBtn?d.instance.mainUI.upgradeUI.onEquipmentBtnClicked():a.adSceneId===i.FloorBtn?d.instance.mainUI.upgradeUI.onFloorBtnClicked():a.adSceneId===i.WallBtn?d.instance.mainUI.upgradeUI.onWallBtnClicked():a.adSceneId===i.Wage?d.instance.mainUI.offlineAwardUI.onMoreAwardClicked():a.adSceneId===i.UnlockGame&&d.instance.mainUI.unlockGameUI.onUnlockClicked(),this.node.active=!1},c}(o))||r);c._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var o,e,i,t,u,a,c,s,r,l,d;return{setters:[function(n){o=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,t=n.assertThisInitialized},function(n){u=n.cclegacy,a=n._decorator,c=n.AudioClip,s=n.AudioSource,r=n.game,l=n.tween,d=n.Component}],execute:function(){var p,f,g,S,h,m;n("AudioClipID",void 0),u._RF.push({},"350980N/2tMWosoCP3w+aj3","AudioManager",void 0);var y,v=a.ccclass,A=a.property;!function(n){n[n.Result=0]="Result",n[n.Coin=1]="Coin",n[n.Share=2]="Share",n[n.Unlock=3]="Unlock",n[n.Upgrade=4]="Upgrade"}(y||(y=n("AudioClipID",{})));n("AudioManager",(p=v("AudioManager"),f=A({type:[c]}),p(((m=function(n){function o(){for(var o,e=arguments.length,u=new Array(e),a=0;a<e;a++)u[a]=arguments[a];return o=n.call.apply(n,[this].concat(u))||this,i(o,"clips",h,t(o)),o.audioSource=null,o}e(o,n);var u=o.prototype;return u.onLoad=function(){o.instance=this,this.audioSource=this.node.getComponent(s),r.addPersistRootNode(this.node)},u.onDisable=function(){this.audioSource.clip.stop()},u.onEnable=function(){},o.onHide=function(){null!==o.instance&&o.instance.audioSource.playing&&(o.shouldResumeBgm=!0,o.instance.audioSource.pause())},o.onShow=function(){null!==o.instance&&o.shouldResumeBgm&&o.instance.scheduleOnce((function(){o.instance.audioSource.play(),o.shouldResumeBgm=!1}),.5)},o.playClip=function(n,e){void 0===e&&(e=1),o.sndOn&&o.instance.audioSource.playOneShot(o.instance.clips[n],e)},o.playBgm=function(){o.sndOn&&(o.instance.audioSource.playing||o.instance.audioSource.play())},o.fadeoutBgm=function(){o.instance.audioSource.playing&&l(o.instance.audioSource).to(.5,{volume:0}).call((function(){o.instance.audioSource.stop()})).start()},o.fadeinBgm=function(){!o.instance.audioSource.playing&&o.sndOn&&(o.instance.audioSource.volume=0,o.instance.audioSource.play(),l(o.instance.audioSource).to(.5,{volume:.5}).call((function(){})).start())},o.stopBgm=function(){o.instance.audioSource.stop()},o.stopAll=function(){},o}(d)).instance=null,m.sndOn=!0,m.shouldResumeBgm=!1,h=o((S=m).prototype,"clips",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=S))||g));u._RF.pop()}}}));

System.register("chunks:///_virtual/AwardData.ts",["cc","./DataStorage.ts"],(function(a){"use strict";var t,e;return{setters:[function(a){t=a.cclegacy},function(a){e=a.default}],execute:function(){t._RF.push({},"0982ctjPNhKvobbfuSr0moj","AwardData",void 0),a("default",function(){function a(){this.offlineAwardLastDate=0}var t=a.prototype;return t.reset=function(){this.offlineAwardLastDate=Date.now()},t.load=function(){if(e.dataExist(a.dataName)){var t=e.load(a.dataName);this.offlineAwardLastDate=t.offlineAwardLastDate}else this.reset(),e.save(a.dataName,this)},t.save=function(){e.save(a.dataName,this)},t.clear=function(){e.delete(a.dataName)},t.updateOfflineAwardLastDate=function(){this.offlineAwardLastDate=Date.now(),this.save()},a}()).dataName="magichospital_awarddata",t._RF.pop()}}}));

System.register("chunks:///_virtual/BoneTest.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,i,l,a,o,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,o=e.Node,s=e.Component}],execute:function(){var u,c,p,h,f,y,b,g,d,v,S,k,m;l._RF.push({},"ee825SZLSZMvYyR0oDBvGfS","BoneTest",void 0);var z=a.ccclass,w=a.property;e("BoneTest",(u=z("BoneTest"),c=w({type:o}),p=w({type:o}),h=w({type:o}),f=w({type:o}),y=w({type:o}),u((d=t((g=function(e){function t(){for(var t,r=arguments.length,l=new Array(r),a=0;a<r;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,n(t,"trunk0",d,i(t)),n(t,"trunk1",v,i(t)),n(t,"leg0",S,i(t)),n(t,"leg1",k,i(t)),n(t,"head",m,i(t)),t.scale=2,t}r(t,e);var l=t.prototype;return l.start=function(){},l.lateUpdate=function(e){this.scale-=.2*e,this.scale<1&&(this.scale=1),this.trunk0.setScale(this.scale,this.scale,this.scale);var t=1/this.scale;this.trunk1.setScale(t,t,t),this.leg0.setScale(-t,-t,-t),this.leg1.setScale(t,t,t),this.head.setScale(1.5,1.5,1.5)},t}(s)).prototype,"trunk0",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(g.prototype,"trunk1",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(g.prototype,"leg0",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(g.prototype,"leg1",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(g.prototype,"head",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/CameraEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMain.ts"],(function(n){"use strict";var e,t,a,r,c;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,a=n._decorator,r=n.Component},function(n){c=n.GameMain}],execute:function(){var i;t._RF.push({},"e02faAznn1D56XTOAfszRid","CameraEvent",void 0);var s=a.ccclass;a.property,n("CameraEvent",s("CameraEvent")(i=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var a=t.prototype;return a.camAnimEnd=function(){c.instance.transUpgradeEnd()},a.camReset=function(){c.instance.camResetEnd()},t}(r))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/DataStorage.ts",["cc","./Platform.ts"],(function(t){"use strict";var c,e,s;return{setters:[function(t){c=t.cclegacy},function(t){e=t.default,s=t.PlatformType}],execute:function(){c._RF.push({},"cf758xEUApMYrftgWO0OqDV","DataStorage",void 0);t("default",function(){function t(){}return t.dataExist=function(t){return cc.sys.platform===cc.sys.WECHAT_GAME||cc.sys.platform===cc.sys.BYTEDANCE_GAME?0!==wx.getStorageSync(t).length:e.currentPlatform===s.VIVO?0!==qg.getStorageSync({key:t}).length:null!==cc.sys.localStorage.getItem(t)},t.save=function(t,c){cc.sys.platform===cc.sys.WECHAT_GAME||cc.sys.platform===cc.sys.BYTEDANCE_GAME?wx.setStorageSync(t,c):e.currentPlatform===s.VIVO?qg.setStorageSync({key:t,value:JSON.stringify(c)}):cc.sys.localStorage.setItem(t,JSON.stringify(c))},t.delete=function(t){cc.sys.platform===cc.sys.WECHAT_GAME||cc.sys.platform===cc.sys.BYTEDANCE_GAME?wx.removeStorageSync(t):e.currentPlatform===s.VIVO?qg.deleteStorageSync({key:t}):cc.sys.localStorage.removeItem(t)},t.deleteAll=function(){cc.sys.platform===cc.sys.WECHAT_GAME||cc.sys.platform===cc.sys.BYTEDANCE_GAME||cc.sys.localStorage.clear()},t.load=function(t,c){if(void 0===c&&(c=null),cc.sys.platform===cc.sys.WECHAT_GAME||cc.sys.platform===cc.sys.BYTEDANCE_GAME){var r=wx.getStorageSync(t);if(0!==r.length)return r}else if(e.currentPlatform===s.VIVO){var a=qg.getStorageSync({key:t});if(0!==a.length)return JSON.parse(a)}else{var o=cc.sys.localStorage.getItem(t);if(null!==o)return JSON.parse(o)}return c},t}());c._RF.pop()}}}));

System.register("chunks:///_virtual/DayAwardUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMain.ts","./Platform.ts","./AudioManager.ts","./AdTip.ts","./MoneyAnim.ts","./ResultCtrl.ts"],(function(e){"use strict";var t,i,n,a,o,r,c,l,u,d,s,p,f,y,b,h,m,w,N,v,g,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,c=e.Label,l=e.Node,u=e.AudioSource,d=e.tween,s=e.v3,p=e.director,f=e.Component},function(e){y=e.GameMain},function(e){b=e.default,h=e.PlatformType,m=e.AdSceneId},function(e){w=e.AudioManager,N=e.AudioClipID},function(e){v=e.AdTip},function(e){g=e.MoneyAnim},function(e){A=e.ResultCtrl}],execute:function(){var T,D,S,B,L,O,P,k,z,M,C,I,R,U,G,_,x,V,E,F,H;o._RF.push({},"17146R9+R9NU6bO7XwXEWTB","DayAwardUI",void 0);var W=r.ccclass,X=r.property;e("DayAwardUI",(T=W("DayAwardUI"),D=X({type:c}),S=X({type:l}),B=X({type:l}),L=X({type:l}),O=X({type:l}),P=X({type:l}),k=X({type:l}),z=X({type:g}),M=X({type:u}),T((R=t((I=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"dayLabel",R,a(t)),n(t,"completeLabelNode",U,a(t)),n(t,"effectNode",G,a(t)),n(t,"awardSpriteNode",_,a(t)),n(t,"awardBtnNode",x,a(t)),n(t,"refuseBtnNode",V,a(t)),n(t,"adTipNode",E,a(t)),n(t,"moneyAnim",F,a(t)),n(t,"audio",H,a(t)),t.adTip=null,t}i(t,e);var o=t.prototype;return o.start=function(){this.adTip=this.adTipNode.getComponent(v)},o.show=function(){var e=this;this.node.active=!0,this.effectNode.active=!1,this.awardSpriteNode.active=!1,this.awardBtnNode.active=!1,this.refuseBtnNode.active=!1,this.dayLabel.node.active=!0,this.dayLabel.string="第"+y.instance.gameData.getDayNum()+"天",this.completeLabelNode.active=!0,this.dayLabel.node.setPosition(-180,-264.42,0),this.completeLabelNode.setPosition(180,-345.432,0),d(this.dayLabel.node).to(.4,{position:s(0,-264.42,0)},{easing:"backOut"}).start(),d(this.completeLabelNode).to(.4,{position:s(0,-345.432,0)},{easing:"backOut"}).start(),this.scheduleOnce((function(){e.awardSpriteNode.setScale(.3,.3,.3),e.awardSpriteNode.active=!0,e.effectNode.active=!0,d(e.awardSpriteNode).to(.3,{scale:s(1.2,1.2,1.2)},{easing:"backOut"}).start()}),.4),this.scheduleOnce((function(){e.awardBtnNode.active=!0,e.refuseBtnNode.active=!0}),.8)},o.hide=function(){this.node.active=!1},o.onAwardClicked=function(){var e=this;b.currentPlatform===h.TT||b.currentPlatform===h.OPPO||b.currentPlatform===h.VIVO||b.currentPlatform===h.WECHAT?(b.adSceneId=m.DayAward,b.adTip=this.adTip,b.playVideoAd((function(){e.getAward(),b.reportDayAward()}))):b.currentPlatform===h.Default&&this.getAward()},o.getAward=function(){var e=this;this.moneyAnim.play((function(){e.audio.playOneShot(w.instance.clips[N.Coin],1)})),y.instance.gameData.addMoney(2e3),A.instance.resultUI.updateMoneyDisplaySchedule(),this.awardBtnNode.active=!1,this.unscheduleAllCallbacks(),this.refuseBtnNode.active=!1,this.scheduleOnce((function(){p.loadScene("mainScene",(function(){y.instance.backToGameMainOverlook(),y.instance.gameToNextDay()}))}),2.5)},o.onRefuseClicked=function(){this.awardBtnNode.active=!1,this.refuseBtnNode.active=!1,this.scheduleOnce((function(){p.loadScene("mainScene",(function(){y.instance.backToGameMainOverlook(),y.instance.gameToNextDay()}))}),1.5)},t}(f)).prototype,"dayLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(I.prototype,"completeLabelNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(I.prototype,"effectNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(I.prototype,"awardSpriteNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(I.prototype,"awardBtnNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(I.prototype,"refuseBtnNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(I.prototype,"adTipNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(I.prototype,"moneyAnim",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(I.prototype,"audio",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=I))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/FacialGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Patient.ts","./Util.ts","./GameMain.ts","./Platform.ts","./AudioManager.ts","./OppoNativeAd.ts","./RoleSkinData.ts"],(function(e){"use strict";var t,n,a,i,o,s,r,l,c,h,d,m,p,u,g,f,P,v,A,b,N,y,C,O,S,T,H,R,k,w,W,E,M,z;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,s=e.gfx,r=e._decorator,l=e.Node,c=e.Canvas,h=e.Sprite,d=e.Prefab,m=e.MeshRenderer,p=e.Animation,u=e.v3,g=e.quat,f=e.Camera,P=e.ParticleSystem,v=e.Quat,A=e.tween,b=e.systemEvent,N=e.SystemEvent,y=e.instantiate,C=e.color,O=e.v2,S=e.director,T=e.Component},function(e){H=e.Patient},function(e){R=e.default},function(e){k=e.GameMain},function(e){w=e.default,W=e.PlatformType},function(e){E=e.AudioManager},function(e){M=e.OppoNativeAd},function(e){z=e.RoleId}],execute:function(){var U,I,j,B,D,x,L,_,F,G,V,q,Y,X,K,Q,Z,J,$,ee,te,ne,ae,ie,oe,se,re,le,ce,he,de,me,pe,ue,ge,fe,Pe,ve,Ae;o._RF.push({},"d1652SzqKlEs5cwsfl4fOZb","FacialGame",void 0);var be=s.AttributeName,Ne=r.ccclass,ye=r.property;e("FacialGame",(U=Ne("FacialGame"),I=ye({type:l}),j=ye({type:c}),B=ye({type:h}),D=ye({type:H}),x=ye({type:l}),L=ye({type:d}),_=ye({type:l}),F=ye({type:l}),G=ye({type:l}),V=ye({type:l}),q=ye({type:m}),Y=ye({type:l}),X=ye({type:d}),K=ye({type:l}),Q=ye({type:p}),Z=ye({type:p}),J=ye({type:p}),$=ye({type:M}),U((ne=t((te=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,a(t,"cameraNode",ne,i(t)),a(t,"canvas",ae,i(t)),a(t,"maskSprite",ie,i(t)),a(t,"patient",oe,i(t)),a(t,"startTipNode",se,i(t)),a(t,"acnePrefab",re,i(t)),a(t,"acneAttachNode",le,i(t)),a(t,"rHandNode",ce,i(t)),a(t,"lHandNode",he,i(t)),a(t,"cleanserNode",de,i(t)),a(t,"maskMeshRenderer",me,i(t)),a(t,"maskFinished",pe,i(t)),a(t,"maskBallPrefab",ue,i(t)),a(t,"maskBallParent",ge,i(t)),a(t,"completeUIAnim",fe,i(t)),a(t,"step0Anim",Pe,i(t)),a(t,"step1Anim",ve,i(t)),a(t,"oppoNativeAd",Ae,i(t)),t.acneObjs=[],t.rHandPoint=null,t.cleanserPoint=null,t.gameStarted=!1,t.gameCanOper=!1,t.gameState=0,t.touchStarted=!1,t.camera=null,t.successEffect=null,t.targetAcne=null,t.targetAcneScale=1,t.maskVertexCount=237,t.maskMeshPos=[],t.maskTriangleSet=[],t.swipeLen=0,t.camOriginPos=u(0,0,-4),t.camOriginRot=g(0,0,0,0),t.camDstPos=u(0,0,-1.8),t.camDstRot=g(0,0,0,0),t.maskPivotDstRot=g(0,0,0,0),t.cleanserOriginPos=u(0,1.3,-.5),t.handOriginPos=u(-.08,1.22,-.5),t.lastHandWorldPos=u(0,0,0),t.handWorldPos=u(0,0,0),t.handCurWorldPos=u(0,0,0),t.tempPos=u(0,0,0),t.rHandScrPos=u(0,0,0),t.rHandAcnePosOffset=u(-.075,-.055,0),t.rHandAcneRot=g(0,0,0,0),t.lHandAcneRot=g(0,0,0,0),t.cameraRotAngle=0,t.cameraRot=g(0,0,0,0),t}n(t,e);var o=t.prototype;return o.onLoad=function(){this.gameStarted=!1,this.gameCanOper=!1,this.gameState=0,this.touchStarted=!1,this.camera=this.cameraNode.getComponent(f),this.successEffect=this.cameraNode.getChildByName("Confetti2").getComponent(P),this.rHandPoint=this.rHandNode.getChildByName("point"),this.lHandNode.active=!1,this.rHandNode.active=!1,this.rHandNode.setPosition(this.handOriginPos),this.cleanserPoint=this.cleanserNode.getChildByName("point"),v.fromEuler(this.camOriginRot,-5,180,0),v.fromEuler(this.camDstRot,0,180,0),v.fromEuler(this.rHandAcneRot,0,0,-40),v.fromEuler(this.lHandAcneRot,0,0,60),v.fromEuler(this.maskPivotDstRot,0,0,-90),this.cameraNode.setPosition(this.camOriginPos),this.cameraNode.setRotation(this.camOriginRot),this.patient.meshRenderer.mesh=k.instance.getCurPatientMesh(),k.instance.curPatient.meshId===z.NewYearGirl?this.patient.meshRenderer.material=k.instance.mats[4]:k.instance.curPatient.meshId===z.Cattle?this.patient.meshRenderer.material=k.instance.mats[5]:this.patient.meshRenderer.material=k.instance.mats[3],this.patient.meshRenderer.skeleton=k.instance.getCurPatientSkeleton(),this.patient.setExpression(k.instance.getSickExpressionById(0)),this.patient.headNode.children[0].children[0].getComponent(m).material=this.patient.meshRenderer.material,this.initAcne(),this.addEvent()},o.start=function(){var e=this;if(w.currentPlatform===W.WECHAT&&w.createBannerAd(),this.readMesh(),this.scheduleOnce((function(){E.fadeinBgm()}),.8),this.maskSprite.node.active=!0,A(this.maskSprite.color).to(.75,{a:0}).call((function(){e.maskSprite.node.active=!1})).start(),w.currentPlatform===W.OPPO)if(k.instance.gameTimeTick>=20)null!==this.oppoNativeAd&&this.oppoNativeAd.show();else{var t=20-k.instance.gameTimeTick;this.scheduleOnce(this.showOppoNativeAd,t)}},o.showOppoNativeAd=function(){null!==this.oppoNativeAd&&this.oppoNativeAd.show()},o.onDestroy=function(){this.removeEvent()},o.readMesh=function(){for(var e=this.maskMeshRenderer.mesh.readAttribute(0,be.ATTR_POSITION),t=0;t<e.length;t+=3)this.maskMeshPos.push(u(e[t],e[t+1],e[t+2]))},o.addEvent=function(){b.on(N.EventType.TOUCH_START,this.onTouchStart,this),b.on(N.EventType.TOUCH_MOVE,this.onTouchMove,this),b.on(N.EventType.TOUCH_END,this.onTouchEnd,this),b.on(N.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},o.removeEvent=function(){b.off(N.EventType.TOUCH_START,this.onTouchStart,this),b.off(N.EventType.TOUCH_MOVE,this.onTouchMove,this),b.off(N.EventType.TOUCH_END,this.onTouchEnd,this),b.off(N.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},o.transCamToDst=function(){var e=this;A(this.cameraNode).to(.55,{position:this.camDstPos}).call((function(){for(var t=0;t<e.maskMeshPos.length;t++)e.maskMeshPos[t].transformMat4(e.maskMeshRenderer.node.worldMatrix),e.camera.worldToScreen(e.maskMeshPos[t],e.maskMeshPos[t]);e.gameStarted=!0,e.gameCanOper=!0,e.gameState=1,e.rHandNode.active=!0})).start()},o.initAcne=function(){this.clearAcneObjs();R.randRangeNumber(0,100);for(var e=R.randExtract(this.acneAttachNode.children.length,2),t=0;t<e.length;t++){var n=e[t]-1,a=y(this.acnePrefab);this.acneAttachNode.children[n].addChild(a),this.acneObjs.push(a)}},o.clearAcneObjs=function(){this.acneObjs.splice(0,this.acneObjs.length);for(var e=0;e<this.acneAttachNode.children.length;e++)this.acneAttachNode.children[e].destroyAllChildren(),this.acneAttachNode.children[e].removeAllChildren()},o.isAcneCompleted=function(){for(var e=0;e<this.acneObjs.length;e++)if(this.acneObjs[e].getChildByName("whelk").active)return!1;return!0},o.onTouchStart=function(e){if(!1===this.gameStarted)this.gameStarted=!0,this.startTipNode.active=!1,this.transCamToDst(),w.startRecord();else if(this.gameStarted&&this.gameCanOper&&(1===this.gameState||3===this.gameState)){var t=e.getLocationX(),n=e.getLocationY();this.camera.screenToWorld(u(t,n,0),this.lastHandWorldPos),this.lastHandWorldPos.z=-.5}},o.onTouchMove=function(e){var t=this;if(this.gameCanOper){var n=e.getDelta(),a=e.getLocationX(),i=e.getLocationY();if(1===this.gameState){this.camera.screenToWorld(u(a,i,0),this.handWorldPos),this.handWorldPos.z=-.5,this.tempPos.set(this.handWorldPos),this.handWorldPos.subtract(this.lastHandWorldPos),this.handWorldPos.multiplyScalar(2),this.rHandNode.getPosition(this.handCurWorldPos),this.handCurWorldPos.add(this.handWorldPos),this.rHandNode.setPosition(this.handCurWorldPos),this.lastHandWorldPos.set(this.tempPos),this.cameraRotAngle+=.01*n.x,this.cameraRotAngle>5&&(this.cameraRotAngle=5),this.cameraRotAngle<-5&&(this.cameraRotAngle=-5),v.fromEuler(this.cameraRot,0,this.cameraRotAngle,0),this.cameraNode.parent.setRotation(this.cameraRot),this.camera.worldToScreen(this.rHandPoint.worldPosition,this.rHandScrPos);for(var o=function(e){if(t.camera.worldToScreen(t.acneObjs[e].worldPosition,t.tempPos),t.tempPos.subtract(t.rHandScrPos),t.tempPos.length()<30&&t.acneObjs[e].getChildByName("whelk").active){t.gameCanOper=!1;var n=u(0,0,0);n.set(t.acneObjs[e].worldPosition),n.add(u(0,0,-.6)),n.subtract(t.cameraNode.parent.worldPosition),t.rHandNode.active=!1,t.targetAcne=t.acneObjs[e].getChildByName("whelk"),t.acneObjs[e].getComponent(p).stop(),A(t.cameraNode).to(.2,{position:n}).call((function(){t.rHandNode.active=!0,t.rHandNode.setScale(.4,.4,.4),t.rHandNode.setRotation(t.rHandAcneRot),t.handWorldPos.set(t.acneObjs[e].worldPosition),t.handWorldPos.add(u(-.075,-.055,0)),t.handWorldPos.z=-.5,t.rHandNode.setPosition(t.handWorldPos),t.lHandNode.active=!0,t.lHandNode.setScale(.4,.4,.4),t.lHandNode.setRotation(t.lHandAcneRot),t.handWorldPos.set(t.acneObjs[e].worldPosition),t.handWorldPos.add(u(.079,0,0)),t.handWorldPos.z=-.5,t.lHandNode.setPosition(t.handWorldPos),t.gameState=2,t.gameCanOper=!0})).start()}},s=0;s<this.acneObjs.length;s++)o(s)}else if(2===this.gameState){var r=u(1,1,0).normalize();if(this.handWorldPos.set(this.rHandNode.worldPosition),this.handWorldPos.add(r.multiplyScalar(5e-5*n.length())),this.rHandNode.setPosition(this.handWorldPos),this.targetAcneScale+=.003*n.length(),this.targetAcne.setScale(this.targetAcneScale,this.targetAcneScale,this.targetAcneScale),this.targetAcneScale>2){this.targetAcne.active=!1,this.targetAcne.parent.getChildByName("fx").getComponent(P).play(),this.gameCanOper=!1,k.instance.gameData.isVibrationOn()&&w.vibrateShort(),this.completeUIAnim.node.active=!0,this.completeUIAnim.play();var l=u(0,0,0);this.camera.convertToUINode(this.targetAcne.worldPosition,this.canvas.node,l),this.completeUIAnim.node.setPosition(l.x,l.y,l.z),this.scheduleOnce((function(){t.completeUIAnim.stop(),t.completeUIAnim.node.active=!1}),1),this.isAcneCompleted()&&(this.step0Anim.play(),this.step0Anim.node.getComponent(h).color=C(0,240,67,255),this.step0Anim.node.children[0].getComponent(h).grayscale=!1),this.lHandNode.active=!1,this.rHandNode.active=!1,this.gameState=1,this.targetAcne=null,this.targetAcneScale=1,this.scheduleOnce((function(){A(t.cameraNode).to(.2,{position:t.camDstPos}).call((function(){t.isAcneCompleted()?(t.gameState=3,t.gameCanOper=!0,t.cleanserNode.active=!0,t.cleanserNode.setPosition(t.cleanserOriginPos),t.cameraNode.parent.setRotation(g(0,0,0,0))):(t.gameCanOper=!0,t.rHandNode.active=!0,t.rHandNode.setScale(1,1,1),t.rHandNode.setPosition(t.handOriginPos),t.rHandNode.setRotation(g(0,0,0,0)))})).start()}),1.5)}}else if(3===this.gameState){if(this.camera.screenToWorld(u(a,i,0),this.handWorldPos),this.handWorldPos.z=-.5,this.tempPos.set(this.handWorldPos),this.handWorldPos.subtract(this.lastHandWorldPos),this.handWorldPos.multiplyScalar(2),this.cleanserNode.getPosition(this.handCurWorldPos),this.handCurWorldPos.add(this.handWorldPos),this.cleanserNode.setPosition(this.handCurWorldPos),this.lastHandWorldPos.set(this.tempPos),n.lengthSqr()>30){var c=y(this.maskBallPrefab);this.maskBallParent.addChild(c),c.setPosition(this.cleanserPoint.worldPosition);var d=u(0,0,0);this.camera.worldToScreen(c.worldPosition,d);for(var m=0;m<this.maskMeshPos.length;m++){O(this.maskMeshPos[m].x-d.x,this.maskMeshPos[m].y-d.y).length()<=85&&(this.maskTriangleSet[m]=this.maskMeshPos[m])}if(Object.keys(this.maskTriangleSet).length>=140){this.completeUIAnim.node.active=!0,this.completeUIAnim.play();var f=u(0,0,0);this.camera.convertToUINode(this.cleanserPoint.worldPosition,this.canvas.node,f),this.completeUIAnim.node.setPosition(f.x,f.y,f.z),this.scheduleOnce((function(){t.completeUIAnim.stop(),t.completeUIAnim.node.active=!1}),1),this.step1Anim.play(),this.step1Anim.node.getComponent(h).color=C(0,240,67,255),this.step1Anim.node.children[0].getComponent(h).grayscale=!1,this.gameCanOper=!1,this.cleanserNode.active=!1,this.maskMeshRenderer.node.parent.active=!1,this.maskFinished.active=!0,this.clearAcneObjs(),this.scheduleOnce((function(){t.maskFinished.parent.getComponent(p).play(),t.gameCanOper=!0,t.gameState=4,t.swipeLen=0}),.5)}}}else 4===this.gameState&&n.x>0&&(this.swipeLen+=n.length(),this.swipeLen>100&&(this.gameCanOper=!1,this.maskMoveOut()))}},o.onTouchEnd=function(e){this.touchStarted=!1,this.gameCanOper},o.onTouchCancel=function(e){this.touchStarted=!1,this.gameCanOper},o.maskMoveOut=function(){var e=this;this.patient.setExpression(k.instance.getHappyExpression()),this.patient.headNode.children[0].children[0].getComponent(m).material=this.patient.meshRenderer.material,this.maskFinished.parent.getComponent(p).stop(),E.fadeoutBgm(),this.successEffect.play(),A(this.maskFinished.parent).to(.6,{position:u(-1.5,1.2,-.4),rotation:this.maskPivotDstRot}).call((function(){e.switchToResult()})).start()},o.switchToResult=function(){w.currentPlatform===W.OPPO&&this.unschedule(this.showOppoNativeAd),w.currentPlatform===W.WECHAT&&w.destroyBannerAd(),S.loadScene("result")},t}(T)).prototype,"cameraNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(te.prototype,"canvas",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(te.prototype,"maskSprite",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(te.prototype,"patient",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(te.prototype,"startTipNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(te.prototype,"acnePrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(te.prototype,"acneAttachNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(te.prototype,"rHandNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(te.prototype,"lHandNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(te.prototype,"cleanserNode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(te.prototype,"maskMeshRenderer",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(te.prototype,"maskFinished",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(te.prototype,"maskBallPrefab",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(te.prototype,"maskBallParent",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(te.prototype,"completeUIAnim",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(te.prototype,"step0Anim",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(te.prototype,"step1Anim",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(te.prototype,"oppoNativeAd",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=te))||ee));o._RF.pop()}}}));

System.register("chunks:///_virtual/FigureGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Patient.ts","./GameMain.ts","./PatientData.ts","./Platform.ts","./AudioManager.ts","./OppoNativeAd.ts"],(function(t){"use strict";var e,i,n,a,s,r,o,c,p,h,l,u,f,m,d,g,P,y,E,S,v,A,T,C,O,R,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,o=t.Node,c=t.Sprite,p=t.ParticleSystem,h=t.Animation,l=t.v3,u=t.quat,f=t.Camera,m=t.Quat,d=t.tween,g=t.systemEvent,P=t.SystemEvent,y=t.director,E=t.Component},function(t){S=t.Patient,v=t.PatientType},function(t){A=t.GameMain},function(t){T=t.PatientFigurePart},function(t){C=t.default,O=t.PlatformType},function(t){R=t.AudioManager},function(t){b=t.OppoNativeAd}],execute:function(){var w,N,k,D,F,M,I,z,H,x,_,B,U,G,L,Q,V,W,j,q,J;s._RF.push({},"1abafEtaxtO4KDJAnQ9V9oS","FigureGame",void 0);var K=r.ccclass,X=r.property;t("FigureGame",(w=K("FigureGame"),N=X({type:o}),k=X({type:c}),D=X({type:S}),F=X({type:[p]}),M=X({type:h}),I=X({type:h}),z=X({type:h}),H=X({type:o}),x=X({type:b}),w((U=e((B=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,n(e,"cameraNode",U,a(e)),n(e,"maskSprite",G,a(e)),n(e,"patient",L,a(e)),n(e,"particleEffects",Q,a(e)),n(e,"machineAnim",V,a(e)),n(e,"goodAnim",W,a(e)),n(e,"perfectAnim",j,a(e)),n(e,"progressNode",q,a(e)),n(e,"oppoNativeAd",J,a(e)),e.gameStarted=!1,e.gameCanOper=!1,e.touchStarted=!1,e.camera=null,e.successEffect=null,e.patientId=0,e.scaleSpeed=.85,e.camOriginPos=l(0,4,-4),e.camOriginRot=u(0,0,0,0),e.camDstPos=l(0,1.384,-2.685),e.camDstRot=u(0,0,0,0),e.patientStartPos=l(2,0,3.2),e.patientDstPos=l(0,0,3.2),e.patientEndPos=l(-2,0,3.2),e.patientSideRot=u(0,0,0,0),e.patientFrontRot=u(0,0,0,0),e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.gameStarted=!1,this.gameCanOper=!1,this.touchStarted=!1,this.patientId=0,this.camera=this.cameraNode.getComponent(f),this.successEffect=this.cameraNode.getChildByName("Confetti2").getComponent(p),m.fromEuler(this.camDstRot,0,180,0),m.fromEuler(this.camOriginRot,-20,180,0),m.fromEuler(this.patientSideRot,0,90,0),m.fromEuler(this.patientFrontRot,0,0,0),this.cameraNode.setPosition(this.camOriginPos),this.cameraNode.setRotation(this.camOriginRot),this.initCurPatient(),this.updateProgressDisplay(),this.addEvent()},s.start=function(){var t=this;if(C.currentPlatform===O.WECHAT&&C.createBannerAd(),this.transCamToDst(),this.patient.walkSpeed=1.2,this.patient.walkTo(this.patientDstPos,(function(){d(t.patient.node).to(.1,{rotation:t.patientFrontRot}).call((function(){t.gameCanOper=!0})).start()})),this.scheduleOnce((function(){R.fadeinBgm()}),.8),this.maskSprite.node.active=!0,d(this.maskSprite.color).to(.75,{a:0}).call((function(){t.maskSprite.node.active=!1})).start(),C.currentPlatform===O.OPPO)if(A.instance.gameTimeTick>=20)null!==this.oppoNativeAd&&this.oppoNativeAd.show();else{var e=20-A.instance.gameTimeTick;this.scheduleOnce(this.showOppoNativeAd,e)}},s.showOppoNativeAd=function(){null!==this.oppoNativeAd&&this.oppoNativeAd.show()},s.onDestroy=function(){this.removeEvent()},s.transCamToDst=function(){d(this.cameraNode).to(1,{position:this.camDstPos,rotation:this.camDstRot}).call((function(){})).start()},s.addEvent=function(){g.on(P.EventType.TOUCH_START,this.onTouchStart,this),g.on(P.EventType.TOUCH_END,this.onTouchEnd,this),g.on(P.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.removeEvent=function(){g.off(P.EventType.TOUCH_START,this.onTouchStart,this),g.off(P.EventType.TOUCH_END,this.onTouchEnd,this),g.off(P.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.initCurPatient=function(){if(this.patient.patientType=v.Figure,this.patient.walkSpeed=1.2,this.patient.walkAnim="walk1",0===this.patientId)this.patient.meshId=A.instance.curPatient.meshId,this.patient.meshRenderer.mesh=A.instance.getCurPatientMesh(),this.patient.meshRenderer.material=A.instance.getRoleMat(A.instance.curPatient.meshId),this.patient.meshRenderer.skeleton=A.instance.getCurPatientSkeleton(),this.patient.setExpression(A.instance.getCurPatientExpression()),this.patient.figurePart=A.instance.curPatient.figurePart,this.patient.figurePartOriginScale=A.instance.curPatient.figurePartOriginScale,this.patient.figurePartScale=this.patient.figurePartOriginScale,this.patient.figurePart===T.Body&&(this.patient.walkAnim="walk2");else{var t=A.instance.roleSkinData.getRandUnlockedId();this.patient.meshId=t,this.patient.meshRenderer.mesh=A.instance.getRoleMesh(t),this.patient.meshRenderer.material=A.instance.getRoleMat(t),this.patient.meshRenderer.skeleton=A.instance.getRoleSkeleton(t),this.patient.setExpression(A.instance.getSickExpression()),this.patient.initFigureRand()}this.resetPatientPosAndRot()},s.resetPatientPosAndRot=function(){this.patient.setPosition(this.patientStartPos),this.patient.setRotation(this.patientSideRot)},s.updateProgressDisplay=function(){for(var t=0;t<this.progressNode.children.length;t++)this.patientId>t?this.progressNode.children[t].children[0].active=!0:this.progressNode.children[t].children[0].active=!1},s.playMachineEffects=function(t){for(var e=0;e<this.particleEffects.length;e++)t?this.particleEffects[e].play():this.particleEffects[e].stop()},s.onTouchStart=function(t){this.gameCanOper&&(this.touchStarted=!0,this.machineAnim.play(),this.playMachineEffects(!0),C.startRecord())},s.onTouchEnd=function(t){this.touchStarted=!1,this.gameCanOper&&(this.machineAnim.stop(),this.playMachineEffects(!1))},s.onTouchCancel=function(t){this.touchStarted=!1,this.gameCanOper&&(this.machineAnim.stop(),this.playMachineEffects(!1))},s.onPass=function(){var t=this;this.gameCanOper=!1,this.perfectAnim.node.parent.active=!0,this.perfectAnim.play(),this.machineAnim.stop(),this.playMachineEffects(!1),this.patientId++,this.updateProgressDisplay(),this.patientId>=4?(this.patient.setExpression(A.instance.getHappyExpression()),R.fadeoutBgm(),this.successEffect.play(),C.currentPlatform===O.OPPO&&this.unschedule(this.showOppoNativeAd),C.currentPlatform===O.WECHAT&&C.destroyBannerAd(),this.scheduleOnce((function(){y.loadScene("result")}),.7)):(this.patient.walkSpeed=1.2,this.patient.setExpression(A.instance.getHappyExpression()),this.scheduleOnce((function(){d(t.patient.node).to(.1,{rotation:t.patientSideRot}).start(),t.patient.walkSpeed=3,t.patient.walkAnim="walk3",t.patient.walkTo(t.patientEndPos,(function(){t.initCurPatient(),t.patient.walkTo(t.patientDstPos,(function(){d(t.patient.node).to(.1,{rotation:t.patientFrontRot}).call((function(){t.gameCanOper=!0})).start()}))}))}),1))},s.update=function(t){if(!1!==this.gameCanOper&&this.touchStarted){var e=this.patient.figurePartScale;e<1?((e+=t*this.scaleSpeed)>=1&&(e=1,this.onPass()),this.patient.setFigureScale(e)):e>1&&((e-=t*this.scaleSpeed)<=1&&(e=1,this.onPass()),this.patient.setFigureScale(e)),this.gameCanOper&&A.instance.gameData.isVibrationOn()&&C.vibrateShort()}},e}(E)).prototype,"cameraNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(B.prototype,"maskSprite",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(B.prototype,"patient",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(B.prototype,"particleEffects",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=e(B.prototype,"machineAnim",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(B.prototype,"goodAnim",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(B.prototype,"perfectAnim",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(B.prototype,"progressNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(B.prototype,"oppoNativeAd",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=B))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameData.ts",["cc","./DataStorage.ts","./PatientData.ts"],(function(t){"use strict";var e,n,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.default},function(t){a=t.PatientData}],execute:function(){e._RF.push({},"d5b51551klDfIKDI4h0+1/x","GameData",void 0),t("default",function(){function t(){this.curLevelId=0,this.day=0,this.patientIdx=0,this.curDayPatientDatas=[],this.money=0,this.snd="on",this.vibration="on",this.faceGameUnlocked=0,this.toothGameUnlocked=0,this.boneGameUnlocked=0,this.subgame8Unlocked=0}var e=t.prototype;return e.reset=function(){this.curLevelId=0,this.day=0,this.patientIdx=0,this.money=0,this.snd="on",this.vibration="on",this.faceGameUnlocked=0,this.toothGameUnlocked=0,this.boneGameUnlocked=0,this.subgame8Unlocked=0,this.curDayPatientDatas=a.createDay1PatientData()},e.isSndOn=function(){return"on"===this.snd},e.isVibrationOn=function(){return"on"===this.vibration},e.load=function(){if(n.dataExist(t.dataName)){var e=n.load(t.dataName);this.curLevelId=e.curLevelId,this.day=e.day,this.patientIdx=e.patientIdx,this.money=e.money,this.snd=e.snd,this.vibration=e.vibration,this.faceGameUnlocked=e.faceGameUnlocked,this.toothGameUnlocked=e.toothGameUnlocked,this.boneGameUnlocked=e.boneGameUnlocked,this.subgame8Unlocked=e.subgame8Unlocked,this.curDayPatientDatas=e.curDayPatientDatas}else this.reset(),n.save(t.dataName,this)},e.save=function(){n.save(t.dataName,this)},e.clear=function(){n.delete(t.dataName)},e.updateFaceGameUnlocked=function(t){this.faceGameUnlocked=t,this.save()},e.updateToothGameUnlocked=function(t){this.toothGameUnlocked=t,this.save()},e.updateBoneGameUnlocked=function(t){this.boneGameUnlocked=t,this.save()},e.isFaceGameUnlocked=function(){return this.faceGameUnlocked>0},e.isToothGameUnlocked=function(){return this.toothGameUnlocked>0},e.isBoneGameUnlocked=function(){return this.boneGameUnlocked>0},e.updateVibration=function(t){this.vibration=t?"on":"off",this.save()},e.updateSnd=function(t){this.snd=t?"on":"off",this.save()},e.updateMoney=function(t){return!(t<0)&&(this.money=t,this.save(),!0)},e.addMoney=function(t){this.money+=t,this.save()},e.nextLevel=function(){this.curLevelId++,this.save()},e.nextDay=function(){this.day++,this.save()},e.nextPatientIdx=function(){this.patientIdx++,this.patientIdx>3&&(this.patientIdx=0),this.save()},e.resetPatientIdx=function(){this.patientIdx=0,this.save()},e.updatePatientData=function(t){this.curDayPatientDatas=t,this.save()},e.unlockToothGame=function(){this.toothGameUnlocked=1,this.save()},e.getDayNum=function(){return this.day+1},t}()).dataName="magichospital",e._RF.pop()}}}));

System.register("chunks:///_virtual/GameMain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Platform.ts","./GameData.ts","./AudioManager.ts","./Patient.ts","./PatientData.ts","./Util.ts","./MainUI.ts","./RoleSkinData.ts","./NodePool.ts","./UpgradeLogic.ts","./AwardData.ts","./OppoNativeAd.ts"],(function(t){"use strict";var e,i,a,n,o,r,s,l,c,u,h,p,m,d,f,v,g,P,k,T,y,C,I,b,U,w,D,S,R,N,E,O,x,A,M,L,z,F,G,B,H,_,W;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Camera,l=t.Canvas,c=t.Sprite,u=t.Prefab,h=t.Node,p=t.Mesh,m=t.Skeleton,d=t.Material,f=t.v3,v=t.quat,g=t.color,P=t.game,k=t.Quat,T=t.Vec3,y=t.systemEvent,C=t.SystemEvent,I=t.tween,b=t.Animation,U=t.director,w=t.Component,D=t.instantiate},function(t){S=t.default,R=t.PlatformType},function(t){N=t.default},function(t){E=t.AudioManager},function(t){O=t.PatientType,x=t.Patient},function(t){A=t.PatientData,M=t.PatientFigurePart},function(t){L=t.default},function(t){z=t.MainUI},function(t){F=t.RoleSkinData,G=t.RoleId},function(t){B=t.default},function(t){H=t.UpgradeLogic},function(t){_=t.default},function(t){W=t.OppoNativeAd}],execute:function(){var X,q,V,Z,Q,J,j,Y,K,$,tt,et,it,at,nt,ot,rt,st,lt,ct,ut,ht,pt,mt,dt,ft,vt,gt,Pt,kt,Tt,yt,Ct,It;o._RF.push({},"bf4e25bGhhA4aMPWnnDrbyl","GameMain",void 0);var bt=r.ccclass,Ut=r.property;t("GameMain",(X=bt("GameMain"),q=Ut({type:s}),V=Ut({type:z}),Z=Ut({type:l}),Q=Ut({type:c}),J=Ut({type:u}),j=Ut({type:h}),Y=Ut({type:h}),K=Ut({type:h}),$=Ut({type:h}),tt=Ut({type:[p]}),et=Ut({type:[m]}),it=Ut({type:[d]}),at=Ut({type:[u]}),nt=Ut({type:[u]}),ot=Ut({type:W}),X(((It=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,a(e,"camera",lt,n(e)),a(e,"mainUI",ct,n(e)),a(e,"canvas",ut,n(e)),a(e,"maskSprite",ht,n(e)),a(e,"patientPrefab",pt,n(e)),a(e,"overviewNode",mt,n(e)),a(e,"unlockRoleNode",dt,n(e)),a(e,"unlockRoleCamNode",ft,n(e)),a(e,"patientParent",vt,n(e)),a(e,"patientMeshs",gt,n(e)),a(e,"patientSkeletons",Pt,n(e)),a(e,"mats",kt,n(e)),a(e,"sickExpressions",Tt,n(e)),a(e,"happyExpression",yt,n(e)),a(e,"oppoNativeAd",Ct,n(e)),e.upgradeLogic=null,e.curPatient=null,e.rolePool=new B,e.patientList=new B,e.receptionCamPos=f(0,2,2.7),e.receptionCamRot=v(0,0,0,0),e.overlookCamPos=f(-108.241,145.409,-147.89),e.overlookCamRot=v(0,0,0,0),e.isCamOverlook=!1,e.overlookCamTempPos=f(0,0,0),e.overlookXMov=f(0,0,0),e.overlookZMov=f(0,0,0),e.overlookXAxis=f(0,0,0),e.overlookZAxis=f(0,0,0),e.maskFadeInFinished=!1,e.scenePreloadFinished=!1,e.preloadSceneName="",e.gameData=new N,e.roleSkinData=new F,e.awardData=new _,e.maskSrcColor=g(99,42,169,0),e.maskDstColor=g(99,42,169,255),e.wageCountDown=0,e.gameTimeTick=0,e}i(e,t);var o=e.prototype;return o.onLoad=function(){e.instance=this,P.addPersistRootNode(this.node),P.addPersistRootNode(this.overviewNode),P.addPersistRootNode(this.camera.node),P.addPersistRootNode(this.unlockRoleNode),P.addPersistRootNode(this.unlockRoleCamNode),S.decidePlatform()},o.findArgs=function(){null===this.mainUI&&(this.canvas=this.node.parent.getChildByName("Canvas").getComponent(l),this.mainUI=this.canvas.node.getChildByName("MainPanel").getComponent("MainUI"),this.maskSprite=this.canvas.node.getChildByName("maskSprite").getComponent(c),this.mainUI.unlockRoleUI.reset())},o.onDestroy=function(){this.removeEvent()},o.onEnable=function(){},o.onDisable=function(){},o.onHide=function(){E.onHide()},o.onShow=function(){E.onShow()},o.start=function(){this.upgradeLogic=this.node.getComponent(H),this.addEvent(),k.fromEuler(this.receptionCamRot,-16,0,0),k.fromEuler(this.overlookCamRot,-38,-145,0),T.transformQuat(this.overlookXAxis,f(1,0,0),this.overlookCamRot),T.transformQuat(this.overlookZAxis,f(0,1,0),this.overlookCamRot),this.camera.node.setRotation(this.receptionCamRot),this.loadGame(),this.prepareToStart()},o.showOppoNativeAd=function(){null!==this.oppoNativeAd&&this.oppoNativeAd.show()},o.saveGame=function(){this.gameData.save()},o.loadGame=function(){this.gameData.load(),this.awardData.load(),this.roleSkinData.load(),this.upgradeLogic.load(),E.sndOn=this.gameData.isSndOn(),E.sndOn&&E.playBgm()},o.addEvent=function(){y.on(C.EventType.TOUCH_START,this.onTouchStart,this),y.on(C.EventType.TOUCH_MOVE,this.onTouchMove,this),y.on(C.EventType.TOUCH_END,this.onTouchEnd,this),y.on(C.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},o.removeEvent=function(){y.off(C.EventType.TOUCH_START,this.onTouchStart,this),y.off(C.EventType.TOUCH_MOVE,this.onTouchMove,this),y.off(C.EventType.TOUCH_END,this.onTouchEnd,this),y.off(C.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},o.onTouchStart=function(t){},o.onTouchMove=function(t){this.isCamOverlook&&(this.camera.node.getPosition(this.overlookCamTempPos),T.multiplyScalar(this.overlookXMov,this.overlookXAxis,-.03*t.getDelta().x),T.multiplyScalar(this.overlookZMov,this.overlookZAxis,-.03*t.getDelta().y),this.overlookCamTempPos.add(this.overlookXMov),this.overlookCamTempPos.add(this.overlookZMov),this.overlookCamTempPos.x>-90&&(this.overlookCamTempPos.x=-90),this.overlookCamTempPos.x<-125&&(this.overlookCamTempPos.x=-125),this.overlookCamTempPos.y>158&&(this.overlookCamTempPos.y=158),this.overlookCamTempPos.y<138&&(this.overlookCamTempPos.y=138),this.overlookCamTempPos.z>-135&&(this.overlookCamTempPos.z=-135),this.overlookCamTempPos.z<-155&&(this.overlookCamTempPos.z=-155),this.camera.node.setPosition(this.overlookCamTempPos))},o.onTouchEnd=function(t){},o.onTouchCancel=function(t){},o.clearPatients=function(){this.patientList.clear(),this.curPatient=null,this.patientParent.destroyAllChildren(),this.patientParent.removeAllChildren()},o.createPatientsByData=function(){for(var t=this,i=4-this.gameData.patientIdx,a=f(0,0,0),n=function(n){var o=t.gameData.curDayPatientDatas[4-i+n],r=D(t.patientPrefab),s=r.getComponent(x);0===n&&(t.curPatient=s),t.patientParent.addChild(r),t.patientList.put(r),s.meshId=o.meshId,s.expressionId=o.expressionId,s.talkId=o.talkId,s.init(o.patientType,t.getRoleMesh(o.meshId),t.getRoleSkeleton(o.meshId),t.sickExpressions[o.expressionId]),a.set(e.patientGenPos),n>0&&a.set(L.randRangeNumber(0,100)>50?.15*n:-.1*n,0,e.patientGenPos.z-3*n),r.setPosition(a);var l=f(0,0,e.patientTargetPos.z-3*n);0===n?s.walkTo(l,(function(){t.patientWalkOnTarget()})):t.scheduleOnce((function(){s.walkTo(l)}),.3)},o=0;o<i;o++)n(o)},o.prepareToStart=function(){var t=this;if(S.currentPlatform!==R.VIVO&&S.currentPlatform!==R.TT&&S.currentPlatform!==R.WECHAT||S.createBannerAd(),S.currentPlatform===R.OPPO){console.log("** Oppo xml request");var e=cc.loader.getXMLHttpRequest();e.open("GET","http://60.205.229.14:3001/molicfg.txt",!0),e.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),e.onreadystatechange=function(){if(console.log("***onreadystatechange ="+e.readyState+" status="+e.status),4===e.readyState&&e.status>=200&&e.status<300){console.log("XML status="+e.status+" res2="+e.responseText);var t=JSON.parse(e.responseText);S.oppoShowReportRate=t.showRate,S.oppoClickReportRate=t.clickRate,console.log("** showRate="+S.oppoShowReportRate+"  clickRate="+S.oppoClickReportRate)}},e.send(),S.createOppoNative1Ad(),S.createOppoNative2Ad(),S.createGamePortalAd()}this.upgradeLogic.setupScene(),this.createPatientsByData(),this.gameData.curLevelId>0&&this.scheduleOnce((function(){t.mainUI.offlineAwardUI.pop()}),1.2)},o.gameToNextDay=function(){if(this.gameData.resetPatientIdx(),this.gameData.nextDay(),S.reportNextDay(this.gameData.day),2===this.gameData.getDayNum()){var t=A.createDay2PatientData();this.gameData.updatePatientData(t),this.clearPatients(),this.createPatientsByData()}else{var e=A.createOneDayPatientData();this.gameData.updatePatientData(e),this.clearPatients(),this.createPatientsByData()}},o.refuseCurPatient=function(){var t=this;this.mainUI.hideBubble(),this.mainUI.hideTalk(),this.mainUI.hideUI(),this.gameData.nextPatientIdx();var i=v(0,0,0,0);k.fromEuler(i,0,90,0),I(this.curPatient.node).to(.1,{rotation:i}).start(),this.curPatient.walkTo(e.patientTargetLeft,(function(){t.deactiveCurPatient(),t.activeNextPatient()}))},o.getRoleMesh=function(t){return S.currentPlatform===R.IOS&&t===G.Iron&&(t=G.Robot),e.instance.patientMeshs[t]},o.getRoleMat=function(t){return t===G.NewYearGirl?this.mats[1]:t===G.Cattle?this.mats[2]:this.mats[0]},o.getRoleSkeleton=function(t){return S.currentPlatform===R.IOS&&t===G.Iron&&(t=G.Robot),e.instance.patientSkeletons[t]},o.getCurPatientMesh=function(){return null===this.curPatient?null:S.currentPlatform===R.IOS&&this.curPatient.meshId===G.Iron?this.patientMeshs[G.Robot]:this.patientMeshs[this.curPatient.meshId]},o.getCurPatientSkeleton=function(){return null===this.curPatient?null:S.currentPlatform===R.IOS&&this.curPatient.meshId===G.Iron?this.patientSkeletons[G.Robot]:this.patientSkeletons[this.curPatient.meshId]},o.getCurPatientExpression=function(){return null===this.curPatient?null:this.sickExpressions[this.curPatient.expressionId]},o.getHappyExpression=function(){var t=L.randRangeNumber(0,this.happyExpression.length-1);return this.happyExpression[t]},o.getCurPatientHeadWorldPos=function(){return this.curPatient.headNode.worldPosition},o.getSickExpression=function(){var t=L.randRangeNumber(0,1);return this.sickExpressions[t]},o.getSickExpressionById=function(t){return this.sickExpressions[t]},o.isCurPatientNeedExpression=function(){return null!==this.curPatient&&this.curPatient.meshId!==G.Iron},o.isNeedExpression=function(t){return t!==G.Iron&&t!==G.Robot&&t!==G.Joker},o.isCurFigureLeg=function(){return null!==this.curPatient&&(this.curPatient.patientType===O.Figure&&this.curPatient.figurePart===M.Leg)},o.transToUpgrade=function(){this.camera.node.getComponent(b).play("cameraAnim_1"),this.mainUI.hideUI(),this.mainUI.hideBubble(),this.mainUI.hideTalk()},o.stopMainCameraAnim=function(){this.camera.node.getComponent(b).stop()},o.transToReception=function(){this.isCamOverlook=!1,this.camera.node.getComponent(b).play("cameraAnim_2"),this.mainUI.hideUpgradeUI()},o.camResetEnd=function(){var t=this;this.stopMainCameraAnim(),this.mainUI.displayUI(),this.scheduleOnce((function(){t.mainUI.displayBubble(),t.curPatient.shouldShowTalk()&&t.mainUI.displayTalk(t.curPatient.talkId)}),.4)},o.resetCam=function(){this.camera.node.setPosition(this.receptionCamPos),this.camera.node.setRotation(this.receptionCamRot)},o.camToOverlook=function(){this.stopMainCameraAnim(),this.camera.node.setPosition(this.overlookCamPos),this.camera.node.setRotation(this.overlookCamRot),this.camera.fov=12,this.isCamOverlook=!0},o.showOverview=function(t){this.overviewNode.active=t},o.patientWalkOnTarget=function(){this.isCamOverlook||(this.mainUI.displayUI(),this.mainUI.displayBubble(),this.curPatient.talkId>=0&&this.mainUI.displayTalk(this.curPatient.talkId))},o.toSubGameScene=function(){var t=this;this.removeEvent(),this.curPatient.patientType===O.XRay?this.preloadSceneName="XRayGame":this.curPatient.patientType===O.UpSize?this.preloadSceneName="heightenGame":this.curPatient.patientType===O.Symptom?this.preloadSceneName="scanGame":this.curPatient.patientType===O.Figure?this.preloadSceneName="figureGame":this.curPatient.patientType===O.Face?this.preloadSceneName="facialCareGame":this.curPatient.patientType===O.Tooth&&(this.preloadSceneName="dentistryGame"),E.fadeoutBgm(),this.scenePreloadFinished=!1,this.maskFadeInFinished=!1,this.maskSprite.node.active=!0,this.maskSprite.color.set(this.maskSrcColor),I(this.maskSprite.color).to(.75,{a:255}).call((function(){t.maskFadeInFinished=!0})).start(),this.mainUI.hideUI(),this.mainUI.hideBubble(),this.mainUI.hideTalk(),U.preloadScene(this.preloadSceneName,(function(t,e,i){}),(function(e,i){t.scenePreloadFinished=!0}))},o.backToGameMain=function(){var t=this;this.addEvent(),this.camera.node.active=!0,this.overviewNode.active=!0,E.fadeinBgm(),this.mainUI=null,this.findArgs(),1===this.gameData.curLevelId?(this.deactiveCurPatient(),this.scheduleOnce((function(){t.transToUpgrade()}),.5)):(this.deactiveCurPatient(),this.activeNextPatient())},o.transUpgradeEnd=function(){this.stopMainCameraAnim(),this.isCamOverlook=!0,1===this.gameData.curLevelId&&!1===this.upgradeLogic.isGuide0Completed()?this.upgradeLogic.startGuide0():this.mainUI.displayUpgradeUI()},o.backToGameMainOverlook=function(){this.addEvent(),this.camera.node.active=!0,this.overviewNode.active=!0,E.fadeinBgm(),this.mainUI=null,this.findArgs(),this.mainUI.resetUI(),this.mainUI.displayUpgradeUI(),this.camToOverlook(),S.currentPlatform!==R.TT&&S.currentPlatform!==R.WECHAT||(S.destroyBannerAd(),S.createBannerAd())},o.deactiveCurPatient=function(){this.curPatient.node.active=!1;var t=this.patientList.pop();t.removeFromParent(),t.destroy(),this.curPatient=null},o.activeNextPatient=function(){var t=this;1===this.gameData.curLevelId&&this.scheduleOnce((function(){t.mainUI.offlineAwardUI.pop()}),1),0===this.patientList.size()&&console.error("** 激活下个角色时错误");for(var i=function(i){var a=t.patientList.access(i).getComponent(x);0===i&&(t.curPatient=a);var n=f(0,0,e.patientTargetPos.z-3*i);0===i?a.walkTo(n,(function(){t.patientWalkOnTarget()})):t.scheduleOnce((function(){a.walkTo(n)}),.3)},a=0;a<this.patientList.size();a++)i(a)},o.resetWageCountDown=function(){this.wageCountDown=61},o.canUpgradeEquipment=function(){var t=e.instance.upgradeLogic.getEquipmentPrice();return!(t<0)&&e.instance.gameData.money>=t},o.canUpgradeFloor=function(){var t=e.instance.upgradeLogic.getFloorPrice();return!(t<0)&&e.instance.gameData.money>=t},o.canUpgradeWall=function(){var t=e.instance.upgradeLogic.getWallPrice();return!(t<0)&&e.instance.gameData.money>=t},o.canRoomUpgrade=function(){return this.canUpgradeEquipment()||this.canUpgradeFloor()||this.canUpgradeWall()||this.upgradeLogic.isRoomMaxLevel()},o.update=function(t){var i=this.gameTimeTick;this.gameTimeTick+=t,i<=15&&this.gameTimeTick>15&&S.currentPlatform===R.OPPO&&this.showOppoNativeAd(),this.maskFadeInFinished&&this.scenePreloadFinished&&(this.maskFadeInFinished=!1,this.scenePreloadFinished=!1,this.overviewNode.active=!1,this.canvas.node.active=!1,this.canvas.enabled=!1,this.maskSprite.node.active=!1,this.mainUI.hideBubble(),S.currentPlatform!==R.VIVO&&S.currentPlatform!==R.TT&&S.currentPlatform!==R.WECHAT||S.destroyBannerAd(),this.camera.node.active=!1,this.mainUI=null,U.loadScene(this.preloadSceneName));var a=Date.now()-this.awardData.offlineAwardLastDate;this.wageCountDown=Math.floor(e.wageCountDownTotalTime-a/1e3),this.wageCountDown<0&&(this.wageCountDown=0),null!==this.mainUI&&this.mainUI.updateWageBtn()},e}(w)).instance=null,It.patientGenPos=f(0,0,-6),It.patientTargetPos=f(0,0,-1.64),It.patientTargetLeft=f(-2,0,-1.64),It.wageCountDownTotalTime=61,lt=e((st=It).prototype,"camera",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(st.prototype,"mainUI",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(st.prototype,"canvas",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(st.prototype,"maskSprite",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(st.prototype,"patientPrefab",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(st.prototype,"overviewNode",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=e(st.prototype,"unlockRoleNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(st.prototype,"unlockRoleCamNode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(st.prototype,"patientParent",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=e(st.prototype,"patientMeshs",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Pt=e(st.prototype,"patientSkeletons",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),kt=e(st.prototype,"mats",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Tt=e(st.prototype,"sickExpressions",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yt=e(st.prototype,"happyExpression",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ct=e(st.prototype,"oppoNativeAd",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=st))||rt));o._RF.pop()}}}));

System.register("chunks:///_virtual/Loading.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var e,n,o,t,a,i,s,c,l,u;return{setters:[function(r){e=r.applyDecoratedDescriptor,n=r.inheritsLoose,o=r.initializerDefineProperty,t=r.assertThisInitialized},function(r){a=r.cclegacy,i=r._decorator,s=r.ProgressBar,c=r.assetManager,l=r.director,u=r.Component}],execute:function(){var p,g,d,f,y;a._RF.push({},"3bcd1+rnLJLRIj2PA0UTAbM","Loading",void 0);var L=i.ccclass,h=i.property;r("Loading",(p=L("Loading"),g=h({type:s}),p((y=e((f=function(r){function e(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=r.call.apply(r,[this].concat(a))||this,o(e,"progressBar",y,t(e)),e}n(e,r);var a=e.prototype;return a.onLoad=function(){this.progressBar.progress=0},a.start=function(){this.startLoading()},a.startLoading=function(){var r=this,e=Date.now();c.loadBundle("fbx",null,(function(n,o){console.log("*** XX bundle load completed err="+JSON.stringify(n)),l.preloadScene("mainScene",(function(e,n,o){var t=e/n;t>1&&(t=1),r.progressBar.progress=t}),(function(r,n){var o=Date.now()-e;console.log("** 场景预加载完成 耗时="+o),l.loadScene("mainScene")}))}))},e}(u)).prototype,"progressBar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=f))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./migrate-canvas.ts","./AdTip.ts","./AudioManager.ts","./AwardData.ts","./CameraEvent.ts","./DataStorage.ts","./DayAwardUI.ts","./FacialGame.ts","./FigureGame.ts","./GameData.ts","./GameMain.ts","./Loading.ts","./MainUI.ts","./MoneyAnim.ts","./NodePool.ts","./NodePoolMap.ts","./OfflineAwardUI.ts","./OppoNativeAd.ts","./Patient.ts","./PatientData.ts","./Platform.ts","./ResultCtrl.ts","./ResultUI.ts","./RoleSkinData.ts","./ScanEvent.ts","./ScanGame.ts","./SettingUI.ts","./ShareUI.ts","./TTRecorder.ts","./ToothGame.ts","./ToothGameRay.ts","./UnlockGameUI.ts","./UnlockRolePopUI.ts","./UnlockRoleUI.ts","./UpgradeLogic.ts","./UpgradeUI.ts","./UpsizeGame.ts","./Util.ts","./XRayGame.ts","./BoneTest.ts","./MaskTest.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMain.ts","./Patient.ts","./SettingUI.ts","./Platform.ts","./AdTip.ts","./UnlockRoleUI.ts","./UpgradeUI.ts","./OfflineAwardUI.ts","./UnlockGameUI.ts"],(function(e){"use strict";var t,n,i,o,a,s,r,l,c,d,u,p,h,b,g,m,B,N,y,f,P,w,v,k,I,S,L,U,C,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,r=e.Label,l=e.Node,c=e.Sprite,d=e.SpriteFrame,u=e.v3,p=e.color,h=e.tween,b=e.UITransform,g=e.Vec3,m=e.Animation,B=e.Color,N=e.Component},function(e){y=e.GameMain},function(e){f=e.PatientNames,P=e.PatientTalk},function(e){w=e.SettingUI},function(e){v=e.default,k=e.PlatformType,I=e.AdSceneId},function(e){S=e.AdTip},function(e){L=e.UnlockRoleUI},function(e){U=e.UpgradeUI},function(e){C=e.OfflineAwardUI},function(e){T=e.UnlockGameUI}],execute:function(){var D,O,G,A,z,M,R,V,x,F,W,E,H,_,J,j,Y,Z,q,K,Q,X,$,ee,te,ne,ie,oe,ae,se,re,le,ce,de,ue,pe,he,be,ge,me,Be,Ne,ye,fe,Pe,we,ve,ke,Ie,Se,Le,Ue;a._RF.push({},"67f29Y3sJdE65LM+Frphdoe","MainUI",void 0);var Ce=s.ccclass,Te=s.property;e("MainUI",(D=Ce("MainUI"),O=Te({type:r}),G=Te({type:l}),A=Te({type:l}),z=Te({type:l}),M=Te({type:l}),R=Te({type:l}),V=Te({type:l}),x=Te({type:l}),F=Te({type:l}),W=Te({type:l}),E=Te({type:l}),H=Te({type:l}),_=Te({type:r}),J=Te({type:w}),j=Te({type:U}),Y=Te({type:L}),Z=Te({type:C}),q=Te({type:T}),K=Te({type:c}),Q=Te({type:r}),X=Te({type:r}),$=Te({type:l}),ee=Te({type:[d]}),te=Te({type:[l]}),D(((Ue=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,i(t,"moneyLabel",oe,o(t)),i(t,"settingBtnNode",ae,o(t)),i(t,"shareBtnNode",se,o(t)),i(t,"upgradeBtnNode",re,o(t)),i(t,"roleBtnNode",le,o(t)),i(t,"adGameBtnNode",ce,o(t)),i(t,"moreGameBtnNode",de,o(t)),i(t,"viewDetailBtnNode",ue,o(t)),i(t,"dayProgressNode",pe,o(t)),i(t,"playBtnNode",he,o(t)),i(t,"refuseBtnNode",be,o(t)),i(t,"continueBtnNode",ge,o(t)),i(t,"wageTimeLabel",me,o(t)),i(t,"settingUI",Be,o(t)),i(t,"upgradeUI",Ne,o(t)),i(t,"unlockRoleUI",ye,o(t)),i(t,"offlineAwardUI",fe,o(t)),i(t,"unlockGameUI",Pe,o(t)),i(t,"bubbleSprite",we,o(t)),i(t,"talkLabel",ve,o(t)),i(t,"dayLabel",ke,o(t)),i(t,"viewAdBtnNode",Ie,o(t)),i(t,"bubbleFrames",Se,o(t)),i(t,"patientIcons",Le,o(t)),t.playBtnLabel=null,t.playBtnVipLabelNode=null,t.playBtnAdIcon=null,t.adTip=null,t.wageCanGetColor=p(100,255,0,255),t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.playBtnLabel=this.playBtnNode.getChildByName("text").getComponent(r),this.playBtnVipLabelNode=this.playBtnNode.getChildByName("vipLabel"),this.playBtnAdIcon=this.playBtnNode.getChildByName("adIcon"),this.adTip=this.node.parent.getChildByName("adTip").getComponent(S)},a.start=function(){this.resetUI(),v.currentPlatform!==k.OPPO&&v.currentPlatform!==k.VIVO||(this.shareBtnNode.active=!1)},a.showViewDetailBtn=function(e){this.viewDetailBtnNode.active=e},a.resetUI=function(){this.moneyLabel.node.parent.setPosition(t.moneyNodeSrcPos),this.settingBtnNode.setPosition(t.settingBtnNodeSrcPos),this.shareBtnNode.setPosition(t.shareBtnNodeSrcPos),this.roleBtnNode.parent.setPosition(t.btnBgSrcPos),this.playBtnNode.setPosition(t.playBtnNodeSrcPos),this.wageTimeLabel.node.parent.setPosition(t.wageBtnNodeSrcPos),this.dayProgressNode.setScale(u(0,0,0)),this.dayProgressNode.active=!1,this.playBtnAdIcon.active=!1,this.refuseBtnNode.active=!1,v.currentPlatform===k.OPPO?(this.moreGameBtnNode.active=!0,y.instance.oppoNativeAd.isShowed()?this.viewDetailBtnNode.active=!0:this.viewDetailBtnNode.active=!1,this.moreGameBtnNode.setPosition(t.moreGameBtnNodeSrcPos),this.viewDetailBtnNode.setPosition(t.viewDetailBtnNodeSrcPos)):(this.moreGameBtnNode.active=!1,this.viewDetailBtnNode.active=!1)},a.showViewAdBtn=function(e,t){void 0===t&&(t=300),this.viewAdBtnNode.active=e,e&&this.viewAdBtnNode.setPosition(0,t,0)},a.onViewAdClick=function(){y.instance.oppoNativeAd.onClick()},a.updateMoneyDisplay=function(){this.moneyLabel.string=""+y.instance.gameData.money,this.updateUpgradeBtn()},a.displayContinueBtn=function(){this.continueBtnNode.active=!0,this.continueBtnNode.setPosition(t.continueBtnNodeSrcPos),h(this.continueBtnNode).to(.6,{position:t.continueBtnNodeDstPos},{easing:"backOut"}).start()},a.displayUI=function(){var e=this;this.playBtnLabel.string=f[y.instance.curPatient.patientType],this.updateMoneyDisplay(),y.instance.curPatient.isRoleUnlocked()?(this.playBtnAdIcon.active=!1,this.playBtnVipLabelNode.active=!1,this.playBtnLabel.node.setPosition(0,0,0)):(this.playBtnAdIcon.active=!0,this.playBtnVipLabelNode.active=!0,this.playBtnLabel.node.setPosition(20,0,0),this.scheduleOnce((function(){e.refuseBtnNode.active=!0}),2)),this.dayLabel.string="第"+y.instance.gameData.getDayNum()+"天";for(var n=0;n<this.patientIcons.length;n++){var i=4-y.instance.patientList.size();this.patientIcons[n].children[0].active=!1,this.patientIcons[n].children[1].active=!1,n<i?(this.patientIcons[n].children[0].active=!0,this.patientIcons[n].children[1].active=!1):n===i&&(this.patientIcons[n].children[0].active=!1,this.patientIcons[n].children[1].active=!0)}if(h(this.moneyLabel.node.parent).to(.6,{position:t.moneyNodeDstPos},{easing:"backOut"}).start(),h(this.settingBtnNode).to(.6,{position:t.settingBtnNodeDstPos},{easing:"backOut"}).start(),h(this.shareBtnNode).to(.6,{position:t.shareBtnNodeDstPos},{easing:"backOut"}).start(),this.moreGameBtnNode.active&&(h(this.moreGameBtnNode).to(.6,{position:t.moreGameBtnNodeDstPos},{easing:"backOut"}).start(),h(this.viewDetailBtnNode).to(.6,{position:t.viewDetailBtnNodeDstPos},{easing:"backOut"}).start()),y.instance.gameData.curLevelId>0){this.upgradeBtnNode.active=!0,this.updateUpgradeBtn();var o=this.upgradeBtnNode.parent.getComponent(b);1===y.instance.gameData.toothGameUnlocked?(o.height=338,this.adGameBtnNode.active=!1):(o.height=490,this.adGameBtnNode.active=!0),this.wageTimeLabel.node.parent.active=!0,this.wageTimeLabel.node.parent.setPosition(t.wageBtnNodeSrcPos),h(this.wageTimeLabel.node.parent).to(.6,{position:t.wageBtnNodeDstPos},{easing:"backOut"}).start()}else{this.upgradeBtnNode.active=!1,this.adGameBtnNode.active=!1,this.upgradeBtnNode.parent.getComponent(b).height=200,this.wageTimeLabel.node.parent.active=!1}h(this.roleBtnNode.parent).to(.6,{position:t.btnBgDstPos},{easing:"backOut"}).start(),h(this.playBtnNode).to(.6,{position:t.playBtnNodeDstPos},{easing:"backOut"}).start(),this.dayProgressNode.active=!0,h(this.dayProgressNode).to(.35,{scale:g.ONE}).start()},a.updateUpgradeBtn=function(){var e=this.upgradeBtnNode.getChildByName("red"),t=this.upgradeBtnNode.getComponent(m);y.instance.canRoomUpgrade()?(e.active=!0,t.play()):(e.active=!1,t.stop())},a.hideUI=function(){this.refuseBtnNode.active=!1,h(this.moneyLabel.node.parent).to(.6,{position:t.moneyNodeSrcPos},{easing:"backOut"}).start(),h(this.settingBtnNode).to(.6,{position:t.settingBtnNodeSrcPos},{easing:"backOut"}).start(),h(this.shareBtnNode).to(.6,{position:t.shareBtnNodeSrcPos},{easing:"backOut"}).start(),this.moreGameBtnNode.active&&(h(this.moreGameBtnNode).to(.6,{position:t.moreGameBtnNodeSrcPos},{easing:"backOut"}).start(),h(this.viewDetailBtnNode).to(.6,{position:t.viewDetailBtnNodeSrcPos},{easing:"backOut"}).start()),h(this.roleBtnNode.parent).to(.6,{position:t.btnBgSrcPos},{easing:"backOut"}).start(),h(this.playBtnNode).to(.6,{position:t.playBtnNodeSrcPos},{easing:"backOut"}).start(),h(this.wageTimeLabel.node.parent).to(.6,{position:t.wageBtnNodeSrcPos},{easing:"backOut"}).start(),this.dayProgressNode.active=!1,h(this.dayProgressNode).to(.35,{scale:g.ZERO}).start()},a.displayUpgradeUI=function(){this.updateMoneyDisplay(),h(this.moneyLabel.node.parent).to(.6,{position:t.moneyNodeDstPos},{easing:"backOut"}).start(),h(this.settingBtnNode).to(.6,{position:t.settingBtnNodeDstPos},{easing:"backOut"}).start(),h(this.shareBtnNode).to(.6,{position:t.shareBtnNodeDstPos},{easing:"backOut"}).start(),this.continueBtnNode.active=!0,h(this.continueBtnNode).to(.6,{position:t.continueBtnNodeDstPos},{easing:"backOut"}).start(),this.wageTimeLabel.node.parent.active&&h(this.wageTimeLabel.node.parent).to(.6,{position:t.wageBtnNodeDstPos},{easing:"backOut"}).start(),this.upgradeUI.show()},a.hideUpgradeUI=function(){h(this.moneyLabel.node.parent).to(.6,{position:t.moneyNodeSrcPos},{easing:"backOut"}).start(),h(this.settingBtnNode).to(.6,{position:t.settingBtnNodeSrcPos},{easing:"backOut"}).start(),h(this.shareBtnNode).to(.6,{position:t.shareBtnNodeSrcPos},{easing:"backOut"}).start(),h(this.continueBtnNode).to(.6,{position:t.continueBtnNodeSrcPos},{easing:"backOut"}).start(),this.wageTimeLabel.node.parent.active&&h(this.wageTimeLabel.node.parent).to(.6,{position:t.wageBtnNodeSrcPos},{easing:"backOut"}).start(),this.upgradeUI.hide()},a.displayBubble=function(){this.bubbleSprite.node.parent.active=!0,this.bubbleSprite.spriteFrame=this.bubbleFrames[y.instance.curPatient.patientType];var e=u(0,0,0),t=y.instance.getCurPatientHeadWorldPos();y.instance.camera.convertToUINode(t,this.node.parent,e),this.bubbleSprite.node.parent.setPosition(e.x-145,e.y+200,0),this.bubbleSprite.node.parent.setScale(-.3,.3,.3),h(this.bubbleSprite.node.parent).to(.3,{scale:u(-1,1,1)}).call((function(){})).start()},a.hideBubble=function(){this.bubbleSprite.node.parent.getComponent(m).stop(),this.bubbleSprite.node.parent.active=!1},a.displayTalk=function(e){this.talkLabel.node.parent.active=!0,this.talkLabel.string=P[e];var t=u(0,0,0),n=y.instance.getCurPatientHeadWorldPos();y.instance.camera.convertToUINode(n,this.node.parent,t),y.instance.isCurFigureLeg()?this.talkLabel.node.parent.setPosition(t.x+15,t.y+240,0):this.talkLabel.node.parent.setPosition(t.x+15,t.y+320,0),this.talkLabel.node.parent.setScale(.3,.3,.3),h(this.talkLabel.node.parent).to(.3,{scale:u(1,1,1)}).call((function(){})).start()},a.hideTalk=function(){this.talkLabel.node.parent.getComponent(m).stop(),this.talkLabel.node.parent.active=!1},a.updateWageBtn=function(){if(y.instance.wageCountDown>0){var e=this.wageTimeLabel.node.parent.getChildByName("text").getComponent(r);e.string="领工资",e.color=B.WHITE;var t=this.wageTimeLabel.node.parent.getComponent(m);t.getState("btnScale").isPlaying&&t.stop(),this.wageTimeLabel.node.active=!0,this.wageTimeLabel.node.parent.getChildByName("red").active=!1;var n=Math.floor(y.instance.wageCountDown),i=Math.floor(n/60),o=""+i;i<10&&(o="0"+i);var a=""+(n%=60);n<10&&(a="0"+n),this.wageTimeLabel.string=o+":"+a}else if(0===y.instance.wageCountDown&&this.wageTimeLabel.node.active){var s=this.wageTimeLabel.node.parent.getChildByName("text").getComponent(r);s.string="可领取",s.color=this.wageCanGetColor,this.wageTimeLabel.node.parent.getChildByName("red").active=!0;var l=this.wageTimeLabel.node.parent.getComponent(m);l.getState("btnScale").isPlaying||l.play(),this.wageTimeLabel.node.active=!1}},a.wageBtnChangeToCanGet=function(){var e=this.wageTimeLabel.node.parent.getChildByName("text").getComponent(r);e.string="可领取",e.color=this.wageCanGetColor,this.wageTimeLabel.node.active=!1},a.onSettingClicked=function(){this.settingUI.show()},a.onShareClicked=function(){v.shareApp()},a.onUpgradeClicked=function(){this.unscheduleAllCallbacks(),y.instance.transToUpgrade(),v.reportUpgradeClick()},a.onRoleBtnClicked=function(){v.currentPlatform===k.TT&&(v.destroyBannerAd(),v.createBannerAd()),y.instance.mainUI.node.active=!1,this.unlockRoleUI.show()},a.onWageBtnClicked=function(){this.offlineAwardUI.show()},a.onUnlockGameClicked=function(){this.unlockGameUI.show()},a.onMoreGameClicked=function(){v.showGamePortalAd()},a.onJumpGame=function(){v.currentPlatform===k.WECHAT&&wx.navigateToMiniProgram({appId:"wx1752ae5d696159d5"})},a.onJmpGame=function(){v.currentPlatform===k.WECHAT&&wx.navigateToMiniProgram({appId:"wxd25354b98c1ecedf"})},a.onViewDetailClicked=function(){v.reportOppoNative1Click()},a.onPlayClicked=function(){this.unscheduleAllCallbacks(),this.playBtnAdIcon.active?v.currentPlatform===k.TT||v.currentPlatform===k.OPPO||v.currentPlatform===k.VIVO||v.currentPlatform===k.WECHAT?(v.adSceneId=I.TryVIPRole,v.adTip=this.adTip,v.playVideoAd((function(){y.instance.toSubGameScene(),v.reportTryRole(y.instance.curPatient.meshId)}))):v.currentPlatform===k.Default&&y.instance.toSubGameScene():y.instance.toSubGameScene()},a.onRefuseClicked=function(){y.instance.refuseCurPatient()},a.onContinueClicked=function(){y.instance.mainUI.upgradeUI.hideGuideFinger(),null===y.instance.curPatient&&y.instance.activeNextPatient(),y.instance.transToReception()},a.roleUIClose=function(){this.unlockRoleUI.close(),y.instance.showOverview(!0),y.instance.mainUI.node.active=!0},t}(N)).moneyNodeSrcPos=u(0,100,0),Ue.settingBtnNodeSrcPos=u(-500,-150,0),Ue.shareBtnNodeSrcPos=u(-500,-255,0),Ue.moreGameBtnNodeSrcPos=u(-500,-400,0),Ue.btnBgSrcPos=u(545,-550,0),Ue.viewDetailBtnNodeSrcPos=u(545,-400,0),Ue.playBtnNodeSrcPos=u(0,-100,0),Ue.continueBtnNodeSrcPos=u(550,600,0),Ue.wageBtnNodeSrcPos=u(-500,-605,0),Ue.moneyNodeDstPos=u(0,-150,0),Ue.settingBtnNodeDstPos=u(-300,-150,0),Ue.shareBtnNodeDstPos=u(-300,-255,0),Ue.wageBtnNodeDstPos=u(-290,-605,0),Ue.moreGameBtnNodeDstPos=u(-298,-400,0),Ue.playBtnNodeDstPos=u(0,370,0),Ue.btnBgDstPos=u(303.37,-550,0),Ue.viewDetailBtnNodeDstPos=u(298,-400,0),Ue.continueBtnNodeDstPos=u(290,600,0),oe=t((ie=Ue).prototype,"moneyLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(ie.prototype,"settingBtnNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(ie.prototype,"shareBtnNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(ie.prototype,"upgradeBtnNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(ie.prototype,"roleBtnNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(ie.prototype,"adGameBtnNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(ie.prototype,"moreGameBtnNode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(ie.prototype,"viewDetailBtnNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(ie.prototype,"dayProgressNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(ie.prototype,"playBtnNode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(ie.prototype,"refuseBtnNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(ie.prototype,"continueBtnNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(ie.prototype,"wageTimeLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=t(ie.prototype,"settingUI",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(ie.prototype,"upgradeUI",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(ie.prototype,"unlockRoleUI",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(ie.prototype,"offlineAwardUI",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(ie.prototype,"unlockGameUI",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t(ie.prototype,"bubbleSprite",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(ie.prototype,"talkLabel",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t(ie.prototype,"dayLabel",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=t(ie.prototype,"viewAdBtnNode",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(ie.prototype,"bubbleFrames",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Le=t(ie.prototype,"patientIcons",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ne=ie))||ne));a._RF.pop()}}}));

System.register("chunks:///_virtual/MaskTest.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,n,i,s,r,a,l,c,h,u,p,T,f,d,m,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,r=e.gfx,a=e._decorator,l=e.Prefab,c=e.Node,h=e.Camera,u=e.MeshRenderer,p=e.v3,T=e.systemEvent,f=e.SystemEvent,d=e.instantiate,m=e.v2,g=e.Component}],execute:function(){var y,v,b,P,S,E,w,C,O,N,M,_,z,L,R,k,H;s._RF.push({},"346319n2nhE4Ygc/PK2hu3h","MaskTest",void 0);var A=r.AttributeName,U=a.ccclass,D=a.property;e("MaskTest",(y=U("MaskTest"),v=D({type:l}),b=D({type:c}),P=D({type:h}),S=D({type:c}),E=D({type:u}),w=D({type:c}),C=D({type:c}),y((M=t((N=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,n(t,"maskBall",M,i(t)),n(t,"ballParent",_,i(t)),n(t,"cam",z,i(t)),n(t,"cubeNode",L,i(t)),n(t,"meshRenderer",R,i(t)),n(t,"sp",k,i(t)),n(t,"cp",H,i(t)),t.lastTouchPos=p(0,0,0),t.meshPos=[],t.triangleSet=[],t}o(t,e);var s=t.prototype;return s.onLoad=function(){this.addEvent()},s.start=function(){this.readMesh()},s.readMesh=function(){var e=this.meshRenderer.mesh.readAttribute(0,A.ATTR_POSITION);console.log("** pos="+e.length);for(var t=0;t<e.length;t+=3)this.meshPos.push(p(e[t],e[t+1],e[t+2]));for(var o=0;o<this.meshPos.length;o++)this.meshPos[o].transformMat4(this.meshRenderer.node.worldMatrix),this.cam.worldToScreen(this.meshPos[o],this.meshPos[o]),console.log("** i="+o+"  val="+JSON.stringify(this.meshPos[o]));var n=p(0,0,0);this.cam.worldToScreen(this.sp.worldPosition,n);var i=p(0,0,0);this.cam.worldToScreen(this.cp.worldPosition,i),console.log("** scr1="+JSON.stringify(n)),console.log("** scr2="+JSON.stringify(i)),console.log("** dis="+(i.y-n.y));var s=p(0,0,0);this.cam.worldToScreen(p(0,.025,2.5),s),console.log("** pp="+JSON.stringify(s)),console.log("*** meshPos count="+this.meshPos.length)},s.addEvent=function(){T.on(f.EventType.TOUCH_START,this.onTouchStart,this),T.on(f.EventType.TOUCH_MOVE,this.onTouchMove,this),T.on(f.EventType.TOUCH_END,this.onTouchEnd,this),T.on(f.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.removeEvent=function(){T.off(f.EventType.TOUCH_START,this.onTouchStart,this),T.off(f.EventType.TOUCH_MOVE,this.onTouchMove,this),T.off(f.EventType.TOUCH_END,this.onTouchEnd,this),T.off(f.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.onTouchStart=function(e){var t=e.getLocationX(),o=e.getLocationY(),n=p(0,0,0);this.cam.screenToWorld(p(t,o,0),n),this.lastTouchPos.set(n),this.lastTouchPos.z=2.5},s.onTouchMove=function(e){var t=e.getDelta(),o=e.getLocationX(),n=e.getLocationY(),i=p(0,0,0);this.cam.screenToWorld(p(o,n,0),i),i.z=2.5;var s=p(0,0,0);s.set(i),i.subtract(this.lastTouchPos),i.multiplyScalar(3);var r=this.cubeNode.getPosition();r.add(i),this.cubeNode.setPosition(r);var a=p(0,0,0);if(this.cam.worldToScreen(this.cubeNode.worldPosition,a),this.lastTouchPos.set(s),t.lengthSqr()>30){var l=d(this.maskBall);this.ballParent.addChild(l),l.setPosition(r);var c=p(0,0,0);this.cam.worldToScreen(l.worldPosition,c);for(var h=0;h<this.meshPos.length;h++){m(this.meshPos[h].x-c.x,this.meshPos[h].y-c.y).length()<=100&&(this.triangleSet[h]=this.meshPos[h])}console.log("** SetLen="+Object.keys(this.triangleSet).length)}},s.onTouchEnd=function(e){},s.onTouchCancel=function(e){},t}(g)).prototype,"maskBall",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(N.prototype,"ballParent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(N.prototype,"cam",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(N.prototype,"cubeNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(N.prototype,"meshRenderer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(N.prototype,"sp",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(N.prototype,"cp",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=N))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var n,e,t,i,r,o;return{setters:[function(a){n=a.cclegacy,e=a.director,t=a.Director,i=a.Canvas,r=a.Camera,o=a.game}],execute:function(){n._RF.push({},"b2c44hiC+ZIqJALlMj9yKi6","migrate-canvas",void 0);var a=1048575;function c(n,e){for(var t=0,i=n.children.length;t<i;t++)n.children[t].layer=e,c(n.children[t],e)}e.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var n,t,l,s=null==(n=e.getScene())?void 0:n.children,m=null==(t=e.getScene())?void 0:t.getComponentsInChildren(i);if(!(m.length<=1)){m=m.filter((function(n){return!!n.cameraComponent}));var u=null==(l=e.getScene())?void 0:l.getComponentsInChildren(r),v=0;u.forEach((function(n){return v|=n.visibility&a}));for(var p=[],f=0,C=s.length;f<C;f++){var h=s[f];if(o.isPersistRootNode(h)){var d=h.getComponentsInChildren(i);0!==d.length&&p.push.apply(p,d.filter((function(n){return!!n.cameraComponent})))}}p.forEach((function(n){if(m.find((function(e){return e!==n&&e.cameraComponent.visibility&n.cameraComponent.visibility&a}))){var e=~v,t=e&~(e-1);n.cameraComponent.visibility=t|4293918720&n.cameraComponent.visibility,c(n.node,t),v|=e}}))}}));var l=cc.Node.prototype.setParent;function s(n){var e=null,t=n.getComponent(i);return t&&t.cameraComponent?e=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(n.parent&&(e=s(n.parent)),e)}cc.Node.prototype.setParent=function(n,e){if(l.call(this,n,e),n){var t=s(this);t&&(this.layer=t,c(this,t))}},n._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyAnim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Util.ts"],(function(t){"use strict";var e,n,o,i,a,r,c,l,s,u,d,h,p,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,c=t.Prefab,l=t.Node,s=t.instantiate,u=t.v3,d=t.Vec3,h=t.tween,p=t.UITransform,f=t.Component},function(t){y=t.default}],execute:function(){var m,v,N,b,g,S,P,A,R;a._RF.push({},"04e9bxnZd9F3oAk6Se1B0PY","MoneyAnim",void 0);var w=r.ccclass,D=r.property;t("MoneyAnim",(m=w("MoneyAnim"),v=D({type:c}),N=D({type:l}),b=D({type:l}),m((P=e((S=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"coinPrefab",P,i(e)),o(e,"dstNode",A,i(e)),o(e,"attachNode",R,i(e)),e.dstLastScaleTime=0,e}n(e,t);var a=e.prototype;return a.start=function(){},a.play=function(t){var e=this;void 0===t&&(t=null);for(var n=0;n<25;n++){var o=s(this.coinPrefab);this.attachNode.addChild(o),o.setPosition(0,0,0)}for(var i=u(0,1,0),a=[],r=0;r<this.attachNode.children.length;r++){var c=u(0,0,0),l=y.randRangeNumber(0,359);l=l*Math.PI/180,d.rotateZ(c,i,d.ZERO,l);var f=y.randRangeNumber(60,65);c.multiplyScalar(f),this.attachNode.children[r].setScale(.3,.3,.3),h(this.attachNode.children[r]).to(.4,{scale:d.ONE,position:c}).call((function(){})).start(),a.push(this.attachNode.children[r])}for(var m=this.dstNode.getComponent(p).convertToWorldSpaceAR(d.ZERO),v=this.node.getComponent(p).convertToNodeSpaceAR(m),N=function(n){e.scheduleOnce((function(){null!==t&&t(),h(a[n]).to(.3,{position:v}).call((function(){a[n].removeFromParent(!0),a[n].destroy(),e.trigDstNodeScale()})).start()}),.4+.015*n)},b=0;b<a.length;b++)N(b)},a.trigDstNodeScale=function(){Date.now()-this.dstLastScaleTime<110||(this.dstLastScaleTime=Date.now(),h(this.dstNode).to(.05,{scale:u(1.5,1.5,1.5)}).to(.05,{scale:d.ONE}).call((function(){})).start())},e}(f)).prototype,"coinPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(S.prototype,"dstNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(S.prototype,"attachNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=S))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/NodePool.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"b6aa61PSeZEAp7o853gk9t/","NodePool",void 0);t("default",function(){function t(){this.nodeArray=[]}var n=t.prototype;return n.clear=function(){this.nodeArray.splice(0,this.nodeArray.length)},n.put=function(t){this.nodeArray.push(t)},n.get=function(){return this.nodeArray.length>0?this.nodeArray.shift():(console.error("** NodePool 没有元素可取"),null)},n.pop=function(){return this.get()},n.access=function(t){return void 0===t&&(t=0),t>=0&&t<this.nodeArray.length?this.nodeArray[t]:null},n.size=function(){return this.nodeArray.length},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/NodePoolMap.ts",["cc"],(function(o){"use strict";var e,n,l,a;return{setters:[function(o){e=o.cclegacy,n=o.Node,l=o.instantiate,a=o.Pool}],execute:function(){e._RF.push({},"ee182lY135Ewaox+1iDI6bx","NodePoolMap",void 0);var t=function(o,e){this.nodePrefab=null,this.nodePool=null,this.nodePrefab=o,this.nodePool=new a(null,e)};o("default",function(){function o(){}return o.createPool=function(e,a,r){if(void 0===r&&(r=0),a&&!(e.trim().length<=0||e in o.poolMap)){var i=null;i=a instanceof n?a:l(a);var p=new t(i,r);if(o.poolMap[e]=p,r>0&&a)for(var u=0;u<r;u++){var c=l(i);p.nodePool.free(c)}}},o.get=function(e){if(e in o.poolMap){var n=o.poolMap[e].nodePool.alloc();return n||(console.warn("对象池新建了对象 poolName="+e),o.create(e),o.poolMap[e].nodePool.alloc())}return null},o.create=function(e,n){if(void 0===n&&(n=1),e in o.poolMap)for(var a=0;a<n;a++){var t=l(o.poolMap[e].nodePrefab);o.poolMap[e].nodePool.free(t)}},o.put=function(e,n){n&&e in o.poolMap&&o.poolMap[e].nodePool.free(n)},o}()).poolMap={},e._RF.pop()}}}));

System.register("chunks:///_virtual/OfflineAwardUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMain.ts","./MoneyAnim.ts","./AudioManager.ts","./Platform.ts"],(function(e){"use strict";var n,t,a,i,r,o,l,c,s,d,m,u,w,h,p,A,f,b,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.Label,c=e.Node,s=e.tween,d=e.Vec3,m=e.v3,u=e.Component},function(e){w=e.GameMain},function(e){h=e.MoneyAnim},function(e){p=e.AudioManager,A=e.AudioClipID},function(e){f=e.default,b=e.PlatformType,g=e.AdSceneId}],execute:function(){var y,v,N,L,O,P,D,M,I,B,T,C,U,z,G,H,V;r._RF.push({},"f19766ftqlOmY/kUFgrDBZi","OfflineAwardUI",void 0);var S=o.ccclass,k=o.property;e("OfflineAwardUI",(y=S("OfflineAwardUI"),v=k({type:l}),N=k({type:l}),L=k({type:c}),O=k({type:c}),P=k({type:c}),D=k({type:h}),M=k({type:h}),y((T=n((B=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return n=e.call.apply(e,[this].concat(r))||this,a(n,"moreAwardLabel",T,i(n)),a(n,"normalAwardLabel",C,i(n)),a(n,"wndNode",U,i(n)),a(n,"tipNode",z,i(n)),a(n,"confirmBtnNode",G,i(n)),a(n,"moreMoneyAnim",H,i(n)),a(n,"normalMoneyAnim",V,i(n)),n.normalAward=0,n.awardPerMin=500/1440,n.maxAward=500,n.moreAwardTimes=10,n.canGet=!1,n}t(n,e);var r=n.prototype;return r.start=function(){},r.calcAward=function(){var e=Date.now()-w.instance.awardData.offlineAwardLastDate;return e<1e3*(w.wageCountDownTotalTime-1)?(this.normalAward=0,0):(this.normalAward=e>=432e5?500:100,this.normalAward)},r.show=function(){this.calcAward(),this.node.active=!0,this.canGet=!0,this.moreAwardLabel.string=""+this.normalAward*this.moreAwardTimes,this.normalAwardLabel.string=""+this.normalAward,this.normalAward>0?(this.moreAwardLabel.node.parent.active=!0,this.normalAwardLabel.node.parent.active=!0,this.tipNode.active=!1,this.confirmBtnNode.active=!1):(this.moreAwardLabel.node.parent.active=!1,this.normalAwardLabel.node.parent.active=!1,this.tipNode.active=!0,this.confirmBtnNode.active=!0),f.currentPlatform===b.OPPO&&(w.instance.oppoNativeAd.isShowed()?w.instance.mainUI.showViewAdBtn(!0,320*f.winHeight/1334-320+300):w.instance.mainUI.showViewAdBtn(!1),w.instance.oppoNativeAd.changeBtnHeight(320*f.winHeight/1334)),this.wndNode.setScale(.4,.4,.4),s(this.wndNode).to(.3,{scale:d.ONE},{easing:"backOut"}).start()},r.pop=function(){this.calcAward(),this.normalAward<=0||(this.node.active=!0,this.canGet=!0,this.moreAwardLabel.string=""+this.normalAward*this.moreAwardTimes,this.normalAwardLabel.string=""+this.normalAward,this.normalAward>0?(this.moreAwardLabel.node.parent.active=!0,this.normalAwardLabel.node.parent.active=!0,this.tipNode.active=!1,this.confirmBtnNode.active=!1):(this.moreAwardLabel.node.parent.active=!1,this.normalAwardLabel.node.parent.active=!1,this.tipNode.active=!0,this.confirmBtnNode.active=!0),f.currentPlatform===b.OPPO&&(w.instance.oppoNativeAd.isShowed()?w.instance.mainUI.showViewAdBtn(!0,320*f.winHeight/1334-320+300):w.instance.mainUI.showViewAdBtn(!1),w.instance.oppoNativeAd.changeBtnHeight(320*f.winHeight/1334)),this.wndNode.setScale(.4,.4,.4),s(this.wndNode).to(.3,{scale:d.ONE},{easing:"backOut"}).start())},r.close=function(){f.currentPlatform===b.OPPO&&(w.instance.mainUI.showViewAdBtn(!1),w.instance.oppoNativeAd.changeBtnHeight(200)),this.node.active=!1},r.onMoreAwardClicked=function(){var e=this;!1!==this.canGet&&(f.currentPlatform!==b.TT&&f.currentPlatform!==b.OPPO&&f.currentPlatform!==b.VIVO&&f.currentPlatform!==b.WECHAT||(f.adSceneId=g.Wage,f.adTip=w.instance.mainUI.adTip,f.playVideoAd((function(){e.canGet=!1,e.moreMoneyAnim.play((function(){p.playClip(A.Coin)})),f.reportWage(1,e.normalAward*e.moreAwardTimes),w.instance.gameData.addMoney(e.normalAward*e.moreAwardTimes),e.scheduleOnce((function(){w.instance.mainUI.updateMoneyDisplay()}),.55),e.scheduleOnce((function(){s(e.wndNode).to(.15,{scale:m(.4,.4,.4)}).call((function(){e.close()})).start()}),1.5),e.moreAwardLabel.string="0",e.normalAwardLabel.string="0",w.instance.resetWageCountDown(),w.instance.awardData.updateOfflineAwardLastDate()}))))},r.onNormalAwardClicked=function(){var e=this;!1!==this.canGet&&(this.canGet=!1,this.moreMoneyAnim.play((function(){p.playClip(A.Coin)})),f.reportWage(0,this.normalAward),w.instance.gameData.addMoney(this.normalAward),this.scheduleOnce((function(){w.instance.mainUI.updateMoneyDisplay()}),.55),this.scheduleOnce((function(){s(e.wndNode).to(.15,{scale:m(.3,.3,.3)}).call((function(){e.close()})).start()}),1.5),this.moreAwardLabel.string="0",this.normalAwardLabel.string="0",w.instance.resetWageCountDown(),w.instance.awardData.updateOfflineAwardLastDate())},r.onClose=function(){var e=this;s(this.wndNode).to(.15,{scale:m(.4,.4,.4)}).call((function(){e.close()})).start()},n}(u)).prototype,"moreAwardLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(B.prototype,"normalAwardLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(B.prototype,"wndNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(B.prototype,"tipNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(B.prototype,"confirmBtnNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(B.prototype,"moreMoneyAnim",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(B.prototype,"normalMoneyAnim",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=B))||I));r._RF.pop()}}}));

System.register("chunks:///_virtual/OppoNativeAd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Platform.ts","./Util.ts","./GameMain.ts"],(function(t){"use strict";var e,i,o,a,n,r,s,h,d,p,g,l,u,I,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,s=t.CCInteger,h=t.CCBoolean,d=t.Sprite,p=t.UITransform,g=t.Component},function(t){l=t.default,u=t.PlatformType},function(t){I=t.default},function(t){c=t.GameMain}],execute:function(){var m,T,v,N,f,U,w;n._RF.push({},"00eeflpe2tMAYOYOjKy2/WB","OppoNativeAd",void 0);var S=r.ccclass,x=r.property;t("OppoNativeAd",(m=S("OppoNativeAd"),T=x({type:s}),v=x({type:h}),m((U=e((f=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,o(e,"targetHeight",U,a(e)),o(e,"isMain",w,a(e)),e.adImgSprite=null,e.adImgUITrans=null,e.btnNode=null,e.btnUITrans=null,e.logoSprite=null,e.logoSpriteUITrans=null,e.timeTick=0,e.adId=1,e.adScale=1,e.viewAdBtnNode=null,e}i(e,t);var n=e.prototype;return n.onLoad=function(){l.currentPlatform===u.OPPO?(this.adImgSprite=this.node.getChildByName("adImg").getComponent(d),this.adImgUITrans=this.adImgSprite.node.getComponent(p),this.btnNode=this.adImgSprite.node.getChildByName("btn"),this.btnUITrans=this.btnNode.getComponent(p),this.viewAdBtnNode=this.node.getChildByName("btnViewAd"),this.logoSprite=this.adImgSprite.node.getChildByName("topLeft").getChildByName("logo").getComponent(d),this.logoSpriteUITrans=this.logoSprite.node.getComponent(p),this.adScale=this.targetHeight/320,this.node.getComponent(p).height=this.targetHeight):this.node.active=!1},n.start=function(){this.timeTick=0},n.changeBtnHeight=function(t){this.btnUITrans.height=t},n.show=function(){(1!==this.adId||l.oppoNative1Loaded)&&(2!==this.adId||l.oppoNative2Loaded)&&(this.adImgSprite.node.active=!0,null!==this.viewAdBtnNode&&(this.viewAdBtnNode.active=!0),this.updateAdImg(),this.updateLogo(),this.isMain&&(c.instance.mainUI.showViewDetailBtn(!0),this.adImgUITrans.width=640,this.adImgUITrans.height=200,this.btnUITrans.height=200))},n.updateAdImg=function(){if(2===this.adId?null!==l.oppoNative2ImgTexture&&(this.adImgSprite.spriteFrame.texture=l.oppoNative2ImgTexture._texture,this.adImgUITrans.width=l.oppoNative2ImgTexture.width,this.adImgUITrans.height=l.oppoNative2ImgTexture.height):null!==l.oppoNative1ImgTexture&&(this.adImgSprite.spriteFrame.texture=l.oppoNative1ImgTexture._texture,this.adImgUITrans.width=l.oppoNative1ImgTexture.width,this.adImgUITrans.height=l.oppoNative1ImgTexture.height),this.isMain)this.adImgUITrans.width=640,this.adImgUITrans.height=200;else if(this.adImgUITrans.height>320){var t=320/this.adImgUITrans.height;this.adImgUITrans.height=320,this.adImgUITrans.width=this.adImgUITrans.width*t}},n.updateLogo=function(){2===this.adId?null!==l.oppoNative2LogoUrlTexture&&(this.logoSprite.spriteFrame.texture=l.oppoNative2LogoUrlTexture._texture,this.logoSpriteUITrans.width=l.oppoNative2LogoUrlTexture.width,this.logoSpriteUITrans.height=l.oppoNative2LogoUrlTexture.height*this.adScale):null!==l.oppoNative1LogoUrlTexture&&(this.logoSprite.spriteFrame.texture=l.oppoNative1LogoUrlTexture._texture,this.logoSpriteUITrans.width=l.oppoNative1LogoUrlTexture.width,this.logoSpriteUITrans.height=l.oppoNative1LogoUrlTexture.height*this.adScale)},n.isShowed=function(){return this.adImgSprite.node.active},n.hide=function(){this.adImgSprite.node.active=!1,null!==this.viewAdBtnNode&&(this.viewAdBtnNode.active=!1),this.isMain&&c.instance.mainUI.showViewDetailBtn(!1)},n.onClick=function(){!1!==this.adImgSprite.node.active&&(2===this.adId?l.reportOppoNative2Click():l.reportOppoNative1Click())},n.onCloseClick=function(){var t=this;this.hide();var e=20.5-this.timeTick;e>=2&&l.createBannerAd(),I.randRangeNumber(0,100)<l.oppoClickReportRate&&this.onClick(),this.scheduleOnce((function(){l.destroyBannerAd(),t.show()}),e)},n.update=function(t){l.currentPlatform===u.OPPO&&(this.timeTick+=t,this.timeTick>=20&&(this.timeTick=0,2===this.adId?l.reloadOppoNative2Ad(this):l.reloadOppoNative1Ad(this)))},e}(g)).prototype,"targetHeight",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 320}}),w=e(f.prototype,"isMain",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=f))||N));n._RF.pop()}}}));

System.register("chunks:///_virtual/Patient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PatientData.ts","./Util.ts","./GameMain.ts","./RoleSkinData.ts"],(function(t){"use strict";var e,i,a,n,r,s,l,h,o,u,g,c,d,f,p,P,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,l=t.SkinnedMeshRenderer,h=t.Node,o=t.SkeletalAnimation,u=t.v3,g=t.instantiate,c=t.Vec3,d=t.Component},function(t){f=t.PatientFigurePart},function(t){p=t.default},function(t){P=t.GameMain},function(t){k=t.RoleId}],execute:function(){var m,S,y,T,w,N,R,v,L;t("PatientType",void 0),r._RF.push({},"08993BE3KNB5Lv2489YSpFf","Patient",void 0);var b,C=s.ccclass,F=s.property;!function(t){t[t.XRay=0]="XRay",t[t.UpSize=1]="UpSize",t[t.Figure=2]="Figure",t[t.Face=3]="Face",t[t.Symptom=4]="Symptom",t[t.Tooth=5]="Tooth",t[t.Len=6]="Len",t[t.Correct=7]="Correct",t[t.Emotion=8]="Emotion",t[t.Make=9]="Make"}(b||(b=t("PatientType",{})));t("PatientNames",["X 光","我要变高","身 型","面 部","扫 描","牙 科","骨 科","情绪改善","配 药"]),t("PatientTalk",["不看看我的内部构造吗?","我不要痘痘, 我要颜值!","护士小姐姐,我要长高高!","还我一双麒麟臂吧!","我的头和别人不一样","大长腿也好恼人呀!","啤酒肚能缩回去吗?"]),t("Patient",(m=C("Patient"),S=F({type:l}),y=F({type:h}),T=F({type:o}),m((R=e((N=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,a(e,"meshRenderer",R,n(e)),a(e,"headNode",v,n(e)),a(e,"anim",L,n(e)),e.trunk0=null,e.trunk1=null,e.leftHand=null,e.rightHand=null,e.leftLeg=null,e.rightLeg=null,e.patientType=b.XRay,e.meshId=0,e.expressionId=0,e.talkId=-1,e.figurePart=f.Body,e.figurePartOriginScale=1,e.figurePartScale=1,e.heightScale=1,e.walkSpeed=2.5,e.isWalking=!1,e.walkTargetPos=u(0,0,0),e.walkAnim="walk1",e.movDir=u(0,0,0),e.disToTarget=u(0,0,0),e.walkNewPos=u(0,0,0),e.walkOnTargetCallback=null,e}i(e,t);var r=e.prototype;return r.onLoad=function(){null===this.anim&&(this.anim=this.node.getComponent(o)),this.trunk0=this.headNode.parent.parent,this.trunk1=this.trunk0.getChildByName("trunk_1"),this.leftHand=this.trunk1.getChildByName("arm_L_0"),this.rightHand=this.trunk1.getChildByName("arm_R_0"),this.leftLeg=this.trunk0.getChildByName("leg_L_0"),this.rightLeg=this.trunk0.getChildByName("leg_R_0")},r.start=function(){},r.init=function(t,e,i,a){this.patientType=t,this.meshRenderer.mesh=e,this.meshRenderer.material=P.instance.getRoleMat(this.meshId),this.meshRenderer.skeleton=i,this.setExpression(a),null===this.anim&&(this.anim=this.node.getComponent(o)),this.anim.play("idle1"),this.isWalking=!1,this.walkAnim="walk1",this.patientType===b.Figure?this.initFigureRand():this.patientType===b.UpSize&&this.setScale(.75)},r.setExpression=function(t){this.headNode.destroyAllChildren(),this.headNode.removeAllChildren(),this.isNeedExpression()&&this.headNode.addChild(g(t))},r.showExpression=function(t){this.headNode.children[0].active=t},r.shouldShowTalk=function(){return this.talkId>=0},r.setPosition=function(t){this.node.setPosition(t)},r.setRotation=function(t){this.node.setRotation(t)},r.setScale=function(t){this.node.setScale(t,t,t)},r.isRoleUnlocked=function(){return P.instance.roleSkinData.isUnlocked(this.meshId)},r.isGameUnlocked=function(){return this.patientType===b.Face?P.instance.gameData.isFaceGameUnlocked():this.patientType===b.Tooth?P.instance.gameData.isToothGameUnlocked():this.patientType!==b.Correct||P.instance.gameData.isBoneGameUnlocked()},r.isNeedExpression=function(){return this.meshId!==k.Iron},e.needExpression=function(t){return t!==k.Iron},r.initFigureRand=function(){if(this.figurePart=p.randRangeNumber(0,f.Len-1),this.figurePart===f.Body)this.figurePartOriginScale=2,this.figurePartScale=this.figurePartOriginScale,this.walkAnim="walk2",this.talkId=6;else if(this.figurePart===f.Hand){var t=p.randRangeNumber(0,100);this.figurePartOriginScale=t>50?.6:.5,this.figurePartScale=this.figurePartOriginScale,this.talkId=3}else if(this.figurePart===f.Head){var e=p.randRangeNumber(0,100);this.figurePartOriginScale=e>50?.6:1.6,this.figurePartScale=this.figurePartOriginScale,this.talkId=4}else this.figurePart===f.Leg&&(this.figurePartOriginScale=.1*p.randRangeNumber(15,16),this.figurePartScale=this.figurePartOriginScale,this.talkId=5)},r.update=function(t){if(this.isWalking){if(c.subtract(this.disToTarget,this.walkTargetPos,this.node.getPosition()),this.disToTarget.length()<=t*this.walkSpeed)return this.node.setPosition(this.walkTargetPos),this.isWalking=!1,this.anim.play("idle1"),void(null!==this.walkOnTargetCallback&&this.walkOnTargetCallback());c.normalize(this.movDir,this.disToTarget),c.add(this.walkNewPos,this.node.getPosition(),this.movDir.multiplyScalar(t*this.walkSpeed)),this.node.setPosition(this.walkNewPos)}},r.lateUpdate=function(t){if(this.patientType===b.Figure)if(this.figurePart===f.Body){this.trunk0.setScale(this.figurePartScale,this.figurePartScale,this.figurePartScale);var e=1/this.figurePartScale;this.trunk1.setScale(e,e,e),this.leftLeg.setScale(-e,-e,-e),this.rightLeg.setScale(e,e,e)}else if(this.figurePart===f.Head)this.headNode.setScale(this.figurePartScale,this.figurePartScale,this.figurePartScale);else if(this.figurePart===f.Hand)this.leftHand.setScale(-this.figurePartScale,-this.figurePartScale,-this.figurePartScale),this.rightHand.setScale(this.figurePartScale,this.figurePartScale,this.figurePartScale);else if(this.figurePart===f.Leg){this.leftLeg.setScale(-this.figurePartScale,-1,-1),this.rightLeg.setScale(this.figurePartScale,1,1);var i=this.node.position.y;i=.6*(this.figurePartScale-1),this.node.setPosition(this.node.position.x,i,this.node.position.z)}},r.walkTo=function(t,e){void 0===e&&(e=null),this.walkTargetPos=t,this.patientType===b.Figure&&this.figurePart===f.Leg?this.walkTargetPos.y=.6*(this.figurePartScale-1):this.walkTargetPos.y=0,this.isWalking=!0,this.anim.play(this.walkAnim),this.walkOnTargetCallback=e},r.setFigureScale=function(t){this.figurePartScale=t},e}(d)).prototype,"meshRenderer",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(N.prototype,"headNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(N.prototype,"anim",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=N))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/PatientData.ts",["cc","./Patient.ts","./Util.ts","./RoleSkinData.ts","./GameMain.ts"],(function(e){"use strict";var n,t,a,i,r;return{setters:[function(e){n=e.cclegacy},function(e){t=e.PatientType},function(e){a=e.default},function(e){i=e.RoleId},function(e){r=e.GameMain}],execute:function(){var s;e("PatientFigurePart",void 0),n._RF.push({},"12dc4jiY2FFib4OMPeAqYHM","PatientData",void 0),function(e){e[e.Body=0]="Body",e[e.Hand=1]="Hand",e[e.Head=2]="Head",e[e.Leg=3]="Leg",e[e.Len=4]="Len"}(s||(s=e("PatientFigurePart",{}))),e("PatientData",function(){function e(){this.patientType=t.XRay,this.meshId=0,this.expressionId=0,this.talkId=-1,this.figurePart=s.Body,this.figurePartScale=1}return e.createDay1PatientData=function(){var n=[],r=new e;return r.patientType=t.Figure,r.meshId=0,r.expressionId=a.randRangeNumber(0,e.expressionNum-1),n.push(r),(r=new e).patientType=t.XRay,r.meshId=1,r.talkId=2,r.expressionId=a.randRangeNumber(0,e.expressionNum-1),n.push(r),(r=new e).patientType=t.UpSize,r.meshId=0,r.talkId=0,r.expressionId=a.randRangeNumber(0,e.expressionNum-1),n.push(r),(r=new e).patientType=t.Face,r.meshId=i.Girl,r.talkId=1,r.expressionId=2,n.push(r),n},e.createDay2PatientData=function(){var n=[],r=new e;return r.patientType=t.Symptom,r.meshId=1,r.expressionId=a.randRangeNumber(0,e.expressionNum-1),n.push(r),(r=new e).patientType=t.XRay,r.meshId=i.Girl,r.expressionId=a.randRangeNumber(0,e.expressionNum-1),n.push(r),(r=new e).patientType=t.Figure,r.meshId=i.Granny,r.expressionId=a.randRangeNumber(0,e.expressionNum-1),n.push(r),(r=new e).patientType=t.Face,r.meshId=a.randRangeNumber(0,2),r.expressionId=2,n.push(r),n},e.createOneDayPatientData=function(){var n=[],i=[];i=r.instance.gameData.isToothGameUnlocked()?a.randExtract(t.Len,4):a.randExtract(t.Len-1,4);var s;s=r.instance.roleSkinData.getRandLockedId();for(var d=!1,p=0;p<4;p++){var o=new e;o.patientType=i[p]-1,!1!==d||-1===s||o.patientType!==t.XRay&&o.patientType!==t.Figure&&o.patientType!==t.Symptom&&o.patientType!==t.UpSize?o.meshId=e.getRoleIdForSubgame(o.patientType):(d=!0,o.meshId=s),o.patientType===t.Face?o.expressionId=2:o.expressionId=a.randRangeNumber(0,e.expressionNum-1),n.push(o)}return n},e.getRoleIdForSubgame=function(e){return e===t.XRay?r.instance.roleSkinData.getRandUnlockedId():e===t.UpSize||e===t.Figure?r.instance.roleSkinData.getRandUnlockedIdExclude([i.Granny]):e===t.Tooth?i.Granny:e===t.Symptom?r.instance.roleSkinData.getRandUnlockedIdExclude([i.Granny]):e===t.Face?r.instance.roleSkinData.getRandUnlockedIdExclude([i.Granny,i.Spider,i.Iron,i.Captain,i.Panda,i.Batman,i.Cattle]):void 0},e}()).expressionNum=2,n._RF.pop()}}}));

System.register("chunks:///_virtual/Platform.ts",["cc","./Util.ts","./TTRecorder.ts","./GameMain.ts"],(function(o){"use strict";var e,t,n,r,a;return{setters:[function(o){e=o.cclegacy,t=o.sys},function(o){n=o.default},function(o){r=o.default},function(o){a=o.GameMain}],execute:function(){var d,l;o({AdSceneId:void 0,PlatformType:void 0}),e._RF.push({},"4aeadlF8HtGlZecqFvR6RJY","Platform",void 0),function(o){o[o.Default=0]="Default",o[o.TT=1]="TT",o[o.WECHAT=2]="WECHAT",o[o.VIVO=3]="VIVO",o[o.OPPO=4]="OPPO",o[o.IOS=5]="IOS",o[o.ANDROID=6]="ANDROID"}(d||(d=o("PlatformType",{}))),function(o){o[o.Unknown=0]="Unknown",o[o.MoreAward=1]="MoreAward",o[o.TryVIPRole=2]="TryVIPRole",o[o.RolePopUnlock=3]="RolePopUnlock",o[o.RoleUnlock=4]="RoleUnlock",o[o.DayAward=5]="DayAward",o[o.EquipmentBtn=6]="EquipmentBtn",o[o.FloorBtn=7]="FloorBtn",o[o.WallBtn=8]="WallBtn",o[o.HallBtn=9]="HallBtn",o[o.Wage=10]="Wage",o[o.UnlockGame=11]="UnlockGame"}(l||(l=o("AdSceneId",{})));var i=o("default",function(){function o(){}return o.decidePlatform=function(){o.currentPlatform=d.WECHAT,o.winWidth=cc.winSize.width,o.winHeight=cc.winSize.height,t.platform===t.Platform.WECHAT_GAME?(o.currentPlatform=d.WECHAT,wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onShareAppMessage((function(){var e=n.randRangeNumber(0,o.shareTitles.length-1);return{title:o.shareTitles[e],imageUrlId:o.wxImageId,imageUrl:o.wxImageUrl}})),wx.onShareTimeline((function(){return{title:"我要当医生 !",imageUrl:o.wxImageUrl}})),wx.onHide((function(o){})),wx.onShow((function(o){})),o.createVideoAd()):t.platform===t.Platform.BYTEDANCE_MINI_GAME?(o.currentPlatform=d.TT,tt.showShareMenu(),tt.onShareAppMessage((function(){var e=n.randRangeNumber(0,o.shareTitles.length-1);return{title:o.shareTitles[e],desc:o.shareDesc[e],imageUrl:o.shareImgUrl,success:function(){console.log("**转发成功")},fail:function(){console.log("转发失败")}}})),tt.onHide((function(o){a.instance.onHide()})),tt.onShow((function(o){a.instance.onShow()})),o.initTTRecorder(),o.createVideoAd()):t.platform===t.Platform.OPPO_MINI_GAME?(o.currentPlatform=d.OPPO,CC_DEBUG&&qg.setEnableDebug({enableDebug:!0,success:function(){console.log("**qg.setEnableDebug success")},complete:function(){},fail:function(){console.log("**qg.setEnableDebug success")}}),o.createVideoAd()):t.platform===t.Platform.VIVO_MINI_GAME?o.currentPlatform=d.VIVO:o.currentPlatform=d.Default},o.isDouyin=function(){return"Douyin"===tt.getSystemInfoSync().appName},o.isHuoShan=function(){return"live_stream"===tt.getSystemInfoSync().appName},o.initTTRecorder=function(){o.ttRecorder=new r},o.startRecord=function(){null!==o.ttRecorder&&o.ttRecorder.start()},o.stopRecord=function(){null!==o.ttRecorder&&o.ttRecorder.stop()},o.shareRecord=function(e){if(void 0===e&&(e=null),null!==o.ttRecorder){var t=n.randRangeNumber(0,o.shareTitles.length-1);o.ttRecorder.shareClipAdv(o.shareTitles[t],o.shareDesc[t],e)}},o.vibrateShort=function(){var e=Date.now();e-o.lastVibrateTime<=o.vibrateInterval||(o.lastVibrateTime=e,o.currentPlatform===d.TT?cc.sys.platform===cc.sys.BYTEDANCE_GAME&&tt.vibrateShort():o.currentPlatform===d.WECHAT?cc.sys.platform===cc.sys.WECHAT_GAME&&wx.vibrateShort():o.currentPlatform===d.OPPO?qg.vibrateShort({}):o.currentPlatform===d.VIVO&&qg.vibrateShort())},o.addShortcut=function(){o.currentPlatform===d.OPPO?qg.hasShortcutInstalled({success:function(o){0==o&&qg.installShortcut({success:function(){},fail:function(o){},complete:function(){}})},fail:function(o){},complete:function(){}}):o.currentPlatform===d.VIVO&&qg.hasShortcutInstalled({success:function(o){o?console.log("已创建"):(console.log("未创建"),qg.installShortcut({success:function(){console.log("创建成功")}}))}})},o.shareApp=function(){if(o.currentPlatform===d.TT){var e=n.randRangeNumber(0,o.shareTitles.length-1);tt.shareAppMessage({title:o.shareTitles[e],desc:o.shareDesc[e],imageUrl:o.shareImgUrl,success:function(){},fail:function(){}})}else if(o.currentPlatform===d.WECHAT){var t=n.randRangeNumber(0,o.shareTitles.length-1);wx.shareAppMessage({title:o.shareTitles[t],imageUrlId:o.wxImageId,imageUrl:o.wxImageUrl})}},o.login=function(){o.currentPlatform===d.TT&&tt.login({success:function(o){},fail:function(o){}})},o.createVideoAd=function(){o.currentPlatform===d.TT?(o.videoAd=tt.createRewardedVideoAd({adUnitId:o.ttVideoAdKey}),null!==o.videoAd&&void 0!==this.videoAd&&(o.videoAd.onClose((function(e){e.isEnded?(console.log("**广告看完奖励"),null!==o.ttVideoAdCallback&&o.ttVideoAdCallback()):(console.log("广告没看完"),null!==o.ttVideoAdCloseCallback&&o.ttVideoAdCloseCallback())})),o.videoAd.onError((function(e){console.log("VideoAd Error code="+e.errCode+" errMsg="+e.errMsg),null!==o.ttVideoAdErrorCallback&&o.ttVideoAdErrorCallback()})))):o.currentPlatform===d.WECHAT?(o.videoAd=wx.createRewardedVideoAd({adUnitId:o.wxVideoAdKey}),null!==o.videoAd&&void 0!==this.videoAd&&(o.videoAd.onClose((function(e){e.isEnded?(console.log("**广告看完奖励"),null!==o.ttVideoAdCallback&&o.ttVideoAdCallback()):(console.log("广告没看完"),null!==o.ttVideoAdCloseCallback&&o.ttVideoAdCloseCallback())})),o.videoAd.onError((function(e){console.log("VideoAd Error code="+e.errCode+" errMsg="+e.errMsg),null!==o.ttVideoAdErrorCallback&&o.ttVideoAdErrorCallback()})))):o.currentPlatform===d.OPPO?(o.videoAd=qg.createRewardedVideoAd({adUnitId:o.oppoVideoAdKey}),null!==o.videoAd&&void 0!==o.videoAd&&(o.videoAd.onClose((function(e){e.isEnded?(console.log("**广告看完奖励"),null!==o.ttVideoAdCallback&&o.ttVideoAdCallback()):(console.log("广告没看完"),null!==o.adTip?o.adTip.show():null!==o.ttVideoAdCloseCallback&&o.ttVideoAdCloseCallback())})),o.videoAd.onLoad((function(){o.videoAd.show()})),o.videoAd.onError((function(o){console.log("VideoAd Error code oppo="+o.errCode+" errMsg="+o.errMsg),qg.showToast({title:"暂时无视频广告,请稍后再试。",icon:"success",duration:2e3})})))):o.currentPlatform===d.VIVO&&(o.videoAd=qg.createRewardedVideoAd({posId:o.vivoVideoAdKey}),null!==o.videoAd&&void 0!==o.videoAd&&(o.videoAd.onClose((function(e){e.isEnded?(console.log("**广告看完奖励"),null!==o.ttVideoAdCallback&&o.ttVideoAdCallback()):(console.log("** VIVO广告没看完1"),null!==o.ttVideoAdCloseCallback&&o.ttVideoAdCloseCallback())})),o.videoAd.onError((function(o){console.log("VideoAd Error code oppo="+o.errCode+" errMsg="+o.errMsg)}))))},o.playVideoAd=function(e,t,n){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),o.currentPlatform===d.TT?(null!==o.videoAd&&void 0!==o.videoAd||(o.videoAd=tt.createRewardedVideoAd({adUnitId:o.ttVideoAdKey})),o.ttVideoAdCallback=e,o.ttVideoAdCloseCallback=t,o.ttVideoAdErrorCallback=n,o.videoAd.show().then((function(){console.log("广告显示成功")})).catch((function(e){console.log("广告组件出现问题",e),o.videoAd.load().then((function(){console.log("手动加载成功并播放"),o.videoAd.show()}))}))):o.currentPlatform===d.WECHAT?(null!==o.videoAd&&void 0!==o.videoAd||(o.videoAd=wx.createRewardedVideoAd({adUnitId:o.wxVideoAdKey})),o.ttVideoAdCallback=e,o.ttVideoAdCloseCallback=t,o.ttVideoAdErrorCallback=n,o.videoAd.show().then((function(){console.log("广告显示成功")})).catch((function(e){console.log("广告组件出现问题",e),o.videoAd.load().then((function(){console.log("手动加载成功并播放"),o.videoAd.show()}))}))):o.currentPlatform===d.OPPO?(null!==o.videoAd&&void 0!==o.videoAd||(o.videoAd=qg.createRewardedVideoAd({adUnitId:o.oppoVideoAdKey})),o.ttVideoAdCallback=e,o.ttVideoAdCloseCallback=t,o.ttVideoAdErrorCallback=n,o.videoAd.load()):o.currentPlatform===d.VIVO&&(o.ttVideoAdCallback=e,o.ttVideoAdCloseCallback=t,o.ttVideoAdErrorCallback=n,null===o.videoAd||void 0===o.videoAd?(o.videoAd=qg.createRewardedVideoAd({posId:o.vivoVideoAdKey}),o.videoAd.onLoad((function(e){o.videoAd.show()})),o.videoAd.onError((function(o){})),o.videoAd.onClose((function(e){e.isEnded?(console.log("**广告看完奖励"),null!==o.ttVideoAdCallback&&o.ttVideoAdCallback()):(console.log("*** vivo广告没看完2"),null!==o.adTip?o.adTip.show():null!==o.ttVideoAdCloseCallback&&o.ttVideoAdCloseCallback())}))):o.videoAd.load())},o.createInsertAd=function(){if(o.currentPlatform===d.TT){tt.getSystemInfoSync().appName;null!==o.insertAd&&(o.insertAd.destroy(),o.insertAd=null),o.insertAd=tt.createInterstitialAd({adUnitId:o.ttInsertAdKey}),o.insertAd.load().then((function(){o.insertAd.show()})).catch((function(o){console.log(o)}))}else o.currentPlatform===d.WECHAT?(null!==o.insertAd&&(o.insertAd.destroy(),o.insertAd=null),o.insertAd=wx.createInterstitialAd({adUnitId:o.wxInsertAdKey}),o.insertAd.load().then((function(){o.insertAd.show()})).catch((function(o){console.log(o)}))):o.currentPlatform===d.VIVO&&(o.insertAd=qg.createInterstitialAd({posId:o.vivoInsertAdKey}),o.insertAd.show())},o.destroyInsertAd=function(){o.currentPlatform!==d.TT&&o.currentPlatform!==d.WECHAT||null!==o.insertAd&&(o.insertAd.destroy(),o.insertAd=null)},o.createBannerAd=function(){if(o.currentPlatform===d.TT){if(o.isHuoShan())return;null!==o.bannerAd&&(o.bannerAd.destroy(),o.bannerAd=null);var e=tt.getSystemInfoSync();o.bannerAd=tt.createBannerAd({adUnitId:o.ttBannerAdKey,style:{width:200,top:e.windowHeight-112.5}}),o.bannerAd.style.left=.5*(e.windowWidth-200),o.bannerAd.show(),o.bannerAd.onResize((function(t){console.log("** BannerResize w="+t.width+" h="+t.height),o.bannerAd.style.top=e.windowHeight-t.height,o.bannerAd.style.left=(e.windowWidth-t.width)/2}))}else if(o.currentPlatform===d.WECHAT){null!==o.bannerAd&&(o.bannerAd.destroy(),o.bannerAd=null);var t=200,n=wx.getSystemInfoSync();o.bannerAd=wx.createBannerAd({adUnitId:o.wxBannerAdKey,style:{width:t,left:.5*(n.windowWidth-t),top:n.windowHeight-112.5}}),o.bannerAd.style.left=.5*(n.windowWidth-t),o.bannerAd.show(),o.bannerAd.onResize((function(e){console.log(e.width,e.height),o.bannerAd.style.top=n.windowHeight-e.height,o.bannerAd.style.left=(n.windowWidth-e.width)/2})),o.bannerAd.show()}else o.currentPlatform===d.OPPO?(null!==o.bannerAd&&(o.bannerAd.destroy(),o.bannerAd=null),console.log("** OPPO create Banner"),o.bannerAd=qg.createBannerAd({adUnitId:o.oppoBannerAdKey}),o.bannerAd.onLoad((function(){console.log("**** OPPO Banner onLoad")})),o.bannerAd.onError((function(o){console.log("**** OPPO Banner Error-205294-center="+o);var e=null;for(e in o)console.log("*** key="+e+" val="+o[e])})),o.bannerAd.show()):o.currentPlatform===d.VIVO&&(null!==o.bannerAd&&(o.bannerAd.destroy(),o.bannerAd=null),o.bannerAd=qg.createBannerAd({posId:o.vivoBannerAdKey}),o.bannerAd.onLoad((function(){console.log("**** vivo Banner onLoad")})),o.bannerAd.onError((function(o){})),o.bannerAd.show())},o.hideBannerAd=function(){o.currentPlatform===d.TT||o.currentPlatform===d.WECHAT||o.currentPlatform===d.OPPO?null!==o.bannerAd&&o.bannerAd.hide():o.currentPlatform===d.VIVO&&null!==o.bannerAd&&o.bannerAd.hide()},o.showBannerAd=function(){o.currentPlatform===d.TT&&null!==o.bannerAd&&o.bannerAd.show()},o.destroyBannerAd=function(){if(o.currentPlatform===d.TT){if(o.isHuoShan())return;null!==o.bannerAd&&(o.bannerAd.destroy(),o.bannerAd=null)}else o.currentPlatform===d.WECHAT||o.currentPlatform===d.OPPO?null!==o.bannerAd&&(o.bannerAd.destroy(),o.bannerAd=null):o.currentPlatform===d.VIVO&&null!==o.bannerAd&&(o.bannerAd.destroy(),o.bannerAd=null)},o.createOppoNativeBanner=function(){null!==o.oppoNativeBanner&&o.destroyOppoNativeBanner(),o.oppoNativeBanner=qg.createNativeAd({adUnitId:o.oppoNativeBannerKey}),o.oppoNativeBanner.onLoad((function(e){console.log("**** OPPO NativeBanner onLoad="+JSON.stringify(e)),o.oppoNativeBannerAdId=e.adList[0].adId,o.oppoNativeBannerLoaded=!0,o.oppoNativeBannerAdList=e.adList[0]})),o.oppoNativeBanner.onError((function(e){console.log("**** OPPO NativeBanner err="+JSON.stringify(e)),o.oppoNativeBannerLoaded=!1,o.oppoNativeBannerAdId="",o.oppoNativeBannerAdList=null})),o.oppoNativeBanner.load()},o.destroyOppoNativeBanner=function(){null!==o.oppoNativeBanner&&(o.oppoNativeBanner.destroy(),o.oppoNativeBanner=null,o.oppoNativeBannerLoaded=!1,o.oppoNativeBannerAdId="",o.oppoNativeBannerAdList=null)},o.reportOppoNativeBannerClick=function(){o.oppoNativeBannerLoaded&&""!==o.oppoNativeBannerAdId&&o.oppoNativeBanner.reportAdClick({adId:o.oppoNativeBannerAdId})},o.createOppoNative1Ad=function(){null!==o.oppoNative1Ad&&o.destroyOppoNative1Ad(),o.oppoNative1Ad=qg.createNativeAd({adUnitId:o.oppoNative1Key}),o.oppoNative1Ad.onLoad((function(e){console.log("**** OPPO Native1 onLoad="+JSON.stringify(e)),o.oppoNative1AdId=e.adList[0].adId,o.oppoNative1Loaded=!0,o.oppoNative1AdList=e.adList[0],n.randRangeNumber(0,100)<=o.oppoShowReportRate&&o.oppoNative1Ad.reportAdShow({adId:o.oppoNative1AdId}),cc.loader.load({url:o.oppoNative1AdList.imgUrlList[0],type:"png"},(function(e,t){e&&console.error("**err1="+e),o.oppoNative1ImgTexture=t,null!==o.oppoNative1Com&&o.oppoNative1Com.updateAdImg()})),cc.loader.load({url:o.oppoNative1AdList.logoUrl,type:"png"},(function(e,t){e&&console.error("**err2="+e),o.oppoNative1LogoUrlTexture=t,console.log("** LogoUrl w="+t.width+" h="+t.height),null!==o.oppoNative1Com&&o.oppoNative1Com.updateLogo()}))})),o.oppoNative1Ad.onError((function(e){console.log("**** OPPO Native1 err="+JSON.stringify(e)),o.oppoNative1AdId="",o.oppoNative1Loaded=!1,o.oppoNative1AdList=null})),o.oppoNative1Ad.load()},o.reloadOppoNative1Ad=function(e){o.oppoNative1Com=e,o.oppoNative1Ad.load()},o.destroyOppoNative1Ad=function(){null!==o.oppoNative1Ad&&(o.oppoNative1Ad.destroy(),o.oppoNative1Ad=null,o.oppoNative1Loaded=!1,o.oppoNative1AdId="",o.oppoNative1AdList=null)},o.reportOppoNative1Click=function(){o.oppoNative1Loaded&&""!==o.oppoNative1AdId&&o.oppoNative1Ad.reportAdClick({adId:o.oppoNative1AdId})},o.createOppoNative2Ad=function(){null!==o.oppoNative2Ad&&o.destroyOppoNative2Ad(),o.oppoNative2Ad=qg.createNativeAd({adUnitId:o.oppoNative2Key}),o.oppoNative2Ad.onLoad((function(e){console.log("**** OPPO Native2 onLoad="+JSON.stringify(e)),o.oppoNative2AdId=e.adList[0].adId,o.oppoNative2Loaded=!0,o.oppoNative2AdList=e.adList[0],n.randRangeNumber(0,100)<=o.oppoShowReportRate&&o.oppoNative2Ad.reportAdShow({adId:o.oppoNative2AdId}),cc.loader.load({url:o.oppoNative2AdList.imgUrlList[0],type:"png"},(function(e,t){e&&console.error("**err3="+e),o.oppoNative2ImgTexture=t,null!==o.oppoNative1Com&&o.oppoNative1Com.updateAdImg()})),cc.loader.load({url:o.oppoNative1AdList.logoUrl,type:"png"},(function(e,t){e&&console.error("**err4="+e),o.oppoNative2LogoUrlTexture=t,console.log("** LogoUrl w="+t.width+" h="+t.height),null!==o.oppoNative1Com&&o.oppoNative1Com.updateLogo()}))})),o.oppoNative2Ad.onError((function(e){console.log("**** OPPO Native2 err="+JSON.stringify(e)),o.oppoNative2AdId="",o.oppoNative2Loaded=!1,o.oppoNative2AdList=null})),o.oppoNative2Ad.load()},o.destroyOppoNative2Ad=function(){null!==o.oppoNative2Ad&&(o.oppoNative2Ad.destroy(),o.oppoNative2Ad=null,o.oppoNative2Loaded=!1,o.oppoNative2AdId="",o.oppoNative2AdList=null)},o.reloadOppoNative2Ad=function(e){o.oppoNative1Com=e,o.oppoNative2Ad.load()},o.reportOppoNative2Click=function(){o.oppoNative2Loaded&&""!==o.oppoNative2AdId&&o.oppoNative2Ad.reportAdClick({adId:o.oppoNative2AdId})},o.createGamePortalAd=function(){null!==o.oppoGamePortalAd&&(o.oppoGamePortalAd.destroy(),o.oppoGamePortalAd=null),qg.getSystemInfoSync().platformVersionCode>=1076?(o.oppoGamePortalAd=qg.createGamePortalAd({adUnitId:o.oppoGamePortalKey}),o.oppoGamePortalAd.onLoad((function(){console.log("** oppoGamePortal loaded"),o.oppoGamePortalLoaded=!0,o.oppoPortalAutoShow&&o.oppoGamePortalAd.show()})),o.oppoGamePortalAd.onClose((function(){o.oppoGamePortalLoaded=!1})),o.oppoGamePortalAd.onError((function(e){console.log("** oppoGamePortalAd Err="+JSON.stringify(e)),o.oppoPortalAutoShow&&qg.showToast({title:"暂时无广告,请稍后再试。",icon:"success",duration:2e3})}))):console.log("快应用平台版本号低于1076，暂不支持互推盒子相关 API")},o.showGamePortalAd=function(){null!==o.oppoGamePortalAd&&(o.oppoGamePortalLoaded?o.oppoGamePortalAd.show().then((function(){console.log("showGamePortalAd success")})).catch((function(o){console.log("showGamePortalAd fail with:"+o.errCode+","+o.errMsg)})):(o.oppoPortalAutoShow=!0,o.oppoGamePortalAd.load()))},o.reportLevelPass=function(e){o.currentPlatform===d.TT&&tt.reportAnalytics("level",{levelId:e})},o.reportTryRole=function(e){o.currentPlatform===d.TT&&tt.reportAnalytics("tryRole",{roleId:e})},o.reportRolePopUnlock=function(e){o.currentPlatform===d.TT&&tt.reportAnalytics("rolePopUnlock",{roleId:e})},o.reportRoleUnlock=function(e){o.currentPlatform===d.TT&&tt.reportAnalytics("roleUnlock",{roleId:e})},o.reportShareClip=function(){o.currentPlatform===d.TT&&tt.reportAnalytics("shareClip",{})},o.reportMoreAward=function(){o.currentPlatform===d.TT&&tt.reportAnalytics("moreAward",{})},o.reportDayAward=function(){o.currentPlatform===d.TT&&tt.reportAnalytics("dayAward",{})},o.reportRoomUpgrade=function(e,t,n,r){o.currentPlatform===d.TT&&tt.reportAnalytics("roomUpgrade",{roomId:e,equipmentLevel:t,floorLevel:n,wallLevel:r})},o.reportHallUpgrade=function(e){o.currentPlatform===d.TT&&tt.reportAnalytics("hallUpgrade",{hallLevel:e})},o.reportNextDay=function(e){o.currentPlatform===d.TT&&tt.reportAnalytics("nextDay",{day:e})},o.reportWage=function(e,t){o.currentPlatform===d.TT&&tt.reportAnalytics("offlineAward",{award:t,typeId:e})},o.reportUpgradeClick=function(){o.currentPlatform===d.TT&&tt.reportAnalytics("upgradeClick",{})},o}());i.currentPlatform=d.Default,i.shareTitles=["医院模拟器","医院模拟器"],i.shareDesc=["我要当医生！","我要当医生！"],i.shareImgUrl="",i.ttRecorder=null,i.ttVideoAdKey="4aw35b4teq11s2ku2a",i.ttBannerAdKey="di6j2j9ifi66ad2i0i",i.ttInsertAdKey="aq4abb1sqsqagj2h83",i.wxVideoAdKey="adunit-0da042ee90c9cc74",i.wxBannerAdKey="adunit-6512b516eca63258",i.wxInsertAdKey="adunit-ce05ac6ad46782f7",i.oppoBannerAdKey="282383",i.oppoVideoAdKey="282393",i.oppoNativeBannerKey="282392",i.oppoGamePortalKey="282391",i.oppoNative1Key="282387",i.oppoNative2Key="282389",i.vivoBannerAdKey="70b83fd16bcf432fbccf72929c275b46",i.vivoVideoAdKey="13fccc6c3e2b4e2696768f83774a0b8d",i.vivoInsertAdKey="26f8763f669741968df8d1c6825f83d6",i.ttVideoAdCallback=null,i.ttVideoAdCloseCallback=null,i.ttVideoAdErrorCallback=null,i.videoAd=null,i.bannerAd=null,i.insertAd=null,i.oppoNativeBanner=null,i.oppoGamePortalAd=null,i.oppoPortalAutoShow=!1,i.oppoNative1Ad=null,i.oppoNative2Ad=null,i.oppoNative1Com=null,i.oppoNativeBannerAdId="",i.oppoNative1AdId="",i.oppoNative2AdId="",i.oppoNativeBannerAdList=null,i.oppoNative1AdList=null,i.oppoNative2AdList=null,i.oppoNative1ImgTexture=null,i.oppoNative2ImgTexture=null,i.oppoNative1IconUrlTexture=null,i.oppoNative1IconTexture=null,i.oppoNative1LogoUrlTexture=null,i.oppoNative2IconUrlTexture=null,i.oppoNative2IconTexture=null,i.oppoNative2LogoUrlTexture=null,i.oppoGamePortalLoaded=!1,i.oppoNativeBannerLoaded=!1,i.oppoNative1Loaded=!1,i.oppoNative2Loaded=!1,i.oppoShowReportRate=30,i.oppoClickReportRate=60,i.adTip=null,i.adSceneId=l.Unknown,i.wxShareFlag=!1,i.wxImageUrl="https://mmocgame.qpic.cn/wechatgame/2ziagpDKoahPfva5hGEdp6XePPISdV8MIaxOknVx3Ql9YeIYpiaXQZAOhxF6OmqPYl/0",i.wxImageId="mIdbOqrhQp2JopPChWMH8Q==",i.zsPromotionData=null,i.zsIconDic={},i.loginUUID="",i.lastVibrateTime=0,i.vibrateInterval=20,i.winHeight=1334,i.winWidth=750,i.zsCfg=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/ResultCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShareUI.ts","./ResultUI.ts","./UnlockRolePopUI.ts","./GameMain.ts","./DayAwardUI.ts","./Platform.ts","./RoleSkinData.ts","./Util.ts","./OppoNativeAd.ts"],(function(e){"use strict";var t,o,n,i,r,a,l,s,c,u,p,h,d,I,f,U,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Component},function(e){s=e.ShareUI},function(e){c=e.ResultUI},function(e){u=e.UnlockRolePopUI},function(e){p=e.GameMain},function(e){h=e.DayAwardUI},function(e){d=e.default,I=e.PlatformType},function(e){f=e.RoleId},function(e){U=e.default},function(e){w=e.OppoNativeAd}],execute:function(){var P,y,v,k,m,R,b,A,g,C,N,D,S,z;r._RF.push({},"8536aIokelHd5VMZ+JlOevH","ResultCtrl",void 0);var G=a.ccclass,L=a.property;e("ResultCtrl",(P=G("ResultCtrl"),y=L({type:s}),v=L({type:c}),k=L({type:u}),m=L({type:h}),R=L({type:w}),P(((z=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"shareUI",g,i(t)),n(t,"resultUI",C,i(t)),n(t,"rolePopUI",N,i(t)),n(t,"dayAwardUI",D,i(t)),n(t,"oppoNativeAd",S,i(t)),t}o(t,e);var r=t.prototype;return r.onLoad=function(){t.instance=this,this.resultUI.hide(),this.shareUI.node.active=!1,this.rolePopUI.hide(),this.dayAwardUI.hide()},r.start=function(){if(d.currentPlatform===I.VIVO&&(d.createBannerAd(),2===p.instance.gameData.curLevelId&&d.addShortcut()),d.currentPlatform===I.WECHAT&&d.createBannerAd(),d.currentPlatform===I.TT)this.shareUI.show();else if(d.currentPlatform===I.OPPO&&(this.oppoNativeAd.adId=2,this.oppoNativeAd.show(),this.oppoNativeAd.changeBtnHeight(400)),!1===p.instance.curPatient.isRoleUnlocked())this.rolePopUI.show(p.instance.curPatient.meshId);else{var e;if(-1===(e=p.instance.roleSkinData.getRandLockedId()))this.resultUI.show();else{var t=U.randRangeNumber(0,100);!1===p.instance.roleSkinData.isUnlocked(f.NewYearGirl)?t>40?this.rolePopUI.show(f.NewYearGirl):this.rolePopUI.show(e):!1===p.instance.roleSkinData.isUnlocked(f.Cattle)&&t>40?this.rolePopUI.show(f.Cattle):this.rolePopUI.show(e)}}},r.onShareClose=function(){if(this.shareUI.close(),!1===p.instance.curPatient.isRoleUnlocked())this.rolePopUI.show(p.instance.curPatient.meshId);else{var e;if(-1===(e=p.instance.roleSkinData.getRandLockedId()))this.resultUI.show();else{var t=U.randRangeNumber(0,100);!1===p.instance.roleSkinData.isUnlocked(f.NewYearGirl)?t>40?this.rolePopUI.show(f.NewYearGirl):this.rolePopUI.show(e):!1===p.instance.roleSkinData.isUnlocked(f.Cattle)&&t>40?this.rolePopUI.show(f.Cattle):this.rolePopUI.show(e)}}},r.onRolePopClose=function(){this.rolePopUI.close(),this.resultUI.show()},r.onViewAdClicked=function(){this.oppoNativeAd.onClick()},t}(l)).instance=null,g=t((A=z).prototype,"shareUI",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(A.prototype,"resultUI",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(A.prototype,"rolePopUI",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(A.prototype,"dayAwardUI",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(A.prototype,"oppoNativeAd",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=A))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/ResultUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MoneyAnim.ts","./Platform.ts","./GameMain.ts","./AdTip.ts","./AudioManager.ts","./DayAwardUI.ts","./ResultCtrl.ts"],(function(e){"use strict";var t,r,n,i,a,o,l,s,u,c,d,p,h,m,f,y,b,g,v,w,N,S,A,T,L,P,O,R,B,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Sprite,s=e.Camera,u=e.Node,c=e.Label,d=e.SkinnedMeshRenderer,p=e.AudioSource,h=e.instantiate,m=e.SpriteFrame,f=e.RenderTexture,y=e.tween,b=e.v3,g=e.Vec3,v=e.director,w=e.Component},function(e){N=e.MoneyAnim},function(e){S=e.default,A=e.PlatformType,T=e.AdSceneId},function(e){L=e.GameMain},function(e){P=e.AdTip},function(e){O=e.AudioManager,R=e.AudioClipID},function(e){B=e.DayAwardUI},function(e){C=e.ResultCtrl}],execute:function(){var M,I,D,z,x,F,E,k,U,G,H,V,_,W,Z,j,J,Y,q,K,Q,X,$,ee,te,re,ne,ie,ae,oe,le,se,ue,ce,de,pe;a._RF.push({},"745a1F/AaZAy6E/Ybk/Jf58","ResultUI",void 0);var he=o.ccclass,me=o.property;e("ResultUI",(M=he("ResultUI"),I=me({type:l}),D=me({type:s}),z=me({type:u}),x=me({type:c}),F=me({type:u}),E=me({type:u}),k=me({type:u}),U=me({type:u}),G=me({type:u}),H=me({type:N}),V=me({type:P}),_=me({type:d}),W=me({type:u}),Z=me({type:p}),j=me({type:B}),J=me({type:c}),M(((pe=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"rttSprite",K,i(t)),n(t,"rttCamera",Q,i(t)),n(t,"moneyNode",X,i(t)),n(t,"levelLabel",$,i(t)),n(t,"rewardNode",ee,i(t)),n(t,"rewardBtnNode",te,i(t)),n(t,"shareBtnNode",re,i(t)),n(t,"refuseBtnNode",ne,i(t)),n(t,"tipNode",ie,i(t)),n(t,"moneyAnim",ae,i(t)),n(t,"adTip",oe,i(t)),n(t,"meshRenderer",le,i(t)),n(t,"headNode",se,i(t)),n(t,"audio",ue,i(t)),n(t,"dayAwardUI",ce,i(t)),n(t,"moneyLabel",de,i(t)),t.awardNumLabel=null,t}r(t,e);var a=t.prototype;return a.onLoad=function(){this.rttInit(),this.meshRenderer.mesh=L.instance.getCurPatientMesh(),this.meshRenderer.material=L.instance.getRoleMat(L.instance.curPatient.meshId),this.meshRenderer.skeleton=L.instance.getCurPatientSkeleton(),this.setExpression(L.instance.getHappyExpression()),this.awardNumLabel=this.rewardNode.getChildByName("number").getComponent(c)},a.start=function(){},a.setExpression=function(e){if(this.headNode.destroyAllChildren(),this.headNode.removeAllChildren(),L.instance.isCurPatientNeedExpression()){var t=h(e);t.layer=this.meshRenderer.node.layer,t.children[0].layer=this.meshRenderer.node.layer,this.headNode.addChild(t)}},a.rttInit=function(){null===t.rttSpriteFrame&&(t.rttSpriteFrame=new m,t.rttSpriteFrame.reset({originalSize:this.rttSprite.spriteFrame.getOriginalSize(),rect:this.rttSprite.spriteFrame.getRect(),offset:this.rttSprite.spriteFrame.getOffset(),isRotate:this.rttSprite.spriteFrame.isRotated(),borderTop:this.rttSprite.spriteFrame.insetTop,borderLeft:this.rttSprite.spriteFrame.insetLeft,borderBottom:this.rttSprite.spriteFrame.insetBottom,borderRight:this.rttSprite.spriteFrame.insetRight})),null===t.renderTexture&&(t.renderTexture=new f,t.renderTexture.reset({width:256,height:256})),this.rttCamera.targetTexture=t.renderTexture,t.rttSpriteFrame.texture=t.renderTexture,this.rttSprite.spriteFrame=t.rttSpriteFrame},a.show=function(){var e=this;S.currentPlatform!==A.VIVO&&S.currentPlatform!==A.TT||this.scheduleOnce((function(){S.createInsertAd()}),.5),S.currentPlatform===A.WECHAT&&S.createInsertAd(),S.currentPlatform===A.TT&&S.createBannerAd(),S.currentPlatform===A.OPPO&&C.instance.oppoNativeAd.changeBtnHeight(320),this.audio.playOneShot(O.instance.clips[R.Result],1),this.node.active=!0,this.rttCamera.node.active=!0,this.awardNumLabel.string="+300",this.updateMoneyDisplay(),this.moneyNode.setPosition(0,64,0),this.moneyNode.setScale(.3,.3,.3),y(this.moneyNode).to(.25,{position:b(0,-149.533,0),scale:g.ONE}).start(),this.levelLabel.node.active=!1,this.levelLabel.string="第"+(L.instance.gameData.curLevelId+1)+"关完成",this.levelLabel.node.setScale(.3,.3,.3),this.scheduleOnce((function(){e.levelLabel.node.active=!0,y(e.levelLabel.node).to(.25,{scale:g.ONE}).start()}),.2),this.rttSprite.node.parent.active=!1,this.rttSprite.node.parent.setScale(.3,.3,.3),this.scheduleOnce((function(){e.rttSprite.node.parent.active=!0,y(e.rttSprite.node.parent).to(.2,{scale:g.ONE}).start()}),.4),this.shareBtnNode.active=!1,this.refuseBtnNode.active=!1,this.rewardBtnNode.active=!1,this.tipNode.active=!1,this.rewardBtnNode.setScale(.3,.3,.3),this.scheduleOnce((function(){e.rewardBtnNode.active=!0,y(e.rewardBtnNode).to(.15,{scale:g.ONE}).start()}),.6),this.scheduleOnce((function(){e.refuseBtnNode.active=!0}),.7)},a.close=function(){this.node.active=!1},a.hide=function(){this.node.active=!1,this.rttCamera.node.active=!1},a.onRefuseClicked=function(){var e=this;this.moneyAnim.play((function(){e.audio.playOneShot(O.instance.clips[R.Coin],1)})),L.instance.gameData.addMoney(300),this.awardNumLabel.string="+300",this.scheduleOnce((function(){e.updateMoneyDisplay()}),.55),this.shareBtnNode.active=!1,this.rewardBtnNode.active=!1,this.refuseBtnNode.active=!1,this.tipNode.active=!1,L.instance.gameData.nextLevel(),S.reportLevelPass(L.instance.gameData.curLevelId),this.scheduleOnce((function(){e.backToGameMain()}),1.5)},a.onShareClicked=function(){S.currentPlatform===A.TT&&S.shareRecord((function(){}))},a.onAwardClicked=function(){var e=this;S.currentPlatform===A.TT||S.currentPlatform===A.OPPO||S.currentPlatform===A.VIVO||S.currentPlatform===A.WECHAT?(S.adSceneId=T.MoreAward,S.adTip=this.adTip,S.playVideoAd((function(){e.getMoreAward(),S.reportMoreAward()}))):S.currentPlatform===A.Default&&this.getMoreAward()},a.getMoreAward=function(){var e=this;this.unscheduleAllCallbacks(),this.moneyAnim.play((function(){e.audio.playOneShot(O.instance.clips[R.Coin],1)})),L.instance.gameData.addMoney(1500),this.awardNumLabel.string="+1500",this.scheduleOnce((function(){e.updateMoneyDisplay()}),.55),this.shareBtnNode.active=!1,this.rewardBtnNode.active=!1,this.refuseBtnNode.active=!1,this.tipNode.active=!1,L.instance.gameData.nextLevel(),S.reportLevelPass(L.instance.gameData.curLevelId),this.scheduleOnce((function(){e.backToGameMain()}),1.5)},a.updateMoneyDisplay=function(){this.moneyLabel.string=""+L.instance.gameData.money},a.updateMoneyDisplaySchedule=function(){var e=this;this.scheduleOnce((function(){e.moneyLabel.string=""+L.instance.gameData.money}),.5)},a.backToGameMain=function(){var e=this;S.currentPlatform!==A.TT&&S.currentPlatform!==A.WECHAT||(S.destroyBannerAd(),S.createBannerAd()),3===L.instance.gameData.patientIdx?(y(this.levelLabel.node).to(.25,{scale:g.ZERO}).start(),y(this.rttSprite.node.parent).to(.2,{scale:g.ZERO}).start(),this.scheduleOnce((function(){e.dayAwardUI.show()}),.6)):(L.instance.gameData.nextPatientIdx(),v.loadScene("mainScene",(function(){L.instance.backToGameMain()})))},t}(w)).renderTexture=null,pe.rttSpriteFrame=null,K=t((q=pe).prototype,"rttSprite",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(q.prototype,"rttCamera",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(q.prototype,"moneyNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(q.prototype,"levelLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(q.prototype,"rewardNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(q.prototype,"rewardBtnNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(q.prototype,"shareBtnNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(q.prototype,"refuseBtnNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(q.prototype,"tipNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(q.prototype,"moneyAnim",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(q.prototype,"adTip",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(q.prototype,"meshRenderer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(q.prototype,"headNode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(q.prototype,"audio",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(q.prototype,"dayAwardUI",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(q.prototype,"moneyLabel",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=q))||Y));a._RF.pop()}}}));

System.register("chunks:///_virtual/RoleSkinData.ts",["cc","./DataStorage.ts","./Platform.ts","./Util.ts"],(function(t){"use strict";var a,n,s,i,e;return{setters:[function(t){a=t.cclegacy},function(t){n=t.default},function(t){s=t.default,i=t.PlatformType},function(t){e=t.default}],execute:function(){var o;t("RoleId",void 0),a._RF.push({},"57e01gEacJIfrxeuxGsa0M4","RoleSkinData",void 0),function(t){t[t.Boy1=0]="Boy1",t[t.Boy2=1]="Boy2",t[t.Girl=2]="Girl",t[t.Granny=3]="Granny",t[t.Ninja=4]="Ninja",t[t.Spider=5]="Spider",t[t.Iron=6]="Iron",t[t.Captain=7]="Captain",t[t.WuKong=8]="WuKong",t[t.Panda=9]="Panda",t[t.LongZhu=10]="LongZhu",t[t.ComicGirl=11]="ComicGirl",t[t.Batman=12]="Batman",t[t.Joker=13]="Joker",t[t.Robot=14]="Robot",t[t.NewYearGirl=15]="NewYearGirl",t[t.Cattle=16]="Cattle",t[t.RoleCount=17]="RoleCount"}(o||(o=t("RoleId",{})));var r=t("RoleSkinData",function(){function t(){this.skinData=[]}var a=t.prototype;return a.reset=function(){this.skinData.splice(0,this.skinData.length);for(var a=0;a<t.skinCount;a++)a<4?this.skinData.push(1):this.skinData.push(0)},a.clear=function(){n.delete(t.skinDataName)},a.load=function(){if(n.dataExist(t.skinDataName)){var a=n.load(t.skinDataName);cc.sys.platform===cc.sys.WECHAT_GAME||cc.sys.platform===cc.sys.BYTEDANCE_GAME?this.skinData=JSON.parse(a):this.skinData=a}else this.reset(),cc.sys.platform===cc.sys.WECHAT_GAME||cc.sys.platform===cc.sys.BYTEDANCE_GAME?n.save(t.skinDataName,JSON.stringify(this.skinData)):n.save(t.skinDataName,this.skinData)},a.save=function(){cc.sys.platform===cc.sys.WECHAT_GAME||cc.sys.platform===cc.sys.BYTEDANCE_GAME?n.save(t.skinDataName,JSON.stringify(this.skinData)):n.save(t.skinDataName,this.skinData)},a.setData=function(a,n){a>=0&&a<t.skinCount&&(this.skinData[a]=n,this.save())},a.isUnlocked=function(a){return a>=0&&a<t.skinCount&&0!==this.skinData[a]},a.getUnlockCount=function(){for(var t=0,a=0;a<this.skinData.length;a++)1===this.skinData[a]&&t++;return t},a.getRandUnlockedId=function(){for(var t=[],a=0;a<this.skinData.length;a++)1===this.skinData[a]&&t.push(a);return t[e.randRangeNumber(0,t.length-1)]},a.getRandLockedId=function(){var t=[],a=o.RoleCount;s.currentPlatform===i.IOS&&(a=o.RoleCount-1);for(var n=0;n<a;n++)0===this.skinData[n]&&t.push(n);return 0===t.length?-1:t[e.randRangeNumber(0,t.length-1)]},a.getRandUnlockedIdExclude=function(t){for(var a=[],n=0;n<this.skinData.length;n++)if(1===this.skinData[n]){for(var s=!1,i=0;i<t.length;i++)if(t[i]===n){s=!0;break}s||a.push(n)}return a[e.randRangeNumber(0,a.length-1)]},a.getUnlockCountInRange=function(t,a){for(var n=0,s=t;s<a;s++)1===this.skinData[s]&&n++;return n},a.getUnlockInRange=function(t,a){for(var n=[],s=t;s<a;s++)0===this.skinData[s]&&n.push(s);return 0===n.length?-1:1===n.length?n[0]:n[e.randRangeNumber(0,n.length-1)]},t}());r.skinDataName="magichospital_roleskin",r.skinCount=50,a._RF.pop()}}}));

System.register("chunks:///_virtual/ScanEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScanGame.ts"],(function(e){"use strict";var n,t,r,c,a,i,o,s;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,c=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,o=e.Component},function(e){s=e.ScanGame}],execute:function(){var l,u,p,f,v;a._RF.push({},"2267cVOLTtIvrnGrixnnn//","ScanEvent",void 0);var m=i.ccclass,y=i.property;e("ScanEvent",(l=m("ScanEvent"),u=y({type:s}),l((v=n((f=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,r(n,"scanGame",v,c(n)),n}return t(n,e),n.prototype.checkCompleted=function(){this.scanGame.onScanCompleted()},n}(o)).prototype,"scanGame",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/ScanGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Util.ts","./Patient.ts","./GameMain.ts","./AudioManager.ts","./Platform.ts","./OppoNativeAd.ts"],(function(t){"use strict";var e,i,n,a,o,r,s,c,p,l,h,u,m,d,f,y,S,g,v,b,N,P,T,w,A,C,I,O,E,k,M,R,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Node,c=t.Canvas,p=t.Sprite,l=t.Animation,h=t.MeshRenderer,u=t.Prefab,m=t.Texture2D,d=t.SpriteFrame,f=t.v3,y=t.quat,S=t.Camera,g=t.ParticleSystem,v=t.Quat,b=t.tween,N=t.systemEvent,P=t.SystemEvent,T=t.instantiate,w=t.director,A=t.Component},function(t){C=t.default},function(t){I=t.Patient,O=t.PatientType},function(t){E=t.GameMain},function(t){k=t.AudioManager},function(t){M=t.default,R=t.PlatformType},function(t){B=t.OppoNativeAd}],execute:function(){var D,U,z,x,H,_,F,W,G,L,j,q,K,Q,V,Y,J,X,Z,$,tt,et,it,nt,at,ot,rt,st,ct,pt,lt,ht,ut,mt,dt,ft,yt,St,gt,vt,bt,Nt,Pt;o._RF.push({},"25d98MdnTdPNpYsL8v1aKn8","ScanGame",void 0);var Tt=r.ccclass,wt=r.property;t("ScanGame",(D=Tt("ScanGame"),U=wt({type:s}),z=wt({type:c}),x=wt({type:p}),H=wt({type:s}),_=wt({type:s}),F=wt({type:p}),W=wt({type:l}),G=wt({type:h}),L=wt({type:s}),j=wt({type:u}),q=wt({type:s}),K=wt({type:s}),Q=wt({type:l}),V=wt({type:s}),Y=wt({type:l}),J=wt({type:l}),X=wt({type:[m]}),Z=wt({type:[d]}),$=wt({type:s}),tt=wt({type:B}),D((nt=e((it=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"cameraNode",nt,a(e)),n(e,"canvas",at,a(e)),n(e,"maskSprite",ot,a(e)),n(e,"startTipNode",rt,a(e)),n(e,"retryBtnNode",st,a(e)),n(e,"topMatchSprite",ct,a(e)),n(e,"boardAnim",pt,a(e)),n(e,"machineScreenMeshRenderer",lt,a(e)),n(e,"patientsParent",ht,a(e)),n(e,"patientPrefab",ut,a(e)),n(e,"matchBtnNode",mt,a(e)),n(e,"noMatchBtnNode",dt,a(e)),n(e,"scanAnim",ft,a(e)),n(e,"failUINode",yt,a(e)),n(e,"admitAnim",St,a(e)),n(e,"noAdmitAnim",gt,a(e)),n(e,"scanScreenTexs",vt,a(e)),n(e,"symptomSpriteFrames",bt,a(e)),n(e,"viewAdBtnNode",Nt,a(e)),n(e,"oppoNativeAd",Pt,a(e)),e.boardMesh=null,e.gameStarted=!1,e.gameCanOper=!1,e.touchStarted=!1,e.camera=null,e.successEffect=null,e.patientId=0,e.patientNum=4,e.symptomNum=5,e.targetSymptom=0,e.patientSymptoms=[],e.patients=[],e.camOriginPos=f(0,2,-9.335),e.camOriginRot=y(0,0,0,0),e.camDstPos=f(0,1.5,-9.335),e.camDstRot=y(0,0,0,0),e.checkDstPos=f(0,0,-.9),e.frontDstPos=f(0,0,-3.5),e.leftNoMatchPos=f(2.5,0,-4),e.rightMatchPos=f(-2.5,0,-4),e.waitPos=[],e}i(e,t);var o=e.prototype;return o.onLoad=function(){this.gameStarted=!1,this.gameCanOper=!1,this.touchStarted=!1,this.patientId=0,this.camera=this.cameraNode.getComponent(S),this.boardMesh=this.boardAnim.node.getComponent(h),this.successEffect=this.cameraNode.getChildByName("Confetti2").getComponent(g),v.fromEuler(this.camOriginRot,-38,180,0),v.fromEuler(this.camDstRot,-5,180,0),this.cameraNode.setPosition(this.camOriginPos),this.cameraNode.setRotation(this.camOriginRot),this.waitPos.splice(0,this.waitPos.length),this.waitPos.push(f(0,0,1));var t=C.randRangeNumber(0,100)>50?-.01:.01,e=C.randRangeNumber(10,20)*t;this.waitPos.push(f(e,0,2)),t=C.randRangeNumber(0,100)>50?-.01:.01,e=C.randRangeNumber(10,20)*t,this.waitPos.push(f(e,0,3)),t=C.randRangeNumber(0,100)>50?-.01:.01,e=C.randRangeNumber(10,20)*t,this.waitPos.push(f(e,0,4)),this.resetUI(),this.initSymptom(),this.initPatients(),this.setScanScreenTex(0),this.setCameraBoardTex(this.targetSymptom+1),this.topMatchSprite.spriteFrame=this.symptomSpriteFrames[this.targetSymptom],this.addEvent()},o.start=function(){var t=this;if(M.currentPlatform===R.WECHAT&&M.createBannerAd(),this.boardAnim.play("scanMachineBoardShow"),this.scheduleOnce((function(){k.fadeinBgm()}),.8),this.maskSprite.node.active=!0,b(this.maskSprite.color).to(.75,{a:0}).call((function(){t.maskSprite.node.active=!1})).start(),M.currentPlatform===R.OPPO)if(E.instance.gameTimeTick>=20)null!==this.oppoNativeAd&&this.oppoNativeAd.show();else{var e=20-E.instance.gameTimeTick;this.scheduleOnce(this.showOppoNativeAd,e)}},o.showOppoNativeAd=function(){null!==this.oppoNativeAd&&this.oppoNativeAd.show()},o.onDestroy=function(){this.removeEvent()},o.addEvent=function(){N.on(P.EventType.TOUCH_START,this.onTouchStart,this),N.on(P.EventType.TOUCH_END,this.onTouchEnd,this),N.on(P.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},o.removeEvent=function(){N.off(P.EventType.TOUCH_START,this.onTouchStart,this),N.off(P.EventType.TOUCH_END,this.onTouchEnd,this),N.off(P.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},o.onTouchStart=function(t){!1===this.gameStarted&&(this.gameStarted=!0,this.startTipNode.active=!1,this.transCamToDst(),M.startRecord())},o.onTouchMove=function(t){this.gameCanOper},o.onTouchEnd=function(t){this.touchStarted=!1,this.gameCanOper},o.onTouchCancel=function(t){this.touchStarted=!1,this.gameCanOper},o.setScanScreenTex=function(t){this.machineScreenMeshRenderer.material.setProperty("mainTexture",this.scanScreenTexs[t])},o.setCameraBoardTex=function(t){this.boardMesh.material.setProperty("mainTexture",this.scanScreenTexs[t])},o.transCamToDst=function(){var t=this;b(this.cameraNode).to(.7,{position:this.camDstPos,rotation:this.camDstRot}).call((function(){t.topMatchSprite.node.parent.active=!0,t.boardAnim.play("scanMachineBoardOut"),t.showUI(!0),t.patientWalkToDst()})).start()},o.initSymptom=function(){this.targetSymptom=C.randRangeNumber(0,this.symptomNum-1);var t=C.randRangeNumber(0,100)>50?1:2,e=0;this.patientSymptoms.splice(0,this.patientSymptoms.length);for(var i=0;i<4;i++){if(e>=t)this.patientSymptoms.push(C.randRangeExclude(0,this.symptomNum-1,this.targetSymptom));else 4-i<=t-e||C.randRangeNumber(0,100)>50?(this.patientSymptoms.push(this.targetSymptom),e++):this.patientSymptoms.push(C.randRangeExclude(0,this.symptomNum-1,this.targetSymptom))}console.log("** target="+this.targetSymptom),console.log("** targetNum="+t);for(var n=0;n<this.patientSymptoms.length;n++)console.log("** i="+n+" val="+this.patientSymptoms[n])},o.initPatients=function(){var t=y(0,0,0,0);v.fromEuler(t,0,0,0);var e=null,i=null,n=null;this.patients.splice(0,this.patients.length);for(var a=0;a<this.patientNum;a++){var o=T(this.patientPrefab);this.patientsParent.addChild(o),o.setPosition(this.waitPos[a]),o.setRotation(t);var r=o.getComponent(I);if(this.patients.push(r),0===a)e=E.instance.getCurPatientMesh(),i=E.instance.getCurPatientSkeleton(),n=E.instance.getCurPatientExpression(),r.meshId=E.instance.curPatient.meshId,r.init(O.Symptom,e,i,n);else{var s=E.instance.roleSkinData.getRandUnlockedId();r.meshId=s,e=E.instance.getRoleMesh(s),i=E.instance.getRoleSkeleton(s),n=E.instance.getSickExpression(),r.init(O.Symptom,e,i,n)}}},o.patientWalkToDst=function(){var t=this;this.patients[this.patientId].walkTo(this.checkDstPos,(function(){t.scanAnim.play()}))},o.onScanCompleted=function(){this.setScanScreenTex(this.patientSymptoms[this.patientId]+1),this.showUI(!0),this.patients[this.patientId].walkTo(this.frontDstPos,(function(){}))},o.resetUI=function(){this.matchBtnNode.setPosition(500,375,0),this.noMatchBtnNode.setPosition(-500,375,0)},o.showUI=function(t){var e=this;t?M.currentPlatform!==R.OPPO?(b(this.matchBtnNode).to(.3,{position:f(300,375,0)}).call((function(){})).start(),b(this.noMatchBtnNode).to(.3,{position:f(-300,375,0)}).call((function(){})).start()):(this.viewAdBtnNode.active=!0,this.scheduleOnce((function(){b(e.matchBtnNode).to(.3,{position:f(300,375,0)}).call((function(){})).start(),b(e.noMatchBtnNode).to(.3,{position:f(-300,375,0)}).call((function(){})).start()}),1)):(b(this.matchBtnNode).to(.3,{position:f(500,375,0)}).call((function(){})).start(),b(this.noMatchBtnNode).to(.3,{position:f(-500,375,0)}).call((function(){})).start(),this.viewAdBtnNode.active=!1)},o.onMatchClicked=function(){var t=this;this.admitAnim.node.parent.active=!0,this.admitAnim.play();var e=y(0,0,0,0);if(v.fromEuler(e,0,32,0),b(this.patients[this.patientId].node).to(.15,{rotation:e}).call((function(){})).start(),this.scheduleOnce((function(){t.patients[t.patientId].walkTo(t.rightMatchPos,(function(){t.patientSymptoms[t.patientId]===t.targetSymptom?t.patientId===t.patientNum-1&&(k.fadeoutBgm(),t.successEffect.play(),M.currentPlatform===R.OPPO&&t.unschedule(t.showOppoNativeAd),M.currentPlatform===R.WECHAT&&M.destroyBannerAd(),t.scheduleOnce((function(){w.loadScene("result")}),1)):t.patients[t.patientId].walkTo(t.frontDstPos,(function(){t.failUINode.active=!0,t.retryBtnNode.active=!1}))}))}),.1),this.showUI(!1),this.patientSymptoms[this.patientId]===this.targetSymptom){var i=this.patientId+1;i<this.patientNum&&this.patients[i].walkTo(this.checkDstPos,(function(){t.patientId++,t.scanAnim.play()})),this.setScanScreenTex(0)}},o.onNoMatchClicked=function(){var t=this;this.noAdmitAnim.node.parent.active=!0,this.noAdmitAnim.play();var e=y(0,0,0,0);if(v.fromEuler(e,0,-32,0),b(this.patients[this.patientId].node).to(.15,{rotation:e}).call((function(){})).start(),this.scheduleOnce((function(){t.patients[t.patientId].walkTo(t.leftNoMatchPos,(function(){t.patientSymptoms[t.patientId]!==t.targetSymptom?t.patientId===t.patientNum-1&&(M.currentPlatform===R.OPPO&&t.unschedule(t.showOppoNativeAd),M.currentPlatform===R.WECHAT&&M.destroyBannerAd(),w.loadScene("result")):t.patients[t.patientId].walkTo(t.frontDstPos,(function(){t.failUINode.active=!0,t.retryBtnNode.active=!1}))}))}),.1),this.showUI(!1),this.patientSymptoms[this.patientId]!==this.targetSymptom){var i=this.patientId+1;i<this.patientNum&&this.patients[i].walkTo(this.checkDstPos,(function(){t.patientId++,t.scanAnim.play()})),this.setScanScreenTex(0)}},o.onContinue=function(){M.adTip=null,this.failUINode.active=!1,this.patients[this.patientId].node.setPosition(this.waitPos[this.patientId]);var t=y(0,0,0,0);v.fromEuler(t,0,0,0),this.patients[this.patientId].node.setRotation(t),this.resetUI(),this.setScanScreenTex(0),this.patientWalkToDst()},o.onRetryClicked=function(){this.failUINode.active=!1;var t=y(0,0,0,0);v.fromEuler(t,0,0,0);for(var e=0;e<this.patients.length;e++)this.patients[e].node.setPosition(this.waitPos[e]),this.patients[e].node.setRotation(t);this.patientId=0,this.resetUI(),this.setScanScreenTex(0),this.patientWalkToDst()},o.onViewAdClicked=function(){M.reportOppoNative1Click()},e}(A)).prototype,"cameraNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(it.prototype,"canvas",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(it.prototype,"maskSprite",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(it.prototype,"startTipNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(it.prototype,"retryBtnNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(it.prototype,"topMatchSprite",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(it.prototype,"boardAnim",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(it.prototype,"machineScreenMeshRenderer",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(it.prototype,"patientsParent",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(it.prototype,"patientPrefab",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(it.prototype,"matchBtnNode",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=e(it.prototype,"noMatchBtnNode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(it.prototype,"scanAnim",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(it.prototype,"failUINode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=e(it.prototype,"admitAnim",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=e(it.prototype,"noAdmitAnim",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(it.prototype,"scanScreenTexs",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),bt=e(it.prototype,"symptomSpriteFrames",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Nt=e(it.prototype,"viewAdBtnNode",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=e(it.prototype,"oppoNativeAd",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=it))||et));o._RF.pop()}}}));

System.register("chunks:///_virtual/SettingUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMain.ts","./AudioManager.ts","./Platform.ts"],(function(e){"use strict";var t,n,i,a,o,r,s,c,l,g,u,d,h,p,f,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Node,c=e.Toggle,l=e.tween,g=e.Vec3,u=e.v3,d=e.Component},function(e){h=e.GameMain},function(e){p=e.AudioManager},function(e){f=e.default,v=e.PlatformType}],execute:function(){var m,b,y,w,T,O,A,S,P;o._RF.push({},"ba10cjlr3JDY7iBhvOfAHO6","SettingUI",void 0);var C=r.ccclass,N=r.property;e("SettingUI",(m=C("SettingUI"),b=N({type:s}),y=N({type:c}),w=N({type:c}),m((A=t((O=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"targetNode",A,a(t)),i(t,"vibrateToggle",S,a(t)),i(t,"sndToggle",P,a(t)),t}n(t,e);var o=t.prototype;return o.start=function(){},o.onSndToggleValueChange=function(){h.instance.gameData.updateSnd(this.sndToggle.isChecked),p.sndOn=h.instance.gameData.isSndOn(),p.sndOn?p.playBgm():p.stopBgm()},o.onVibrateToggleValueChange=function(){h.instance.gameData.updateVibration(this.vibrateToggle.isChecked),this.vibrateToggle.isChecked&&f.vibrateShort()},o.isOpen=function(){return this.node.active},o.show=function(){this.node.active||(f.currentPlatform===v.OPPO&&(h.instance.oppoNativeAd.isShowed()?h.instance.mainUI.showViewAdBtn(!0,320*f.winHeight/1334-320+380):h.instance.mainUI.showViewAdBtn(!1),h.instance.oppoNativeAd.changeBtnHeight(320*f.winHeight/1334)),f.currentPlatform===v.WECHAT&&f.createInsertAd(),this.sndToggle.isChecked=h.instance.gameData.isSndOn(),this.vibrateToggle.isChecked=h.instance.gameData.isVibrationOn(),this.node.active=!0,this.targetNode.setScale(.4,.4,.4),l(this.targetNode).to(.3,{scale:g.ONE},{easing:"backOut"}).start())},o.onMaskClicked=function(){this.close()},o.close=function(){var e=this;f.currentPlatform===v.OPPO&&(h.instance.mainUI.showViewAdBtn(!1),h.instance.oppoNativeAd.changeBtnHeight(200)),l(this.targetNode).to(.15,{scale:u(.3,.3,.3)}).call((function(){e.node.active=!1})).start()},t}(d)).prototype,"targetNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(O.prototype,"vibrateToggle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(O.prototype,"sndToggle",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=O))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShareUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Platform.ts","./AudioManager.ts","./ResultCtrl.ts","./GameMain.ts","./MoneyAnim.ts"],(function(e){"use strict";var t,i,n,o,r,a,l,c,s,u,d,h,p,f,b,m,y,g,v,N,w,A,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.AudioSource,c=e.Node,s=e.SkeletalAnimation,u=e.Label,d=e.quat,h=e.tween,p=e.Vec3,f=e.v3,b=e.Quat,m=e.Component},function(e){y=e.default,g=e.PlatformType},function(e){v=e.AudioManager,N=e.AudioClipID},function(e){w=e.ResultCtrl},function(e){A=e.GameMain},function(e){S=e.MoneyAnim}],execute:function(){var z,D,L,R,T,k,C,q,U,I,M,B,O,Y,x,P,_,E,G,F,H;r._RF.push({},"498cb4UTqpH2qGEol/wRq1r","ShareUI",void 0);var j=a.ccclass,Q=a.property;e("ShareUI",(z=j("ShareUI"),D=Q({type:l}),L=Q({type:c}),R=Q({type:c}),T=Q({type:c}),k=Q({type:c}),C=Q({type:s}),q=Q({type:u}),U=Q({type:c}),I=Q({type:S}),z((O=t((B=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"audio",O,o(t)),n(t,"btnNode",Y,o(t)),n(t,"fingerNode",x,o(t)),n(t,"successLabelNode",P,o(t)),n(t,"shareText",_,o(t)),n(t,"roleAnim",E,o(t)),n(t,"qdzLabel",G,o(t)),n(t,"moneyTipNode",F,o(t)),n(t,"moneyAnim",H,o(t)),t.windowNode=null,t.closeBtnNode=null,t.unlockSuccessAnim=!1,t.roleYDegree=0,t.roleRot=d(0,0,0,0),t.rotateA=20,t}i(t,e);var r=t.prototype;return r.onLoad=function(){this.windowNode=this.node.getChildByName("window"),this.closeBtnNode=this.windowNode.getChildByName("btnClose"),this.closeBtnNode.active=!0},r.start=function(){},r.show=function(){this.node.active=!0,this.btnNode.active=!0,this.fingerNode.active=!0,this.successLabelNode.active=!1,this.windowNode.setScale(.4,.4,.4),w.instance.resultUI.updateMoneyDisplaySchedule(),A.instance.roleSkinData.isUnlocked(4)?(this.moneyTipNode.active=!1,this.shareText.active=!1,this.roleAnim.node.active=!1,this.qdzLabel.node.active=!1):(this.moneyTipNode.active=!1,this.roleAnim.node.active=!0,this.qdzLabel.node.active=!0,this.roleAnim.play("walk4")),h(this.windowNode).to(.5,{scale:p.ONE},{easing:"backOut"}).start(),this.scheduleOnce((function(){y.stopRecord()}),1)},r.close=function(){this.node.active=!1},r.shareClip=function(){var e=this;y.currentPlatform===g.TT&&y.shareRecord((function(){y.reportShareClip();var t=3;e.roleAnim.node.active?(e.getRole(),t=4):t=2,e.fingerNode.active=!1,e.btnNode.active=!1,e.shareText.active=!1,e.successLabelNode.active=!0,e.scheduleOnce((function(){w.instance.onShareClose()}),t)}))},r.getRole=function(){var e=this;this.qdzLabel.string="已解锁",A.instance.roleSkinData.setData(4,1),this.roleAnim.play("hail1"),this.scheduleOnce((function(){e.unlockSuccessAnim=!0,e.roleYDegree=170,h(e.roleAnim.node).to(.3,{scale:f(160,160,160)}).to(.3,{scale:f(100,100,100)}).call((function(){})).start()}),.5),w.instance.resultUI.audio.playOneShot(v.instance.clips[N.Unlock],1)},r.update=function(e){this.unlockSuccessAnim&&(this.rotateA+=.7*e,this.roleYDegree+=this.rotateA,this.roleYDegree>890&&(this.roleYDegree=890,this.unlockSuccessAnim=!1),b.fromEuler(this.roleRot,0,this.roleYDegree,0),this.roleAnim.node.setRotation(this.roleRot))},t}(m)).prototype,"audio",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(B.prototype,"btnNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(B.prototype,"fingerNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(B.prototype,"successLabelNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(B.prototype,"shareText",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(B.prototype,"roleAnim",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(B.prototype,"qdzLabel",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(B.prototype,"moneyTipNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(B.prototype,"moneyAnim",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=B))||M));r._RF.pop()}}}));

System.register("chunks:///_virtual/ToothGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Patient.ts","./Util.ts","./GameMain.ts","./Platform.ts","./AudioManager.ts","./OppoNativeAd.ts"],(function(t){"use strict";var e,i,o,n,a,r,s,h,l,c,d,m,p,u,g,f,T,P,b,y,v,C,N,S,A,O,w,E,R,W,B,z,k,U;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,r=t.gfx,s=t._decorator,h=t.Node,l=t.Canvas,c=t.Sprite,d=t.ParticleSystem,m=t.Animation,p=t.Prefab,u=t.v3,g=t.quat,f=t.Camera,T=t.Quat,P=t.MeshRenderer,b=t.tween,y=t.systemEvent,v=t.SystemEvent,C=t.instantiate,N=t.v2,S=t.color,A=t.Vec3,O=t.director,w=t.Component},function(t){E=t.Patient},function(t){R=t.default},function(t){W=t.GameMain},function(t){B=t.default,z=t.PlatformType},function(t){k=t.AudioManager},function(t){U=t.OppoNativeAd}],execute:function(){var I,x,D,M,H,_,G,F,L,V,j,q,X,Y,Q,Z,J,K,$,tt,et,it,ot,nt,at,rt,st,ht,lt,ct,dt,mt,pt,ut,gt,ft,Tt,Pt,bt,yt,vt,Ct,Nt,St,At,Ot,wt;a._RF.push({},"348f4nZgE5H1bgCkNLi4Co6","ToothGame",void 0);var Et=r.AttributeName,Rt=s.ccclass,Wt=s.property;t("ToothGame",(I=Rt("ToothGame"),x=Wt({type:h}),D=Wt({type:l}),M=Wt({type:c}),H=Wt({type:E}),_=Wt({type:h}),G=Wt({type:h}),F=Wt({type:h}),L=Wt({type:h}),V=Wt({type:d}),j=Wt({type:d}),q=Wt({type:m}),X=Wt({type:m}),Y=Wt({type:m}),Q=Wt({type:m}),Z=Wt({type:p}),J=Wt({type:p}),K=Wt({type:p}),$=Wt({type:p}),tt=Wt({type:p}),et=Wt({type:p}),it=Wt({type:p}),ot=Wt({type:U}),I((rt=e((at=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"cameraNode",rt,n(e)),o(e,"canvas",st,n(e)),o(e,"maskSprite",ht,n(e)),o(e,"patient",lt,n(e)),o(e,"startTipNode",ct,n(e)),o(e,"mouthNode",dt,n(e)),o(e,"maskBallParent",mt,n(e)),o(e,"clipNode",pt,n(e)),o(e,"cleanToolEffect",ut,n(e)),o(e,"gildToolEffect",gt,n(e)),o(e,"completeUIAnim",ft,n(e)),o(e,"step0Anim",Tt,n(e)),o(e,"step1Anim",Pt,n(e)),o(e,"step2Anim",bt,n(e)),o(e,"toothPrefab",yt,n(e)),o(e,"toothTartarPrefab",vt,n(e)),o(e,"toothGildPrefab",Ct,n(e)),o(e,"toothGildFinishedPrefab",Nt,n(e)),o(e,"cleanBallPrefab",St,n(e)),o(e,"braceTargetPrefab",At,n(e)),o(e,"bracePrefab",Ot,n(e)),o(e,"oppoNativeAd",wt,n(e)),e.dirtyTooths=[],e.braceTargets=[],e.gildFinishedTooths=[],e.cleanToolOriginPos=u(-.07,1.388,-.4),e.gildToolOriginPos=u(-.5,1.388,-.7),e.lastHandWorldPos=u(0,0,0),e.handWorldPos=u(0,0,0),e.handCurWorldPos=u(0,0,0),e.tempPos=u(0,0,0),e.targetScrPos=u(0,0,0),e.clipBraceScrPos=u(0,0,0),e.cleanserPointNode=null,e.gildPointNode=null,e.clipBraceNode=null,e.dirtyToothPositions=[],e.dirtyToothScrPositions=[],e.dirtyToothIndices=[],e.maskTriangleSet=[],e.braceStartPos=0,e.braceStartPosRange=[0,4],e.braceNum=4,e.gameStarted=!1,e.gameCanOper=!1,e.gameState=0,e.touchStarted=!1,e.camera=null,e.successEffect=null,e.cameraRotAngle=0,e.cameraRot=g(0,0,0,0),e.camOriginPos=u(0,0,-4),e.camOriginRot=g(0,0,0,0),e.camDstPos=u(0,0,-.8),e.camDstRot=g(0,0,0,0),e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.gameStarted=!1,this.gameCanOper=!1,this.gameState=0,this.touchStarted=!1,this.camera=this.cameraNode.getComponent(f),this.successEffect=this.cameraNode.getChildByName("Confetti2").getComponent(d),T.fromEuler(this.camOriginRot,-5,180,0),T.fromEuler(this.camDstRot,-9,180,0),this.cameraNode.setPosition(this.camOriginPos),this.cameraNode.setRotation(this.camOriginRot),this.cleanserPointNode=this.cleanToolEffect.node.parent.getChildByName("point"),this.gildPointNode=this.gildToolEffect.node.parent.getChildByName("point"),this.clipBraceNode=this.clipNode.children[0].children[0],this.patient.meshRenderer.mesh=W.instance.getCurPatientMesh(),this.patient.meshRenderer.material=W.instance.getRoleMat(W.instance.curPatient.meshId),this.patient.meshRenderer.skeleton=W.instance.getCurPatientSkeleton(),this.patient.setExpression(W.instance.getCurPatientExpression()),this.patient.headNode.children[0].children[0].getComponent(P).material=this.patient.meshRenderer.material,this.addEvent()},a.start=function(){var t=this;B.currentPlatform===z.WECHAT&&B.createBannerAd();var e=u(0,0,0);if(this.camera.worldToScreen(u(0,0,0),e),this.scheduleOnce((function(){k.fadeinBgm()}),.8),this.maskSprite.node.active=!0,b(this.maskSprite.color).to(.75,{a:0}).call((function(){t.maskSprite.node.active=!1})).start(),B.currentPlatform===z.OPPO)if(W.instance.gameTimeTick>=20)null!==this.oppoNativeAd&&this.oppoNativeAd.show();else{var i=20-W.instance.gameTimeTick;this.scheduleOnce(this.showOppoNativeAd,i)}},a.showOppoNativeAd=function(){null!==this.oppoNativeAd&&this.oppoNativeAd.show()},a.onDestroy=function(){this.removeEvent()},a.addEvent=function(){y.on(v.EventType.TOUCH_START,this.onTouchStart,this),y.on(v.EventType.TOUCH_MOVE,this.onTouchMove,this),y.on(v.EventType.TOUCH_END,this.onTouchEnd,this),y.on(v.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},a.removeEvent=function(){y.off(v.EventType.TOUCH_START,this.onTouchStart,this),y.off(v.EventType.TOUCH_MOVE,this.onTouchMove,this),y.off(v.EventType.TOUCH_END,this.onTouchEnd,this),y.off(v.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},a.transCamToDst=function(){var t=this;b(this.cameraNode).to(.55,{position:this.camDstPos,rotation:this.camDstRot}).call((function(){t.gameStarted=!0,t.gameCanOper=!0,t.showMouth(),t.initTooths(),t.showCleanTool()})).start()},a.showMouth=function(){this.patient.headNode.setScale(0,0,0),this.patient.showExpression(!1),this.mouthNode.parent.active=!0,this.mouthNode.parent.setPosition(this.patient.headNode.worldPosition)},a.showCleanTool=function(){this.cleanToolEffect.node.parent.active=!0,this.cleanToolEffect.node.parent.setPosition(this.cleanToolOriginPos)},a.clearToothObjs=function(){for(var t=0;t<this.mouthNode.children.length;t++)this.mouthNode.children[t].destroyAllChildren(),this.mouthNode.children[t].removeAllChildren()},a.clearMaskBalls=function(){this.maskBallParent.destroyAllChildren(),this.maskBallParent.removeAllChildren()},a.initTooths=function(){this.clearToothObjs();for(var t=0;t<this.mouthNode.children.length;t++){var e=C(this.toothPrefab);this.mouthNode.children[t].addChild(e)}this.maskTriangleSet=[],this.dirtyTooths.splice(0,this.dirtyTooths.length);var i=2;R.randRangeNumber(0,100)>60&&(i=3),i=2;for(var o=R.randExtract(this.mouthNode.children.length,i),n=0;n<o.length;n++){var a=C(this.toothTartarPrefab);this.mouthNode.children[o[n]-1].addChild(a),this.dirtyTooths.push(a);for(var r=a.getComponent(P).mesh.readAttribute(0,Et.ATTR_POSITION),s=[],h=[],l=0,c=0;c<r.length;c+=3)s.push(u(r[c],r[c+1],r[c+2])),s[l].transformMat4(a.worldMatrix),h.push(u(0,0,0)),l++;this.dirtyToothPositions.push(s),this.dirtyToothScrPositions.push(h),this.maskTriangleSet.push({})}this.dirtyTooths.length>0&&(this.gameState=1)},a.initGildTooths=function(){this.maskTriangleSet=[],this.dirtyToothPositions=[],this.dirtyToothScrPositions=[],this.dirtyTooths.splice(0,this.dirtyTooths.length),this.gildFinishedTooths.splice(0,this.gildFinishedTooths.length);var t=2;R.randRangeNumber(0,100)>60&&(t=3),t=1;for(var e=R.randExtract(this.mouthNode.children.length,t),i=0;i<e.length;i++){var o=C(this.toothGildPrefab);this.mouthNode.children[e[i]-1].addChild(o),this.dirtyTooths.push(o);var n=C(this.toothGildFinishedPrefab);this.mouthNode.children[e[i]-1].addChild(n),n.active=!1,this.gildFinishedTooths.push(n),this.mouthNode.children[e[i]-1].children[0].getComponent(m).play("tooth_bluing");for(var a=o.getComponent(P).mesh.readAttribute(0,Et.ATTR_POSITION),r=[],s=[],h=0,l=0;l<a.length;l+=3)r.push(u(a[l],a[l+1],a[l+2])),r[h].transformMat4(o.worldMatrix),s.push(u(0,0,0)),h++;this.dirtyToothPositions.push(r),this.dirtyToothScrPositions.push(s),this.maskTriangleSet.push({})}},a.initBraces=function(){this.braceTargets.splice(0,this.braceTargets.length);var t=R.randRangeNumber(0,this.braceStartPosRange.length-1);this.braceStartPos=this.braceStartPosRange[t];for(var e=g(0,0,0,0),i=0,o=0;o<this.braceNum;o++){var n=C(this.braceTargetPrefab);this.mouthNode.children[this.braceStartPos+o].addChild(n),i=R.randRangeNumber(0,20),T.fromEuler(e,0,0,i),this.braceTargets.push(n)}},a.isBraceFinished=function(){for(var t=0,e=0;e<this.braceTargets.length;e++)1===this.braceTargets[e].children.length&&t++;return t===this.braceNum},a.onTouchStart=function(t){if(!1===this.gameStarted)this.gameStarted=!0,this.startTipNode.active=!1,this.transCamToDst(),B.startRecord();else if(this.gameStarted&&this.gameCanOper&&(1===this.gameState||2===this.gameState||3===this.gameState)){var e=t.getLocationX(),i=t.getLocationY();this.camera.screenToWorld(u(e,i,0),this.lastHandWorldPos),this.lastHandWorldPos.z=this.cleanToolOriginPos.z}},a.onTouchMove=function(t){var e=this;if(this.gameCanOper){var i=t.getDelta(),o=t.getLocationX(),n=t.getLocationY();if(1===this.gameState){if(this.camera.screenToWorld(u(o,n,0),this.handWorldPos),this.handWorldPos.z=this.cleanToolOriginPos.z,this.tempPos.set(this.handWorldPos),this.handWorldPos.subtract(this.lastHandWorldPos),this.handWorldPos.x*=.4,this.cleanToolEffect.node.parent.getPosition(this.handCurWorldPos),this.handCurWorldPos.add(this.handWorldPos),this.cleanToolEffect.node.parent.setPosition(this.handCurWorldPos),this.lastHandWorldPos.set(this.tempPos),this.cameraRotAngle+=.01*i.x,this.cameraRotAngle>8&&(this.cameraRotAngle=8),this.cameraRotAngle<-8&&(this.cameraRotAngle=-8),T.fromEuler(this.cameraRot,0,this.cameraRotAngle,0),this.cameraNode.parent.setRotation(this.cameraRot),i.lengthSqr()>20&&!1===this.isDirtyCleanCompleted()){var a=C(this.cleanBallPrefab);this.maskBallParent.addChild(a),a.setPosition(this.cleanserPointNode.worldPosition);var r=u(0,0,0);this.camera.worldToScreen(a.worldPosition,r);for(var s=0;s<this.dirtyToothPositions.length;s++)for(var h=0;h<this.dirtyToothPositions[s].length;h++){this.camera.worldToScreen(this.dirtyToothPositions[s][h],this.dirtyToothScrPositions[s][h]),N(this.dirtyToothScrPositions[s][h].x-r.x,this.dirtyToothScrPositions[s][h].y-r.y).length()<=40&&(this.maskTriangleSet[s][h]=this.dirtyToothPositions[s][h],W.instance.gameData.isVibrationOn()&&B.vibrateShort())}for(var l=0;l<this.maskTriangleSet.length;l++)Object.keys(this.maskTriangleSet[l]).length>40&&this.dirtyTooths[l].active&&function(){var t=e.dirtyTooths[l].parent.children[0].getComponent(m);t.play("tooth_whiting"),e.dirtyTooths[l].active=!1,e.scheduleOnce((function(){t.stop()}),1)}();if(this.isDirtyCleanCompleted()){this.clearMaskBalls(),this.step0Anim.play(),this.step0Anim.node.getComponent(c).color=S(0,240,67,255),this.step0Anim.node.children[0].getComponent(c).grayscale=!1,this.completeUIAnim.node.active=!0,this.completeUIAnim.play();var d=u(0,0,0);this.camera.convertToUINode(this.cleanserPointNode.worldPosition,this.canvas.node,d),this.completeUIAnim.node.setPosition(d.x,d.y,d.z),this.scheduleOnce((function(){e.completeUIAnim.stop(),e.completeUIAnim.node.active=!1,e.cleanToolEffect.node.parent.active=!1,e.gameCanOper=!1,e.gildToolEffect.node.parent.active=!0,e.gildToolEffect.node.parent.setPosition(e.gildToolOriginPos),b(e.gildToolEffect.node.parent).to(.55,{position:e.cleanToolEffect.node.parent.worldPosition}).call((function(){e.gameCanOper=!0,e.initGildTooths(),e.gameState=2})).start()}),1)}}}else if(2===this.gameState){if(this.camera.screenToWorld(u(o,n,0),this.handWorldPos),this.handWorldPos.z=this.cleanToolOriginPos.z,this.tempPos.set(this.handWorldPos),this.handWorldPos.subtract(this.lastHandWorldPos),this.handWorldPos.x*=.4,this.gildToolEffect.node.parent.getPosition(this.handCurWorldPos),this.handCurWorldPos.add(this.handWorldPos),this.gildToolEffect.node.parent.setPosition(this.handCurWorldPos),this.lastHandWorldPos.set(this.tempPos),this.cameraRotAngle+=.01*i.x,this.cameraRotAngle>8&&(this.cameraRotAngle=8),this.cameraRotAngle<-8&&(this.cameraRotAngle=-8),T.fromEuler(this.cameraRot,0,this.cameraRotAngle,0),this.cameraNode.parent.setRotation(this.cameraRot),i.lengthSqr()>20&&!1===this.isDirtyCleanCompleted()){var p=C(this.cleanBallPrefab);this.maskBallParent.addChild(p),p.setPosition(this.gildPointNode.worldPosition);var g=u(0,0,0);this.camera.worldToScreen(p.worldPosition,g);for(var f=0;f<this.dirtyToothPositions.length;f++)for(var P=0;P<this.dirtyToothPositions[f].length;P++){this.camera.worldToScreen(this.dirtyToothPositions[f][P],this.dirtyToothScrPositions[f][P]),N(this.dirtyToothScrPositions[f][P].x-g.x,this.dirtyToothScrPositions[f][P].y-g.y).length()<=40&&(this.maskTriangleSet[f][P]=this.dirtyToothPositions[f][P],W.instance.gameData.isVibrationOn()&&B.vibrateShort())}for(var y=0;y<this.maskTriangleSet.length;y++){if(Object.keys(this.maskTriangleSet[y]).length>40&&this.dirtyTooths[y].active)this.dirtyTooths[y].parent.children[0].getComponent(m).stop(),this.dirtyTooths[y].active=!1,this.gildFinishedTooths[y].active=!0}if(this.isDirtyCleanCompleted()){this.clearMaskBalls(),this.step1Anim.play(),this.step1Anim.node.getComponent(c).color=S(0,240,67,255),this.step1Anim.node.children[0].getComponent(c).grayscale=!1,this.completeUIAnim.node.active=!0,this.completeUIAnim.play();var v=u(0,0,0);this.camera.convertToUINode(this.gildPointNode.worldPosition,this.canvas.node,v),this.completeUIAnim.node.setPosition(v.x,v.y,v.z),this.scheduleOnce((function(){e.completeUIAnim.stop(),e.completeUIAnim.node.active=!1,e.gildToolEffect.node.parent.active=!1,e.gameCanOper=!1,e.clipNode.active=!0,e.clipNode.setPosition(e.gildToolOriginPos),b(e.clipNode).to(.55,{position:e.gildToolEffect.node.parent.worldPosition}).call((function(){e.gameCanOper=!0,e.initBraces(),e.gameState=3})).start()}),1)}}}else if(3===this.gameState){this.camera.screenToWorld(u(o,n,0),this.handWorldPos),this.handWorldPos.z=this.cleanToolOriginPos.z,this.tempPos.set(this.handWorldPos),this.handWorldPos.subtract(this.lastHandWorldPos),this.handWorldPos.x*=.4,this.clipNode.getPosition(this.handCurWorldPos),this.handCurWorldPos.add(this.handWorldPos),this.clipNode.setPosition(this.handCurWorldPos),this.lastHandWorldPos.set(this.tempPos),this.cameraRotAngle+=.01*i.x,this.cameraRotAngle>8&&(this.cameraRotAngle=8),this.cameraRotAngle<-8&&(this.cameraRotAngle=-8),T.fromEuler(this.cameraRot,0,this.cameraRotAngle,0),this.cameraNode.parent.setRotation(this.cameraRot);for(var O=0;O<this.braceTargets.length;O++)if(0===this.braceTargets[O].children.length&&(this.camera.worldToScreen(this.braceTargets[O].worldPosition,this.targetScrPos),this.camera.worldToScreen(this.clipBraceNode.worldPosition,this.clipBraceScrPos),A.subtract(this.tempPos,this.targetScrPos,this.clipBraceScrPos),this.tempPos.length()<=70)){var w=C(this.bracePrefab);if(this.braceTargets[O].addChild(w),W.instance.gameData.isVibrationOn()&&B.vibrateShort(),this.updateBraceWires(),this.clipBraceNode.active=!1,this.gameCanOper=!1,this.isBraceFinished()){this.step2Anim.play(),this.step2Anim.node.getComponent(c).color=S(0,240,67,255),this.step2Anim.node.children[0].getComponent(c).grayscale=!1,this.completeUIAnim.node.active=!0,this.completeUIAnim.play();var E=u(0,0,0);this.camera.convertToUINode(this.clipBraceNode.worldPosition,this.canvas.node,E),this.completeUIAnim.node.setPosition(E.x,E.y,E.z),this.successEffect.play(),this.scheduleOnce((function(){e.completeUIAnim.stop(),e.completeUIAnim.node.active=!1,k.fadeoutBgm()}),1),this.scheduleOnce((function(){e.switchToResult()}),2)}else!function(){var t=u(0,0,0);t.set(e.clipNode.worldPosition),b(e.clipNode).to(.4,{position:e.gildToolOriginPos}).call((function(){})).start(),e.scheduleOnce((function(){e.clipBraceNode.active=!0,b(e.clipNode).to(.4,{position:t}).call((function(){e.gameCanOper=!0})).start()}),.5)}()}}}},a.updateBraceWires=function(){var t=.0125;if(0===this.braceStartPos&&(t=-.0125),1===this.braceTargets[0].children.length&&1===this.braceTargets[1].children.length){var e=this.braceTargets[0].children[0].getChildByName("wire");this.braceTargets[1].children[0].getChildByName("wire");e.setScale(2.7,1,1),e.setPosition(t,.006,-.009)}if(1===this.braceTargets[1].children.length&&1===this.braceTargets[2].children.length){var i=this.braceTargets[1].children[0].getChildByName("wire");i.setScale(2.7,1,1),i.setPosition(t,.006,-.009)}if(1===this.braceTargets[2].children.length&&1===this.braceTargets[3].children.length){var o=this.braceTargets[2].children[0].getChildByName("wire");o.setScale(2.7,1,1),o.setPosition(t,.006,-.009)}},a.switchToResult=function(){B.currentPlatform===z.OPPO&&this.unschedule(this.showOppoNativeAd),B.currentPlatform===z.WECHAT&&B.destroyBannerAd(),O.loadScene("result")},a.isDirtyCleanCompleted=function(){for(var t=0;t<this.dirtyTooths.length;t++)if(this.dirtyTooths[t].active)return!1;return!0},a.onTouchEnd=function(t){this.touchStarted=!1,this.gameCanOper},a.onTouchCancel=function(t){this.touchStarted=!1,this.gameCanOper},a.update=function(t){},a.lateUpdate=function(t){this.mouthNode.parent.active&&this.patient.headNode.setScale(0,0,0)},e}(w)).prototype,"cameraNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(at.prototype,"canvas",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(at.prototype,"maskSprite",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(at.prototype,"patient",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(at.prototype,"startTipNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=e(at.prototype,"mouthNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(at.prototype,"maskBallParent",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(at.prototype,"clipNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(at.prototype,"cleanToolEffect",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=e(at.prototype,"gildToolEffect",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(at.prototype,"completeUIAnim",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tt=e(at.prototype,"step0Anim",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=e(at.prototype,"step1Anim",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=e(at.prototype,"step2Anim",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(at.prototype,"toothPrefab",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(at.prototype,"toothTartarPrefab",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=e(at.prototype,"toothGildPrefab",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=e(at.prototype,"toothGildFinishedPrefab",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=e(at.prototype,"cleanBallPrefab",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),At=e(at.prototype,"braceTargetPrefab",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ot=e(at.prototype,"bracePrefab",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=e(at.prototype,"oppoNativeAd",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=at))||nt));a._RF.pop()}}}));

System.register("chunks:///_virtual/ToothGameRay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Patient.ts","./Util.ts","./GameMain.ts"],(function(t){"use strict";var e,o,i,n,a,r,s,h,l,c,d,u,m,T,p,f,g,y,P,v,C,b,E,N,R;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,r=t.gfx,s=t._decorator,h=t.Node,l=t.ParticleSystem,c=t.Prefab,d=t.v3,u=t.geometry,m=t.quat,T=t.Camera,p=t.Quat,f=t.systemEvent,g=t.SystemEvent,y=t.tween,P=t.instantiate,v=t.MeshRenderer,C=t.Vec3,b=t.Component},function(t){E=t.Patient},function(t){N=t.default},function(t){R=t.GameMain}],execute:function(){var O,S,w,A,W,z,H,I,M,D,_,x,L,U,G,k,j;a._RF.push({},"2700bBOK3NLm63Ii0I4kwfP","ToothGameRay",void 0);var B=r.AttributeName,V=s.ccclass,F=s.property;t("ToothGameRay",(O=V("ToothGameRay"),S=F({type:h}),w=F({type:E}),A=F({type:h}),W=F({type:h}),z=F({type:l}),H=F({type:c}),I=F({type:c}),O((_=e((D=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"cameraNode",_,n(e)),i(e,"patient",x,n(e)),i(e,"startTipNode",L,n(e)),i(e,"mouthNode",U,n(e)),i(e,"cleanToolEffect",G,n(e)),i(e,"toothPrefab",k,n(e)),i(e,"toothTartarPrefab",j,n(e)),e.dirtyTooths=[],e.cleanToolOriginPos=d(-.07,1.388,-.4),e.lastHandWorldPos=d(0,0,0),e.handWorldPos=d(0,0,0),e.handCurWorldPos=d(0,0,0),e.tempPos=d(0,0,0),e.cleanserPointNode=null,e.screenPointRay=new u.ray(0,0,0,0,0,0),e.dirtyToothIndices=[],e.dirtyToothTriangles=[],e.gameStarted=!1,e.gameCanOper=!1,e.gameState=0,e.touchStarted=!1,e.camera=null,e.cameraRotAxis=d(0,0,0),e.cameraRotAngle=0,e.cameraRot=m(0,0,0,0),e.camOriginPos=d(0,0,-4),e.camOriginRot=m(0,0,0,0),e.camDstPos=d(0,0,-.8),e.camDstRot=m(0,0,0,0),e}o(e,t);var a=e.prototype;return a.onLoad=function(){this.gameStarted=!1,this.gameCanOper=!1,this.gameState=0,this.touchStarted=!1,this.camera=this.cameraNode.getComponent(T),p.fromEuler(this.camOriginRot,-5,180,0),p.fromEuler(this.camDstRot,-9,180,0),this.cameraNode.setPosition(this.camOriginPos),this.cameraNode.setRotation(this.camOriginRot),this.cleanserPointNode=this.cleanToolEffect.node.parent.getChildByName("point"),this.patient.meshRenderer.mesh=R.instance.getCurPatientMesh(),this.patient.meshRenderer.material=R.instance.getRoleMat(R.instance.curPatient.meshId),this.patient.meshRenderer.skeleton=R.instance.getCurPatientSkeleton(),this.patient.setExpression(R.instance.getCurPatientExpression()),this.addEvent()},a.start=function(){var t=d(0,0,0);this.camera.worldToScreen(d(0,0,0),t)},a.onDestroy=function(){this.removeEvent()},a.addEvent=function(){f.on(g.EventType.TOUCH_START,this.onTouchStart,this),f.on(g.EventType.TOUCH_MOVE,this.onTouchMove,this),f.on(g.EventType.TOUCH_END,this.onTouchEnd,this),f.on(g.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},a.removeEvent=function(){f.off(g.EventType.TOUCH_START,this.onTouchStart,this),f.off(g.EventType.TOUCH_MOVE,this.onTouchMove,this),f.off(g.EventType.TOUCH_END,this.onTouchEnd,this),f.off(g.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},a.transCamToDst=function(){var t=this;y(this.cameraNode).to(.55,{position:this.camDstPos,rotation:this.camDstRot}).call((function(){t.gameStarted=!0,t.gameCanOper=!0,t.showMouth(),t.initTooths(),t.showCleanTool()})).start()},a.showMouth=function(){this.patient.headNode.setScale(0,0,0),this.patient.showExpression(!1),this.mouthNode.parent.active=!0,this.mouthNode.parent.setPosition(this.patient.headNode.worldPosition)},a.showCleanTool=function(){this.cleanToolEffect.node.parent.active=!0,this.cleanToolEffect.node.parent.setPosition(this.cleanToolOriginPos)},a.clearToothObjs=function(){for(var t=0;t<this.mouthNode.children.length;t++)this.mouthNode.children[t].destroyAllChildren(),this.mouthNode.children[t].removeAllChildren()},a.initTooths=function(){this.clearToothObjs();for(var t=0;t<this.mouthNode.children.length;t++){var e=P(this.toothPrefab);this.mouthNode.children[t].addChild(e)}this.dirtyTooths.splice(0,this.dirtyTooths.length);var o=2;N.randRangeNumber(0,100)>60&&(o=3),o=1;for(var i=N.randExtract(this.mouthNode.children.length,o),n=0;n<i.length;n++){var a=P(this.toothTartarPrefab);this.mouthNode.children[i[n]-1].addChild(a),this.dirtyTooths.push(a);var r=a.getComponent(v);0===this.dirtyToothIndices.length&&(this.dirtyToothIndices=r.mesh.readIndices(0));for(var s=r.mesh.readAttribute(0,B.ATTR_POSITION),h=[],l=0,c=0;c<s.length;c+=3)h.push(d(s[c],s[c+1],s[c+2])),h[l].transformMat4(a.worldMatrix),l++;for(var m=0,T=0,p=0,f=[],g=0;g<this.dirtyToothIndices.length;g+=3){m=this.dirtyToothIndices[g],T=this.dirtyToothIndices[g+1],p=this.dirtyToothIndices[g+2];var y=new u.triangle(h[m].x,h[m].y,h[m].z,h[T].x,h[T].y,h[T].z,h[p].x,h[p].y,h[p].z);f.push(y)}this.dirtyToothTriangles.push(f)}this.dirtyTooths.length>0&&(this.gameState=1)},a.onTouchStart=function(t){if(!1===this.gameStarted)this.gameStarted=!0,this.startTipNode.active=!1,this.transCamToDst();else if(this.gameStarted&&this.gameCanOper&&(1===this.gameState||3===this.gameState)){var e=t.getLocationX(),o=t.getLocationY();this.camera.screenToWorld(d(e,o,0),this.lastHandWorldPos),this.lastHandWorldPos.z=this.cleanToolOriginPos.z}},a.onTouchMove=function(t){if(this.gameCanOper){var e=t.getDelta(),o=t.getLocationX(),i=t.getLocationY();if(1===this.gameState){this.camera.screenToWorld(d(o,i,0),this.handWorldPos),this.handWorldPos.z=this.cleanToolOriginPos.z,this.tempPos.set(this.handWorldPos),this.handWorldPos.subtract(this.lastHandWorldPos),this.handWorldPos.x*=.4,this.cleanToolEffect.node.parent.getPosition(this.handCurWorldPos),this.handCurWorldPos.add(this.handWorldPos),this.cleanToolEffect.node.parent.setPosition(this.handCurWorldPos),this.lastHandWorldPos.set(this.tempPos),this.cameraRotAngle+=.04*e.x,this.cameraRotAngle>18&&(this.cameraRotAngle=18),this.cameraRotAngle<-18&&(this.cameraRotAngle=-18),p.fromEuler(this.cameraRot,0,this.cameraRotAngle,0),this.screenPointRay.o=this.camera.node.worldPosition,C.subtract(this.screenPointRay.d,this.cleanserPointNode.worldPosition,this.camera.node.worldPosition);for(var n=0;n<this.dirtyToothTriangles.length;n++)for(var a=0;a<this.dirtyToothTriangles[n].length;a++){var r=u.intersect.ray_triangle(this.screenPointRay,this.dirtyToothTriangles[n][a],!0);0!==r&&console.log("HIT="+r)}}}},a.onTouchEnd=function(t){this.touchStarted=!1,this.gameCanOper},a.onTouchCancel=function(t){this.touchStarted=!1,this.gameCanOper},a.update=function(t){},a.lateUpdate=function(t){this.mouthNode.parent.active&&this.patient.headNode.setScale(0,0,0)},e}(b)).prototype,"cameraNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(D.prototype,"patient",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(D.prototype,"startTipNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(D.prototype,"mouthNode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(D.prototype,"cleanToolEffect",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(D.prototype,"toothPrefab",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(D.prototype,"toothTartarPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=D))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/TTRecorder.ts",["cc"],(function(o){"use strict";var e;return{setters:[function(o){e=o.cclegacy}],execute:function(){e._RF.push({},"77a92OUJT5OKLkz2ujPeKO2","TTRecorder",void 0);o("default",function(){function o(){var o=this;this.recorder=null,this.clipPath="",this.recorder=tt.getGameRecorderManager(),this.recorder.onStart((function(e){console.log("** tt record start"),o.recorder.recordClip({timeRange:[1,59]})})),this.recorder.onPause((function(o){console.log("tt record pause")})),this.recorder.onResume((function(o){console.log("tt record resume")})),this.recorder.onStop((function(e){console.log("tt record stop"),o.recorder.clipVideo({path:e.videoPath,timeRange:[25,0],success:function(e){o.clipPath=e.videoPath,console.log("ClipV success="+o.clipPath)},fail:function(o){console.log("** record error="+o)}})})),this.recorder.onError((function(o){console.log("tt record error")})),this.recorder.onInterruptionBegin((function(o){console.log("tt record onInterruptionBegin")})),this.recorder.onInterruptionEnd((function(o){console.log("tt record onInterruptionEnd")}))}var e=o.prototype;return e.shareClip=function(o){void 0===o&&(o=null),console.log("CLIPPATH="+this.clipPath),""!==this.clipPath&&tt.shareVideo({videoPath:this.clipPath,success:function(e){console.log("视频分享成功"),null!==o&&o()},fail:function(o){console.log("视频分享失败")},extra:{createChallenge:!0}})},e.shareClipAdv=function(o,e,t){void 0===t&&(t=null),""!==this.clipPath&&tt.shareAppMessage({channel:"video",extra:{videoPath:this.clipPath,videoTopics:["魔力医院"],hashtag_list:["魔力医院"],video_title:"魔力医院包治百病!",createChallenge:!0},success:function(){console.log("分享视频adv成功"),null!==t&&t()},fail:function(o){console.log("分享视频adv失败")}})},e.start=function(o){void 0===o&&(o=60),this.recorder.start({duration:o})},e.stop=function(){this.recorder.stop()},o}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UnlockGameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Platform.ts","./GameMain.ts"],(function(e){"use strict";var t,n,i,o,a,c,r,l,s,d,u,p,f,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,c=e._decorator,r=e.Node,l=e.tween,s=e.Vec3,d=e.v3,u=e.Component},function(e){p=e.default,f=e.PlatformType,h=e.AdSceneId},function(e){m=e.GameMain}],execute:function(){var N,v,w,g,y,b,P,U,G,I,k;a._RF.push({},"bd0a9TD7etFbJ/GlWGMlRGg","UnlockGameUI",void 0);var B=c.ccclass,A=c.property;e("UnlockGameUI",(N=B("UnlockGameUI"),v=A({type:r}),w=A({type:r}),g=A({type:r}),y=A({type:r}),N((U=t((P=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,i(t,"wndNode",U,o(t)),i(t,"tipNode",G,o(t)),i(t,"adBtnNode",I,o(t)),i(t,"fxNode",k,o(t)),t}n(t,e);var a=t.prototype;return a.show=function(){this.node.active=!0,1===m.instance.gameData.toothGameUnlocked?(this.adBtnNode.active=!1,this.tipNode.active=!0):(this.adBtnNode.active=!0,this.tipNode.active=!1),p.currentPlatform===f.OPPO&&(m.instance.oppoNativeAd.isShowed()?m.instance.mainUI.showViewAdBtn(!0,320*p.winHeight/1334-320+300):m.instance.mainUI.showViewAdBtn(!1),m.instance.oppoNativeAd.changeBtnHeight(320*p.winHeight/1334)),this.wndNode.setScale(.4,.4,.4),l(this.wndNode).to(.3,{scale:s.ONE},{easing:"backOut"}).start()},a.close=function(){this.node.active=!1},a.onUnlockClicked=function(){var e=this;p.currentPlatform!==f.TT&&p.currentPlatform!==f.OPPO&&p.currentPlatform!==f.VIVO&&p.currentPlatform!==f.WECHAT||(p.adSceneId=h.UnlockGame,p.adTip=m.instance.mainUI.adTip,p.playVideoAd((function(){e.adBtnNode.active=!1,e.tipNode.active=!0,m.instance.gameData.unlockToothGame(),e.scheduleOnce((function(){e.onClose()}),1.5)})))},a.onClose=function(){var e=this;p.currentPlatform===f.OPPO&&(m.instance.mainUI.showViewAdBtn(!1),m.instance.oppoNativeAd.changeBtnHeight(200)),l(this.wndNode).to(.15,{scale:d(.4,.4,.4)}).call((function(){e.close()})).start()},t}(u)).prototype,"wndNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(P.prototype,"tipNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(P.prototype,"adBtnNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(P.prototype,"fxNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=P))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/UnlockRolePopUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Platform.ts","./GameMain.ts","./AudioManager.ts","./AdTip.ts","./ResultCtrl.ts"],(function(e){"use strict";var t,i,n,o,r,l,a,c,u,s,p,d,h,f,m,b,y,g,A,v,R,N,k,w,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.SkinnedMeshRenderer,c=e.Node,u=e.SkeletalAnimation,s=e.Animation,p=e.ParticleSystem,d=e.quat,h=e.tween,f=e.v3,m=e.Vec3,b=e.Quat,y=e.Component},function(e){g=e.default,A=e.PlatformType,v=e.AdSceneId},function(e){R=e.GameMain},function(e){N=e.AudioManager,k=e.AudioClipID},function(e){w=e.AdTip},function(e){P=e.ResultCtrl}],execute:function(){var M,I,T,z,B,D,S,U,O,C,Y,x,E,L,V,_,q,F,G,H,W,j,Q,Z,J,K,X,$,ee,te,ie;r._RF.push({},"a494667ZitLnI7pq3pAWbmn","UnlockRolePopUI",void 0);var ne=l.ccclass,oe=l.property;e("UnlockRolePopUI",(M=ne("UnlockRolePopUI"),I=oe({type:a}),T=oe({type:c}),z=oe({type:c}),B=oe({type:u}),D=oe({type:c}),S=oe({type:c}),U=oe({type:c}),O=oe({type:c}),C=oe({type:c}),Y=oe({type:c}),x=oe({type:w}),E=oe({type:s}),L=oe({type:p}),V=oe({type:p}),M((F=t((q=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"roleMeshRenderer",F,o(t)),n(t,"particleNode",G,o(t)),n(t,"expressionNode",H,o(t)),n(t,"roleAnim",W,o(t)),n(t,"windowNode",j,o(t)),n(t,"titleNode",Q,o(t)),n(t,"unlockBtnNode",Z,o(t)),n(t,"viewAdBtnNode",J,o(t)),n(t,"giveupBtnNode",K,o(t)),n(t,"closeBtnNode",X,o(t)),n(t,"adTip",$,o(t)),n(t,"unlockTipAnim",ee,o(t)),n(t,"effect",te,o(t)),n(t,"effect2",ie,o(t)),t.unlockSuccessAnim=!1,t.roleYDegree=0,t.roleRot=d(0,0,0,0),t.rotateA=20,t.roleMeshId=0,t}i(t,e);var r=t.prototype;return r.onLoad=function(){},r.start=function(){},r.show=function(e){this.closeBtnNode.active=!0,g.currentPlatform===A.OPPO?this.viewAdBtnNode.active=!0:this.viewAdBtnNode.active=!1,this.roleMeshId=e,this.node.active=!0,this.showRole(),g.currentPlatform!==A.TT&&(this.giveupBtnNode.active=!1,this.unlockBtnNode.active=!0)},r.hideRole=function(){this.roleAnim.node.active=!1,this.particleNode.active=!1},r.showRole=function(){this.roleMeshRenderer.mesh=R.instance.getRoleMesh(this.roleMeshId),this.roleMeshRenderer.material=R.instance.getRoleMat(this.roleMeshId),this.roleMeshRenderer.skeleton=R.instance.getRoleSkeleton(this.roleMeshId),!1===R.instance.isNeedExpression(this.roleMeshId)&&(this.expressionNode.active=!1),this.roleAnim.node.active=!0,this.particleNode.active=!0},r.hide=function(){this.close(),this.hideRole()},r.close=function(){this.node.active=!1},r.onUnlockClicked=function(){var e=this;g.currentPlatform===A.TT||g.currentPlatform===A.OPPO||g.currentPlatform===A.VIVO||g.currentPlatform===A.WECHAT?(g.adSceneId=v.RolePopUnlock,g.adTip=this.adTip,g.playVideoAd((function(){e.getRole(),g.reportRolePopUnlock(R.instance.curPatient.meshId)}))):g.currentPlatform===A.Default&&this.getRole()},r.getRole=function(){var e=this;R.instance.roleSkinData.setData(this.roleMeshId,1),this.unlockBtnNode.active=!1,this.giveupBtnNode.active=!1,this.unlockTipAnim.node.active=!0,this.unlockTipAnim.play(),this.roleAnim.play("hail1"),this.scheduleOnce((function(){e.unlockSuccessAnim=!0,e.roleYDegree=170,h(e.roleAnim.node).to(.3,{scale:f(1.1,1.1,1.1)}).to(.3,{scale:m.ONE}).call((function(){})).start()}),.5),this.scheduleOnce((function(){P.instance.onRolePopClose()}),4.5),P.instance.resultUI.audio.playOneShot(N.instance.clips[k.Unlock],1)},r.update=function(e){this.unlockSuccessAnim&&(this.rotateA+=.7*e,this.roleYDegree+=this.rotateA,this.roleYDegree>890&&(this.roleYDegree=890,this.unlockSuccessAnim=!1),b.fromEuler(this.roleRot,0,this.roleYDegree,0),this.roleAnim.node.setRotation(this.roleRot))},t}(y)).prototype,"roleMeshRenderer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(q.prototype,"particleNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(q.prototype,"expressionNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(q.prototype,"roleAnim",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(q.prototype,"windowNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(q.prototype,"titleNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(q.prototype,"unlockBtnNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(q.prototype,"viewAdBtnNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(q.prototype,"giveupBtnNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(q.prototype,"closeBtnNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(q.prototype,"adTip",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(q.prototype,"unlockTipAnim",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(q.prototype,"effect",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(q.prototype,"effect2",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=q))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/UnlockRoleUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMain.ts","./Platform.ts","./AdTip.ts","./AudioManager.ts"],(function(e){"use strict";var t,i,n,o,l,r,s,a,c,u,h,d,p,m,f,A,g,k,y,N,R,b,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,s=e.Node,a=e.SkeletalAnimation,c=e.SkinnedMeshRenderer,u=e.Animation,h=e.quat,d=e.tween,p=e.v3,m=e.Vec3,f=e.Quat,A=e.Component},function(e){g=e.GameMain},function(e){k=e.default,y=e.PlatformType,N=e.AdSceneId},function(e){R=e.AdTip},function(e){b=e.AudioManager,v=e.AudioClipID}],execute:function(){var x,M,B,C,w,I,P,T,z,S,U,D,E,O,Y,V,_,G,H,L,F,W,j,q,K,Q,J,X,Z,$,ee,te,ie,ne,oe,le,re,se,ae;l._RF.push({},"84caeL8EtpGbrR3Pi1aDKd+","UnlockRoleUI",void 0);var ce=r.ccclass,ue=r.property;e("UnlockRoleUI",(x=ce("UnlockRoleUI"),M=ue({type:s}),B=ue({type:s}),C=ue({type:s}),w=ue({type:s}),I=ue({type:s}),P=ue({type:s}),T=ue({type:s}),z=ue({type:a}),S=ue({type:a}),U=ue({type:a}),D=ue({type:c}),E=ue({type:c}),O=ue({type:c}),Y=ue({type:s}),V=ue({type:s}),_=ue({type:s}),G=ue({type:s}),H=ue({type:u}),x((W=t((F=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,n(t,"effectNode",W,o(t)),n(t,"unlockRoleNode",j,o(t)),n(t,"unlockCamNode",q,o(t)),n(t,"preBtnNode",K,o(t)),n(t,"nextBtnNode",Q,o(t)),n(t,"unlockBtnNode",J,o(t)),n(t,"unlockedTextNode",X,o(t)),n(t,"role0Anim",Z,o(t)),n(t,"role1Anim",$,o(t)),n(t,"role2Anim",ee,o(t)),n(t,"role0Mesh",te,o(t)),n(t,"role1Mesh",ie,o(t)),n(t,"role2Mesh",ne,o(t)),n(t,"expression0",oe,o(t)),n(t,"expression1",le,o(t)),n(t,"expression2",re,o(t)),n(t,"adTipNode",se,o(t)),n(t,"unlockTipAnim",ae,o(t)),t.selectedIdx=0,t.selectedRoleAnim=null,t.tweenMoving=!1,t.unlockSuccessAnim=!1,t.roleYDegree=0,t.roleRot=h(0,0,0,0),t.rotateA=20,t.adTip=null,t}i(t,e);var l=t.prototype;return l.start=function(){this.init()},l.needExpression=function(e){return 6!==e&&9!==e&&13!==e&&14!==e},l.init=function(){this.role0Anim=this.node.parent.parent.getChildByName("unlockRole").getChildByName("role0").getComponent(a),this.role1Anim=this.node.parent.parent.getChildByName("unlockRole").getChildByName("role1").getComponent(a),this.role2Anim=this.node.parent.parent.getChildByName("unlockRole").getChildByName("role2").getComponent(a),this.role0Anim.node.setPosition(-2,0,0),this.role1Anim.node.setPosition(0,0,0),this.role2Anim.node.setPosition(2,0,0),this.role0Mesh=this.role0Anim.node.getChildByName("RootNode").getChildByName("mesh").getComponent(c),this.role1Mesh=this.role1Anim.node.getChildByName("RootNode").getChildByName("mesh").getComponent(c),this.role2Mesh=this.role2Anim.node.getChildByName("RootNode").getChildByName("mesh").getComponent(c),this.selectedIdx=0,this.selectedRoleAnim=this.role1Anim,this.tweenMoving=!1,this.adTip=this.adTipNode.getComponent(R);var e=this.selectedIdx+4;this.role1Mesh.mesh=g.instance.getRoleMesh(e),this.role1Mesh.material=g.instance.getRoleMat(e),this.role1Mesh.skeleton=g.instance.getRoleSkeleton(e),!1===this.needExpression(e)?this.expression1.active=!1:this.expression1.active=!0,e=this.selectedIdx+1+4,this.role2Mesh.mesh=g.instance.getRoleMesh(e),this.role2Mesh.material=g.instance.getRoleMat(e),this.role2Mesh.skeleton=g.instance.getRoleSkeleton(e),!1===this.needExpression(e)?this.expression2.active=!1:this.expression2.active=!0,this.updatePreNextBtn(),this.updateUnlockBtn()},l.reset=function(){this.unlockCamNode=this.node.parent.parent.getChildByName("unlockRoleCam"),this.unlockRoleNode=this.node.parent.parent.getChildByName("unlockRole"),this.init()},l.show=function(){this.node.active=!0,k.currentPlatform===y.WECHAT&&this.scheduleOnce((function(){k.createInsertAd()}),1),this.unlockCamNode.active=!0,this.unlockRoleNode.active=!0,this.resetAnim()},l.close=function(){this.node.active=!1,this.unlockCamNode.active=!1,this.unlockRoleNode.active=!1},l.resetAnim=function(){this.role0Anim.play("walk4"),this.role1Anim.play("walk4"),this.role2Anim.play("walk4")},l.onPreClicked=function(){var e=this;if(!this.tweenMoving){this.tweenMoving=!0,this.resetAnim();var t=null,i=null,n=null,o=null;this.selectedRoleAnim===this.role0Anim?(t=this.role1Anim,i=this.role2Anim,n=this.role1Mesh,o=this.expression1):this.selectedRoleAnim===this.role1Anim?(t=this.role2Anim,i=this.role0Anim,n=this.role2Mesh,o=this.expression2):this.selectedRoleAnim===this.role2Anim&&(t=this.role0Anim,i=this.role1Anim,n=this.role0Mesh,o=this.expression0),d(this.selectedRoleAnim.node).to(.3,{position:p(2,0,0)}).call((function(){})).start(),d(i.node).to(.3,{position:p(0,0,0)}).call((function(){e.selectedRoleAnim=i,e.tweenMoving=!1,e.selectedIdx--;var t=e.selectedIdx-1+4;n.mesh=g.instance.getRoleMesh(t),n.material=g.instance.getRoleMat(t),n.skeleton=g.instance.getRoleSkeleton(t),!1===e.needExpression(t)?o.active=!1:o.active=!0,e.updatePreNextBtn(),e.updateUnlockBtn()})).start(),t.node.setPosition(-2,0,0)}},l.onNextClicked=function(){var e=this;if(!this.tweenMoving){this.tweenMoving=!0,this.resetAnim();var t=null,i=null,n=null,o=null;this.selectedRoleAnim===this.role0Anim?(t=this.role1Anim,i=this.role2Anim,n=this.role2Mesh,o=this.expression2):this.selectedRoleAnim===this.role1Anim?(t=this.role2Anim,i=this.role0Anim,n=this.role0Mesh,o=this.expression0):this.selectedRoleAnim===this.role2Anim&&(t=this.role0Anim,i=this.role1Anim,n=this.role1Mesh,o=this.expression1),d(this.selectedRoleAnim.node).to(.3,{position:p(-2,0,0)}).call((function(){})).start(),d(t.node).to(.3,{position:p(0,0,0)}).call((function(){e.selectedRoleAnim=t,e.tweenMoving=!1,e.selectedIdx++;var i=e.selectedIdx+1+4,l=g.instance.patientMeshs.length-1;k.currentPlatform===y.IOS&&(l=g.instance.patientMeshs.length-2),i<=l&&(n.mesh=g.instance.getRoleMesh(i),n.material=g.instance.getRoleMat(i),n.skeleton=g.instance.getRoleSkeleton(i),!1===e.needExpression(i)?o.active=!1:o.active=!0),e.updatePreNextBtn(),e.updateUnlockBtn()})).start(),i.node.setPosition(2,0,0)}},l.updatePreNextBtn=function(){this.preBtnNode.active=!0,this.nextBtnNode.active=!0,k.currentPlatform===y.IOS?(0===this.selectedIdx&&(this.preBtnNode.active=!1),9===this.selectedIdx&&(this.nextBtnNode.active=!1)):(0===this.selectedIdx&&(this.preBtnNode.active=!1),12===this.selectedIdx&&(this.nextBtnNode.active=!1))},l.updateUnlockBtn=function(){g.instance.roleSkinData.isUnlocked(this.selectedIdx+4)?(this.unlockBtnNode.active=!1,this.unlockedTextNode.active=!0):(this.unlockBtnNode.active=!0,this.unlockedTextNode.active=!1)},l.unlockClicked=function(){var e=this;k.currentPlatform===y.TT||k.currentPlatform===y.OPPO||k.currentPlatform===y.VIVO||k.currentPlatform===y.WECHAT?(k.adSceneId=N.RoleUnlock,k.adTip=this.adTip,k.playVideoAd((function(){e.getRole()}))):k.currentPlatform===y.Default&&this.getRole()},l.getRole=function(){var e=this;g.instance.roleSkinData.setData(this.selectedIdx+4,1),k.reportRoleUnlock(this.selectedIdx+4),this.updateUnlockBtn(),b.playClip(v.Unlock),this.unlockTipAnim.node.active=!0,this.unlockTipAnim.play(),this.selectedRoleAnim.play("hail1"),this.scheduleOnce((function(){e.unlockTipAnim.stop(),e.unlockTipAnim.node.active=!1})),this.scheduleOnce((function(){e.unlockSuccessAnim=!0,e.roleYDegree=170,d(e.selectedRoleAnim.node).to(.3,{scale:p(1.1,1.1,1.1)}).to(.3,{scale:m.ONE}).call((function(){})).start()}),.5)},l.update=function(e){this.unlockSuccessAnim&&(this.rotateA+=.7*e,this.roleYDegree+=this.rotateA,this.roleYDegree>890&&(this.roleYDegree=890,this.unlockSuccessAnim=!1),f.fromEuler(this.roleRot,0,this.roleYDegree,0),this.selectedRoleAnim.node.setRotation(this.roleRot))},t}(A)).prototype,"effectNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(F.prototype,"unlockRoleNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(F.prototype,"unlockCamNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(F.prototype,"preBtnNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(F.prototype,"nextBtnNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(F.prototype,"unlockBtnNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(F.prototype,"unlockedTextNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(F.prototype,"role0Anim",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(F.prototype,"role1Anim",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(F.prototype,"role2Anim",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(F.prototype,"role0Mesh",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(F.prototype,"role1Mesh",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(F.prototype,"role2Mesh",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(F.prototype,"expression0",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(F.prototype,"expression1",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(F.prototype,"expression2",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(F.prototype,"adTipNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(F.prototype,"unlockTipAnim",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=F))||L));l._RF.pop()}}}));

System.register("chunks:///_virtual/UpgradeLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMain.ts","./AudioManager.ts","./DataStorage.ts","./Platform.ts"],(function(e){"use strict";var a,t,o,l,i,r,s,n,p,u,d,h,m,g,c,v,f,_,L,I;return{setters:[function(e){a=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,s=e.AnimationClip,n=e.Node,p=e.ParticleSystem,u=e.Material,d=e.v3,h=e.MeshRenderer,m=e.tween,g=e.Animation,c=e.Component},function(e){v=e.GameMain},function(e){f=e.AudioManager,_=e.AudioClipID},function(e){L=e.default},function(e){I=e.default}],execute:function(){var b,R,y,F,U,W,E,q,C,N,P,T,M,H,w,B,A,O,k,x,z,S,G,D;i._RF.push({},"a9cf4qyYI9PqoED9yAvmUnt","UpgradeLogic",void 0);var j=r.ccclass,Y=r.property;e("UpgradeLogic",(b=j("UpgradeLogic"),R=Y({type:s}),y=Y({type:n}),F=Y({type:p}),U=Y({type:p}),W=Y({type:p}),E=Y({type:p}),q=Y({type:[n]}),C=Y({type:[p]}),N=Y({type:[u]}),P=Y({type:[u]}),b(((D=function(e){function a(){for(var a,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return a=e.call.apply(e,[this].concat(i))||this,o(a,"scaleAnimClip",H,l(a)),o(a,"hallNode",w,l(a)),o(a,"hallFloorParticle",B,l(a)),o(a,"hallWallParticle",A,l(a)),o(a,"roomFloorParticle",O,l(a)),o(a,"roomWallParticle",k,l(a)),o(a,"roomNodes",x,l(a)),o(a,"smokeEffects",z,l(a)),o(a,"floorMats",S,l(a)),o(a,"wallMats",G,l(a)),a.roomOffsetPos=[d(-117,138,-152),d(-120,141,-146),d(-122.8,148,-138),d(-125,151.7,-135),d(-90,140,-155),d(-92.3,144.9,-149.4),d(-95.6,150.3,-142),d(-98.58,154.4,-136)],a.upgradeRoomId=0,a.upgradeEquipmentLevel=0,a.upgradeWallLevel=0,a.upgradeFloorLevel=0,a.upgradeHallLevel=0,a.isInGuide=!1,a}t(a,e);var i=a.prototype;return i.onLoad=function(){},i.start=function(){},i.save=function(){var e={upgradeRoomId:this.upgradeRoomId,upgradeEquipmentLevel:this.upgradeEquipmentLevel,upgradeFloorLevel:this.upgradeFloorLevel,upgradeWallLevel:this.upgradeWallLevel,upgradeHallLevel:this.upgradeHallLevel};L.save(a.dataName,e)},i.load=function(){if(L.dataExist(a.dataName)){var e=L.load(a.dataName);this.upgradeRoomId=e.upgradeRoomId,this.upgradeEquipmentLevel=e.upgradeEquipmentLevel,this.upgradeFloorLevel=e.upgradeFloorLevel,this.upgradeWallLevel=e.upgradeWallLevel,this.upgradeHallLevel=e.upgradeHallLevel}else this.resetData(),this.save()},i.resetData=function(){this.upgradeRoomId=0,this.upgradeEquipmentLevel=0,this.upgradeFloorLevel=0,this.upgradeWallLevel=0,this.upgradeHallLevel=0},i.clearData=function(){L.delete(a.dataName)},i.setupScene=function(){this.setupRoom(),this.setupHall()},i.setupHall=function(){for(var e=null,t=0;t<a.hallTable.length;t++)for(var o=0;o<a.hallTable[t].length;o++)e=this.hallNode.getChildByName(a.hallTable[t][o]),this.upgradeHallLevel>t?e.active=!0:e.active=!1;this.setHallFloorMaterial(),this.setHallWallMaterial()},i.setupRoom=function(){for(var e=null,t=0;t<a.equipmentTable.length;t++)if(this.upgradeRoomId===t){for(var o=0;o<a.equipmentTable[t].length;o++)for(var l=0;l<a.equipmentTable[t][o].length;l++)e=this.roomNodes[t].getChildByName(a.equipmentTable[t][o][l]),this.upgradeEquipmentLevel>o?e.active=!0:e.active=!1;this.setRoomFloorMaterial(this.roomNodes[t],a.matTable[t][this.upgradeFloorLevel]),this.setRoomWallMaterial(this.roomNodes[t],a.matTable[t][this.upgradeWallLevel])}else if(this.upgradeRoomId>t){for(var i=0;i<a.equipmentTable[t].length;i++)for(var r=0;r<a.equipmentTable[t][i].length;r++)(e=this.roomNodes[t].getChildByName(a.equipmentTable[t][i][r])).active=!0;var s=a.matTable[t].length-1;this.setRoomFloorMaterial(this.roomNodes[t],a.matTable[t][s]),this.setRoomWallMaterial(this.roomNodes[t],a.matTable[t][s])}else if(this.upgradeRoomId<t){for(var n=0;n<a.equipmentTable[t].length;n++)for(var p=0;p<a.equipmentTable[t][n].length;p++)(e=this.roomNodes[t].getChildByName(a.equipmentTable[t][n][p])).active=!1;this.setRoomFloorMaterial(this.roomNodes[t],a.matTable[t][0]),this.setRoomWallMaterial(this.roomNodes[t],a.matTable[t][0])}},i.setRoomFloorMaterial=function(e,a){e.getChildByName("floor").getComponent(h).material=this.floorMats[a]},i.setRoomWallMaterial=function(e,a){e.getComponent(h).material=this.wallMats[a]},i.setHallFloorMaterial=function(){this.hallNode.getChildByName("floor").getComponent(h).material=this.floorMats[this.upgradeHallLevel]},i.setHallWallMaterial=function(){this.hallNode.getComponent(h).material=this.wallMats[this.upgradeHallLevel]},i.startGuide0=function(){this.isInGuide=!0,v.instance.mainUI.displayUpgradeUI(),v.instance.mainUI.continueBtnNode.active=!1,v.instance.mainUI.upgradeUI.setEquipmentBtnEnable(!1),v.instance.mainUI.upgradeUI.setWallBtnEnable(!1),v.instance.mainUI.upgradeUI.setFloorBtnEnable(!1),this.scheduleOnce((function(){v.instance.mainUI.upgradeUI.showGuide()}),.5)},i.isGuide0Completed=function(){return this.upgradeRoomId>0||0===this.upgradeRoomId&&this.upgradeEquipmentLevel>0},i.startUpgradeEquipment=function(){var e=this;m(v.instance.camera.node).to(.5,{position:this.roomOffsetPos[this.upgradeRoomId]}).call((function(){e.upgradeEquipment()})).start()},i.startUpgradeHall=function(){var e=this;m(v.instance.camera.node).to(.5,{position:v.instance.overlookCamPos}).call((function(){e.upgradeHall()})).start()},i.startUpgradeFloor=function(){var e=this;m(v.instance.camera.node).to(.5,{position:this.roomOffsetPos[this.upgradeRoomId]}).call((function(){e.upgradeFloor()})).start()},i.upgradeFloor=function(){var e=this;this.upgradeFloorLevel>=a.matTable[this.upgradeRoomId].length-1||(this.upgradeFloorLevel++,0===this.upgradeRoomId&&1===this.upgradeFloorLevel||(I.reportRoomUpgrade(this.upgradeRoomId,this.upgradeEquipmentLevel,this.upgradeFloorLevel,this.upgradeWallLevel),this.save()),this.setRoomFloorMaterial(this.roomNodes[this.upgradeRoomId],a.matTable[this.upgradeRoomId][this.upgradeFloorLevel]),this.playRoomFloorEffect(),f.playClip(_.Upgrade),this.scheduleOnce((function(){e.upgradeFloorCompleted()}),1.5))},i.startUpgradeWall=function(){var e=this;m(v.instance.camera.node).to(.5,{position:this.roomOffsetPos[this.upgradeRoomId]}).call((function(){e.upgradeWall()})).start()},i.upgradeWall=function(){var e=this;this.upgradeWallLevel>=a.matTable[this.upgradeRoomId].length-1||(this.upgradeWallLevel++,0===this.upgradeRoomId&&1===this.upgradeWallLevel||(I.reportRoomUpgrade(this.upgradeRoomId,this.upgradeEquipmentLevel,this.upgradeFloorLevel,this.upgradeWallLevel),this.save()),this.playRoomWallEffect(),this.setRoomWallMaterial(this.roomNodes[this.upgradeRoomId],a.matTable[this.upgradeRoomId][this.upgradeWallLevel]),f.playClip(_.Upgrade),this.scheduleOnce((function(){e.upgradeWallCompleted()}),1.5))},i.upgradeHall=function(){for(var e=this,t=null,o=0;o<a.hallTable[this.upgradeHallLevel].length;o++)(t=this.hallNode.getChildByName(a.hallTable[this.upgradeHallLevel][o])).active=!0,this.applyScaleAnim(t),this.smokeEffects[o].node.setPosition(t.worldPosition),this.smokeEffects[o].play();this.playHallFloorWallEffect(),f.playClip(_.Upgrade),this.upgradeHallLevel++,this.save(),I.reportHallUpgrade(this.upgradeHallLevel),this.setHallFloorMaterial(),this.setHallWallMaterial(),this.scheduleOnce((function(){e.upgradeHallCompleted()}),1.5)},i.playHallFloorWallEffect=function(){this.hallFloorParticle.node.parent.active=!0,this.hallFloorParticle.node.parent.getComponent(g).play(),this.hallFloorParticle.play(),this.hallWallParticle.node.parent.active=!0,this.hallWallParticle.node.parent.getComponent(g).play(),this.hallWallParticle.play()},i.playRoomFloorEffect=function(){this.roomFloorParticle.node.parent.active=!0,this.roomFloorParticle.node.parent.getComponent(g).play(),this.roomFloorParticle.play(),this.roomFloorParticle.node.parent.setPosition(this.roomNodes[this.upgradeRoomId].worldPosition)},i.playRoomWallEffect=function(){this.roomWallParticle.node.parent.active=!0,this.roomWallParticle.node.parent.getComponent(g).play(),this.roomWallParticle.play(),this.roomWallParticle.node.parent.setPosition(this.roomNodes[this.upgradeRoomId].worldPosition)},i.upgradeHallCompleted=function(){v.instance.mainUI.upgradeUI.updateHallBtn(),this.upgradeHallLevel===a.roomMaxNum&&this.upgradeRoomId===a.roomMaxNum-1||this.upgradeRoomId<a.roomMaxNum-1&&(this.upgradeRoomId++,this.upgradeEquipmentLevel=0,this.upgradeFloorLevel=0,this.upgradeWallLevel=0,this.save(),v.instance.isCamOverlook&&v.instance.mainUI.upgradeUI.hideHallBtnAndShowRoomBtn())},i.isHallFullLevel=function(){return this.upgradeHallLevel>=a.hallTable.length},i.isFullLevel=function(){return this.upgradeHallLevel===a.roomMaxNum&&this.upgradeRoomId===a.roomMaxNum-1},i.upgradeEquipment=function(){var e=this;if(!(this.upgradeEquipmentLevel>a.equipmentTable[this.upgradeRoomId].length-1)){for(var t=0;t<a.equipmentTable[this.upgradeRoomId][this.upgradeEquipmentLevel].length;t++){var o=a.equipmentTable[this.upgradeRoomId][this.upgradeEquipmentLevel][t],l=this.roomNodes[this.upgradeRoomId].getChildByName(o);l.active=!0,this.applyScaleAnim(l),this.smokeEffects[t].node.setPosition(l.worldPosition),this.smokeEffects[t].play()}this.upgradeEquipmentLevel++,0===this.upgradeRoomId&&1===this.upgradeEquipmentLevel||(I.reportRoomUpgrade(this.upgradeRoomId,this.upgradeEquipmentLevel,this.upgradeFloorLevel,this.upgradeWallLevel),this.save()),f.playClip(_.Upgrade),this.scheduleOnce((function(){e.upgradeEquipmentCompleted()}),1.5)}},i.upgradeEquipmentCompleted=function(){0===this.upgradeRoomId&&1===this.upgradeEquipmentLevel?v.instance.mainUI.upgradeUI.showGuideBubble2():v.instance.mainUI.upgradeUI.updateBtn(),this.isRoomMaxLevel()&&v.instance.isCamOverlook&&v.instance.mainUI.upgradeUI.hideRoomBtnAndShowHallBtn()},i.upgradeFloorCompleted=function(){0===this.upgradeRoomId&&1===this.upgradeFloorLevel?v.instance.mainUI.upgradeUI.showGuideBubble3():v.instance.mainUI.upgradeUI.updateBtn(),this.isRoomMaxLevel()&&v.instance.isCamOverlook&&v.instance.mainUI.upgradeUI.hideRoomBtnAndShowHallBtn()},i.upgradeWallCompleted=function(){0===this.upgradeRoomId&&1===this.upgradeWallLevel?v.instance.mainUI.upgradeUI.showGuideBubble4():v.instance.mainUI.upgradeUI.updateBtn(),this.isRoomMaxLevel()&&v.instance.isCamOverlook&&v.instance.mainUI.upgradeUI.hideRoomBtnAndShowHallBtn()},i.isRoomMaxLevel=function(){var e=a.priceTable[this.upgradeRoomId].length;return this.upgradeEquipmentLevel>=e&&this.upgradeFloorLevel>=e&&this.upgradeWallLevel>=e},i.getEquipmentPrice=function(){var e=a.priceTable[this.upgradeRoomId].length;return this.upgradeEquipmentLevel>=e?-1:a.priceTable[this.upgradeRoomId][this.upgradeEquipmentLevel]},i.getFloorPrice=function(){var e=a.priceTable[this.upgradeRoomId].length;return this.upgradeFloorLevel>=e?-1:a.priceTable[this.upgradeRoomId][this.upgradeFloorLevel]},i.getWallPrice=function(){var e=a.priceTable[this.upgradeRoomId].length;return this.upgradeWallLevel>=e?-1:a.priceTable[this.upgradeRoomId][this.upgradeWallLevel]},i.applyScaleAnim=function(e){var a=e.getComponent(g);null===a&&(a=e.addComponent(g)),a.defaultClip=this.scaleAnimClip,a.play()},a}(c)).dataName="magichospital_upgrade",D.roomMaxNum=8,D.priceTable=[[50,100],[200,300,400],[500,600,700,800],[600,700,800,900],[800,900,1e3,1200,1500],[800,900,1e3,1200,1500],[800,900,1e3,1200,1500,1800],[800,900,1e3,1200,1500,1800]],D.equipmentTable=[[["bed_1","light_1"],["pos_2","pos_1"]],[["pos_4","pos_1"],["pos_3","pos_5"],["pos_2"]],[["pos_5"],["pos_3"],["pos_4"],["pos_1","pos_2"]],[["pos_2","pos_3"],["pos_1"],["pos_5"],["pos_4"]],[["pos_2","pos_4","pos_5"],["chair_2"],["pos_1"],["pos_3"],["chair_4"]],[["chair_4"],["pos_3","pos_5"],["carpet_2"],["pos_4"],["pos_2"]],[["pos_1_1","pos_1_2"],["pos_2_1","pos_2_2","pos_2_3","pos_2_4"],["pos_3"],["pos_4"],["pos_5"],["pos_6"]],[["pos_1"],["pos_2"],["pos_3"],["pos_4"],["pos_5"],["pos_6"]]],D.hallTable=[["pos_1_1"],["pos_2_1","pos_2_2","pos_2_3","pos_2_4"],["pos_3_1"],["pos_4_1","pos_4_2","pos_4_3","pos_4_4","pos_4_5","pos_4_6"],["pos_5_1"],["pos_6_1","pos_6_2","pos_6_3","pos_6_4","pos_6_5","pos_6_6"],["pos_7_1","pos_7_2","pos_7_3","pos_7_4","pos_7_5","pos_7_6"],["pos_8_1","pos_8_2"]],D.matTable=[[0,3,8],[0,3,5,8],[0,1,3,5,8],[0,1,3,5,8],[0,1,3,4,5,8],[0,1,3,4,5,8],[0,1,3,4,5,7,8],[0,1,3,4,5,7,8]],D.hallMatTable=[0,1,2,3,4,5,6,7,8],H=a((M=D).prototype,"scaleAnimClip",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=a(M.prototype,"hallNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=a(M.prototype,"hallFloorParticle",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=a(M.prototype,"hallWallParticle",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=a(M.prototype,"roomFloorParticle",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=a(M.prototype,"roomWallParticle",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=a(M.prototype,"roomNodes",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=a(M.prototype,"smokeEffects",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=a(M.prototype,"floorMats",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=a(M.prototype,"wallMats",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=M))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/UpgradeUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMain.ts","./Platform.ts"],(function(e){"use strict";var t,n,i,a,l,o,s,d,r,u,c,h,p,B,g,b,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,s=e.Button,d=e.Label,r=e.Node,u=e.tween,c=e.v3,h=e.Vec3,p=e.Component},function(e){B=e.GameMain},function(e){g=e.default,b=e.PlatformType,m=e.AdSceneId}],execute:function(){var v,f,L,N,y,w,P,q,F,E,A,C,O,T,I;l._RF.push({},"64700Ayt6JDAL5hGm1R8vag","UpgradeUI",void 0);var G=o.ccclass,k=o.property;e("UpgradeUI",(v=G("UpgradeUI"),f=k({type:s}),L=k({type:s}),N=k({type:s}),y=k({type:s}),w=k({type:d}),P=k({type:r}),v((E=t((F=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,i(t,"equipmentBtn",E,a(t)),i(t,"wallBtn",A,a(t)),i(t,"floorBtn",C,a(t)),i(t,"hallBtn",O,a(t)),i(t,"guideLabel",T,a(t)),i(t,"guideFingerNode",I,a(t)),t.equipmentBuyBtnNode=null,t.floorBuyBtnNode=null,t.wallBuyBtnNode=null,t.equipmentAdBtnNode=null,t.floorAdBtnNode=null,t.wallAdBtnNode=null,t.hallAdBtnNode=null,t.equipmentPriceLabel=null,t.floorPriceLabel=null,t.wallPriceLabel=null,t.equipmentFullLevelLabelNode=null,t.floorFullLevelLabelNode=null,t.wallFullLevelLabelNode=null,t.hallFullLevelLabelNode=null,t.btnInTween=!1,t}n(t,e);var l=t.prototype;return l.onLoad=function(){this.equipmentBuyBtnNode=this.equipmentBtn.node.getChildByName("btnBuy"),this.floorBuyBtnNode=this.floorBtn.node.getChildByName("btnBuy"),this.wallBuyBtnNode=this.wallBtn.node.getChildByName("btnBuy"),this.equipmentAdBtnNode=this.equipmentBtn.node.getChildByName("btnAd"),this.floorAdBtnNode=this.floorBtn.node.getChildByName("btnAd"),this.wallAdBtnNode=this.wallBtn.node.getChildByName("btnAd"),this.hallAdBtnNode=this.hallBtn.node.getChildByName("btnAd"),this.equipmentPriceLabel=this.equipmentBuyBtnNode.getChildByName("Label").getComponent(d),this.floorPriceLabel=this.floorBuyBtnNode.getChildByName("Label").getComponent(d),this.wallPriceLabel=this.wallBuyBtnNode.getChildByName("Label").getComponent(d),this.equipmentFullLevelLabelNode=this.equipmentBtn.node.getChildByName("fullLevelLabel"),this.floorFullLevelLabelNode=this.floorBtn.node.getChildByName("fullLevelLabel"),this.wallFullLevelLabelNode=this.wallBtn.node.getChildByName("fullLevelLabel"),this.hallFullLevelLabelNode=this.hallBtn.node.getChildByName("fullLevelLabel")},l.start=function(){},l.show=function(){this.node.active=!0,this.equipmentBtn.node.parent.setPosition(-200,-200,0),this.wallBtn.node.parent.setPosition(200,-200,0),this.floorBtn.node.parent.setPosition(0,-200,0),this.hallBtn.node.parent.setPosition(0,-200,0),B.instance.upgradeLogic.isFullLevel()||B.instance.upgradeLogic.isRoomMaxLevel()?(this.equipmentBtn.node.parent.active=!1,this.wallBtn.node.parent.active=!1,this.floorBtn.node.parent.active=!1,this.hallBtn.node.parent.active=!0,this.updateHallBtn()):(this.equipmentBtn.node.parent.active=!0,this.wallBtn.node.parent.active=!0,this.floorBtn.node.parent.active=!0,this.hallBtn.node.parent.active=!1,this.updateBtn()),u(this.equipmentBtn.node.parent).to(.6,{position:c(-200,340,0)},{easing:"backOut"}).start(),u(this.wallBtn.node.parent).to(.6,{position:c(200,340,0)},{easing:"backOut"}).start(),u(this.floorBtn.node.parent).to(.6,{position:c(0,340,0)},{easing:"backOut"}).start(),this.hallBtn.node.active&&u(this.hallBtn.node.parent).to(.6,{position:c(0,340,0)},{easing:"backOut"}).start()},l.updateBtn=function(){var e=this.equipmentBtn.node.getChildByName("level").getComponent(d);e.string="等级 "+(B.instance.upgradeLogic.upgradeEquipmentLevel+1),(e=this.floorBtn.node.getChildByName("level").getComponent(d)).string="等级 "+(B.instance.upgradeLogic.upgradeFloorLevel+1),(e=this.wallBtn.node.getChildByName("level").getComponent(d)).string="等级 "+(B.instance.upgradeLogic.upgradeWallLevel+1);var t=B.instance.upgradeLogic.getEquipmentPrice();t<0?(this.equipmentBuyBtnNode.active=!1,this.equipmentAdBtnNode.active=!1,this.equipmentFullLevelLabelNode.active=!0,this.setEquipmentBtnEnable(!1)):(this.setEquipmentBtnEnable(!0),this.equipmentFullLevelLabelNode.active=!1,B.instance.gameData.money>=t?(this.equipmentBuyBtnNode.active=!0,this.equipmentAdBtnNode.active=!1,this.equipmentPriceLabel.string=""+t):(this.equipmentBuyBtnNode.active=!1,this.equipmentAdBtnNode.active=!0)),(t=B.instance.upgradeLogic.getFloorPrice())<0?(this.floorBuyBtnNode.active=!1,this.floorAdBtnNode.active=!1,this.floorFullLevelLabelNode.active=!0,this.setFloorBtnEnable(!1)):(this.setFloorBtnEnable(!0),this.floorFullLevelLabelNode.active=!1,B.instance.gameData.money>=t?(this.floorBuyBtnNode.active=!0,this.floorAdBtnNode.active=!1,this.floorPriceLabel.string=""+t):(this.floorBuyBtnNode.active=!1,this.floorAdBtnNode.active=!0)),(t=B.instance.upgradeLogic.getWallPrice())<0?(this.wallBuyBtnNode.active=!1,this.wallAdBtnNode.active=!1,this.wallFullLevelLabelNode.active=!0,this.setWallBtnEnable(!1)):(this.setWallBtnEnable(!0),this.wallFullLevelLabelNode.active=!1,B.instance.gameData.money>=t?(this.wallBuyBtnNode.active=!0,this.wallAdBtnNode.active=!1,this.wallPriceLabel.string=""+t):(this.wallBuyBtnNode.active=!1,this.wallAdBtnNode.active=!0))},l.updateHallBtn=function(){this.hallBtn.node.getChildByName("level").getComponent(d).string="等级 "+(B.instance.upgradeLogic.upgradeHallLevel+1),B.instance.upgradeLogic.isHallFullLevel()?(this.hallAdBtnNode.active=!1,this.hallFullLevelLabelNode.active=!0,this.setHallBtnEnable(!1)):(this.hallAdBtnNode.active=!0,this.hallFullLevelLabelNode.active=!1,this.setHallBtnEnable(!0))},l.hide=function(){u(this.equipmentBtn.node.parent).to(.6,{position:c(-200,-200,0)},{easing:"backOut"}).start(),u(this.wallBtn.node.parent).to(.6,{position:c(200,-200,0)},{easing:"backOut"}).start(),u(this.floorBtn.node.parent).to(.6,{position:c(0,-200,0)},{easing:"backOut"}).start(),u(this.hallBtn.node.parent).to(.6,{position:c(0,-200,0)},{easing:"backOut"}).start()},l.hideRoomBtnAndShowHallBtn=function(){var e=this;this.hallBtn.node.parent.active||(this.btnInTween=!0,this.equipmentBtn.node.parent.active=!1,this.floorBtn.node.parent.active=!1,this.wallBtn.node.parent.active=!1,this.updateHallBtn(),this.hallBtn.node.parent.active=!0,this.hallBtn.node.parent.setPosition(0,-200,0),u(this.hallBtn.node.parent).to(.6,{position:c(0,340,0)},{easing:"backOut"}).call((function(){e.btnInTween=!1})).start())},l.hideHallBtnAndShowRoomBtn=function(){var e=this;this.btnInTween=!0,this.hallBtn.node.parent.active=!1,this.equipmentBtn.node.parent.active=!0,this.floorBtn.node.parent.active=!0,this.wallBtn.node.parent.active=!0,this.equipmentBtn.node.parent.setPosition(-200,-200,0),this.wallBtn.node.parent.setPosition(200,-200,0),this.floorBtn.node.parent.setPosition(0,-200,0),this.updateBtn(),u(this.equipmentBtn.node.parent).to(.6,{position:c(-200,340,0)},{easing:"backOut"}).start(),u(this.wallBtn.node.parent).to(.6,{position:c(200,340,0)},{easing:"backOut"}).start(),u(this.floorBtn.node.parent).to(.6,{position:c(0,340,0)},{easing:"backOut"}).call((function(){e.btnInTween=!1})).start()},l.setEquipmentBtnEnable=function(e){this.equipmentBtn.enabled=e,this.equipmentBtn.node.getChildByName("arrow").active=e},l.setHallBtnEnable=function(e){this.hallBtn.enabled=e,this.hallBtn.node.getChildByName("arrow").active=e},l.setWallBtnEnable=function(e){this.wallBtn.enabled=e,this.wallBtn.node.getChildByName("arrow").active=e},l.setFloorBtnEnable=function(e){this.floorBtn.enabled=e,this.floorBtn.node.getChildByName("arrow").active=e},l.showGuide=function(){var e=this;this.guideLabel.string="",this.guideLabel.node.parent.parent.active=!0,this.guideLabel.node.parent.active=!1,this.guideLabel.node.parent.parent.setPosition(-700,667,0),u(this.guideLabel.node.parent.parent).to(.35,{position:c(0,667,0)},{easing:"backOut"}).call((function(){e.showGuideBubble()})).start()},l.hideGuide=function(){this.guideLabel.node.parent.parent.active=!1},l.hideGuideTween=function(){u(this.guideLabel.node.parent.parent).to(.6,{position:c(-700,667,0)},{easing:"backOut"}).start()},l.showGuideBubble=function(){var e=this;this.guideLabel.node.parent.active=!0,this.guideLabel.node.parent.setScale(.3,.3,.3),this.guideLabel.string="金币可以升级医院设施",u(this.guideLabel.node.parent).to(.6,{scale:h.ONE},{easing:"backOut"}).call((function(){e.setEquipmentBtnEnable(!0),e.showGuideFinger(0)})).start()},l.showGuideBubble2=function(){var e=this;this.guideLabel.node.parent.parent.active=!0,this.guideLabel.node.parent.active=!0,this.guideLabel.node.parent.setScale(.3,.3,.3),this.guideLabel.string="金币还能升级医院地板",u(this.guideLabel.node.parent).to(.6,{scale:h.ONE},{easing:"backOut"}).call((function(){e.setFloorBtnEnable(!0),e.showGuideFinger(1)})).start()},l.showGuideBubble3=function(){var e=this;this.guideLabel.node.parent.parent.active=!0,this.guideLabel.node.parent.active=!0,this.guideLabel.node.parent.setScale(.3,.3,.3),this.guideLabel.string="哇！还能升级墙面！",u(this.guideLabel.node.parent).to(.6,{scale:h.ONE},{easing:"backOut"}).call((function(){e.setWallBtnEnable(!0),e.showGuideFinger(2)})).start()},l.showGuideBubble4=function(){var e=this;B.instance.upgradeLogic.save(),this.guideLabel.node.parent.parent.active=!0,this.guideLabel.node.parent.active=!0,this.guideLabel.node.parent.setScale(.3,.3,.3),this.guideLabel.string="你做的太棒了！",u(this.guideLabel.node.parent).to(.6,{scale:h.ONE},{easing:"backOut"}).start(),this.scheduleOnce((function(){e.showGuideBubble5()}),1.5)},l.showGuideBubble5=function(){var e=this;this.guideLabel.node.parent.parent.active=!0,this.guideLabel.node.parent.active=!0,this.guideLabel.node.parent.setScale(.3,.3,.3),this.guideLabel.string="现在让我们回到游戏吧！",u(this.guideLabel.node.parent).to(.6,{scale:h.ONE},{easing:"backOut"}).start(),this.scheduleOnce((function(){e.hideGuideTween(),e.hide(),B.instance.mainUI.displayContinueBtn()}),2),this.scheduleOnce((function(){e.showGuideFinger(3)}),2.5)},l.showGuideFinger=function(e){this.guideFingerNode.active=!0,0===e?this.guideFingerNode.setPosition(-127,240,0):1===e?this.guideFingerNode.setPosition(73,240,0):2===e?this.guideFingerNode.setPosition(273,240,0):3===e&&this.guideFingerNode.setPosition(245,550,0)},l.hideGuideFinger=function(){this.guideFingerNode.active=!1},l.onEquipmentBtnClicked=function(){var e=this;if(this.setEquipmentBtnEnable(!1),this.hideGuideFinger(),this.hideGuide(),!0===this.equipmentBuyBtnNode.active&&!1===this.equipmentAdBtnNode.active){var t=B.instance.upgradeLogic.getEquipmentPrice();B.instance.gameData.money>=t&&(B.instance.gameData.addMoney(-t),B.instance.mainUI.updateMoneyDisplay(),B.instance.upgradeLogic.startUpgradeEquipment())}else!1===this.equipmentBuyBtnNode.active&&!0===this.equipmentAdBtnNode.active&&(g.currentPlatform!==b.TT&&g.currentPlatform!==b.OPPO&&g.currentPlatform!==b.VIVO&&g.currentPlatform!==b.WECHAT||(g.adSceneId=m.EquipmentBtn,g.adTip=B.instance.mainUI.adTip,g.playVideoAd((function(){B.instance.upgradeLogic.startUpgradeEquipment()}),(function(){e.setEquipmentBtnEnable(!0)}))))},l.onHallBtnClicked=function(){var e=this;this.setHallBtnEnable(!1),g.currentPlatform!==b.TT&&g.currentPlatform!==b.OPPO&&g.currentPlatform!==b.VIVO&&g.currentPlatform!==b.WECHAT||(g.adSceneId=m.HallBtn,g.adTip=B.instance.mainUI.adTip,g.playVideoAd((function(){B.instance.upgradeLogic.startUpgradeHall()}),(function(){e.setHallBtnEnable(!0)})))},l.onFloorBtnClicked=function(){var e=this;if(this.setFloorBtnEnable(!1),this.hideGuideFinger(),this.hideGuide(),!0===this.floorBuyBtnNode.active&&!1===this.floorAdBtnNode.active){var t=B.instance.upgradeLogic.getFloorPrice();B.instance.gameData.money>=t&&(B.instance.gameData.addMoney(-t),B.instance.mainUI.updateMoneyDisplay(),B.instance.upgradeLogic.startUpgradeFloor())}else!1===this.floorBuyBtnNode.active&&!0===this.floorAdBtnNode.active&&(g.currentPlatform!==b.TT&&g.currentPlatform!==b.OPPO&&g.currentPlatform!==b.VIVO&&g.currentPlatform!==b.WECHAT||(g.adSceneId=m.FloorBtn,g.adTip=B.instance.mainUI.adTip,g.playVideoAd((function(){B.instance.upgradeLogic.startUpgradeFloor()}),(function(){e.setFloorBtnEnable(!0)}))))},l.onWallBtnClicked=function(){var e=this;if(this.setWallBtnEnable(!1),this.hideGuideFinger(),this.hideGuide(),!0===this.wallBuyBtnNode.active&&!1===this.wallAdBtnNode.active){var t=B.instance.upgradeLogic.getWallPrice();B.instance.gameData.money>=t&&(B.instance.gameData.addMoney(-t),B.instance.mainUI.updateMoneyDisplay(),B.instance.upgradeLogic.startUpgradeWall())}else!1===this.wallBuyBtnNode.active&&!0===this.wallAdBtnNode.active&&(g.currentPlatform!==b.TT&&g.currentPlatform!==b.OPPO&&g.currentPlatform!==b.VIVO&&g.currentPlatform!==b.WECHAT||(g.adSceneId=m.WallBtn,g.adTip=B.instance.mainUI.adTip,g.playVideoAd((function(){B.instance.upgradeLogic.startUpgradeWall()}),(function(){e.setWallBtnEnable(!0)}))))},t}(p)).prototype,"equipmentBtn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(F.prototype,"wallBtn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(F.prototype,"floorBtn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(F.prototype,"hallBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(F.prototype,"guideLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(F.prototype,"guideFingerNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=F))||q));l._RF.pop()}}}));

System.register("chunks:///_virtual/UpsizeGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Patient.ts","./GameMain.ts","./Util.ts","./Platform.ts","./AudioManager.ts","./OppoNativeAd.ts"],(function(t){"use strict";var e,i,n,a,s,o,r,c,l,p,h,u,f,d,m,g,y,P,S,v,b,E,N,A,R,T,C,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,r=t.Node,c=t.Canvas,l=t.Sprite,p=t.ParticleSystem,h=t.Animation,u=t.Prefab,f=t.v3,d=t.quat,m=t.Camera,g=t.Quat,y=t.tween,P=t.systemEvent,S=t.SystemEvent,v=t.director,b=t.Component},function(t){E=t.Patient},function(t){N=t.GameMain},function(t){A=t.default},function(t){R=t.default,T=t.PlatformType},function(t){C=t.AudioManager},function(t){w=t.OppoNativeAd}],execute:function(){var O,z,k,D,L,M,I,U,x,B,H,F,_,G,W,Y,j,q,Q,V,X,J,K,Z,$,tt,et,it,nt,at,st,ot,rt,ct,lt;s._RF.push({},"9d200Ciz7lPiasXWuGOEOYI","UpsizeGame",void 0);var pt=o.ccclass,ht=o.property;t("UpsizeGame",(O=pt("UpsizeGame"),z=ht({type:r}),k=ht({type:c}),D=ht({type:l}),L=ht({type:r}),M=ht({type:E}),I=ht({type:r}),U=ht({type:[p]}),x=ht({type:[p]}),B=ht({type:h}),H=ht({type:h}),F=ht({type:h}),_=ht({type:r}),G=ht({type:r}),W=ht({type:u}),Y=ht({type:r}),j=ht({type:w}),O((V=e((Q=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,n(e,"cameraNode",V,a(e)),n(e,"canvas",X,a(e)),n(e,"maskSprite",J,a(e)),n(e,"scaleLineNode",K,a(e)),n(e,"patient",Z,a(e)),n(e,"tipNode",$,a(e)),n(e,"particleEffects",tt,a(e)),n(e,"failEffects",et,a(e)),n(e,"machineAnim",it,a(e)),n(e,"goodAnim",nt,a(e)),n(e,"perfectAnim",at,a(e)),n(e,"failPanel",st,a(e)),n(e,"progressNode",ot,a(e)),n(e,"dizzyPrefab",rt,a(e)),n(e,"retryBtnNode",ct,a(e)),n(e,"oppoNativeAd",lt,a(e)),e.gameStarted=!1,e.gameCanOper=!1,e.touchStarted=!1,e.camera=null,e.successEffect=null,e.patientId=0,e.patientScale=1,e.targetScale=1,e.scaleSpeed=.85,e.scaleMax=1.2,e.standardScaleLineYPos=1.65,e.camOriginPos=f(0,4,-4),e.camOriginRot=d(0,0,0,0),e.camDstPos=f(0,1.384,-2.685),e.camDstRot=d(0,0,0,0),e.patientStartPos=f(2,0,3.2),e.patientDstPos=f(0,0,3.2),e.patientEndPos=f(-2,0,3.2),e.patientSideRot=d(0,0,0,0),e.patientFrontRot=d(0,0,0,0),e.scaleLineOriginPos=f(0,2.02,0),e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.gameStarted=!1,this.gameCanOper=!1,this.touchStarted=!1,this.patientId=0,this.camera=this.cameraNode.getComponent(m),this.successEffect=this.cameraNode.getChildByName("Confetti2").getComponent(p),g.fromEuler(this.camDstRot,0,180,0),g.fromEuler(this.camOriginRot,-20,180,0),g.fromEuler(this.patientSideRot,0,90,0),g.fromEuler(this.patientFrontRot,0,0,0),this.cameraNode.setPosition(this.camOriginPos),this.cameraNode.setRotation(this.camOriginRot),this.scaleLineNode.setPosition(this.scaleLineOriginPos),this.tipNode.active=!1,this.initCurPatient(),this.updateProgressDisplay(),this.addEvent()},s.start=function(){var t=this;if(R.currentPlatform===T.WECHAT&&R.createBannerAd(),this.transCamToDst(),this.patient.walkSpeed=1.2,this.patient.walkTo(this.patientDstPos,(function(){y(t.patient.node).to(.1,{rotation:t.patientFrontRot}).call((function(){t.updateScaleLine()})).start()})),this.scheduleOnce((function(){C.fadeinBgm()}),.8),this.maskSprite.node.active=!0,y(this.maskSprite.color).to(.75,{a:0}).call((function(){t.maskSprite.node.active=!1})).start(),R.currentPlatform===T.OPPO)if(N.instance.gameTimeTick>=20)null!==this.oppoNativeAd&&this.oppoNativeAd.show();else{var e=20-N.instance.gameTimeTick;this.scheduleOnce(this.showOppoNativeAd,e)}},s.showOppoNativeAd=function(){null!==this.oppoNativeAd&&this.oppoNativeAd.show()},s.onDestroy=function(){this.removeEvent()},s.addEvent=function(){P.on(S.EventType.TOUCH_START,this.onTouchStart,this),P.on(S.EventType.TOUCH_END,this.onTouchEnd,this),P.on(S.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.removeEvent=function(){P.off(S.EventType.TOUCH_START,this.onTouchStart,this),P.off(S.EventType.TOUCH_END,this.onTouchEnd,this),P.off(S.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.initCurPatient=function(){if(this.patient.walkSpeed=1.2,this.patient.walkAnim="walk1",0===this.patientId)this.patient.meshId=N.instance.curPatient.meshId,this.patient.meshRenderer.mesh=N.instance.getCurPatientMesh(),this.patient.meshRenderer.material=N.instance.getRoleMat(N.instance.curPatient.meshId),this.patient.meshRenderer.skeleton=N.instance.getCurPatientSkeleton(),this.patient.setExpression(N.instance.getCurPatientExpression());else{var t=N.instance.roleSkinData.getRandUnlockedId();this.patient.meshId=t,this.patient.meshRenderer.mesh=N.instance.getRoleMesh(t),this.patient.meshRenderer.material=N.instance.getRoleMat(t),this.patient.meshRenderer.skeleton=N.instance.getRoleSkeleton(t),this.patient.setExpression(N.instance.getSickExpression())}this.patientScale=.01*A.randRangeNumber(45,60),this.patient.setScale(this.patientScale),this.resetPatientPosAndRot()},s.updateScaleLine=function(){var t=this;this.targetScale=.01*A.randRangeNumber(75,105);var e=(this.targetScale-1)*this.standardScaleLineYPos+this.standardScaleLineYPos;y(this.scaleLineNode).to(.4,{position:f(0,e,0)}).call((function(){t.tipNode.active=!0;var e=f(0,0,0),i=f(0,0,0);t.scaleLineNode.getWorldPosition(e),t.camera.convertToUINode(e,t.canvas.node,i),t.tipNode.setPosition(0,i.y+5,0),t.gameCanOper=!0})).start()},s.updateProgressDisplay=function(){for(var t=0;t<this.progressNode.children.length;t++)this.patientId>t?this.progressNode.children[t].children[0].active=!0:this.progressNode.children[t].children[0].active=!1},s.resetPatientPosAndRot=function(){this.patient.setPosition(this.patientStartPos),this.patient.setRotation(this.patientSideRot)},s.transCamToDst=function(){y(this.cameraNode).to(1,{position:this.camDstPos,rotation:this.camDstRot}).call((function(){})).start()},s.playMachineEffects=function(t){for(var e=0;e<this.particleEffects.length;e++)t?this.particleEffects[e].play():this.particleEffects[e].stop()},s.playFailEffects=function(){for(var t=0;t<this.failEffects.length;t++)this.failEffects[t].play()},s.onTouchStart=function(t){this.gameCanOper&&(this.touchStarted=!0,this.machineAnim.play(),this.playMachineEffects(!0),R.startRecord())},s.onTouchEnd=function(t){this.touchStarted=!1,this.gameCanOper&&(this.machineAnim.stop(),this.playMachineEffects(!1),this.patientScale>this.targetScale-.07&&this.onPass())},s.onTouchCancel=function(t){this.touchStarted=!1,this.gameCanOper&&(this.machineAnim.stop(),this.playMachineEffects(!1),this.patientScale>this.targetScale-.07&&this.onPass())},s.switchToResult=function(){R.currentPlatform===T.OPPO&&this.unschedule(this.showOppoNativeAd),R.currentPlatform===T.WECHAT&&R.destroyBannerAd(),v.loadScene("result")},s.onPass=function(){var t=this;this.tipNode.active=!1,this.gameCanOper=!1,this.patientScale/this.targetScale>.9?(this.goodAnim.node.parent.active=!1,this.perfectAnim.node.parent.active=!0,this.perfectAnim.play()):(this.perfectAnim.node.parent.active=!1,this.goodAnim.node.parent.active=!0,this.goodAnim.play()),this.patientId++,this.updateProgressDisplay(),this.patientId>=4?(this.patient.setExpression(N.instance.getHappyExpression()),C.fadeoutBgm(),this.successEffect.play(),this.scheduleOnce((function(){t.switchToResult()}),.7)):(this.patient.walkSpeed=1.2,this.patient.setExpression(N.instance.getHappyExpression()),this.scheduleOnce((function(){y(t.patient.node).to(.1,{rotation:t.patientSideRot}).start(),t.patient.walkSpeed=3,t.patient.walkAnim="walk3",t.patient.walkTo(t.patientEndPos,(function(){t.initCurPatient(),t.patient.walkTo(t.patientDstPos,(function(){y(t.patient.node).to(.1,{rotation:t.patientFrontRot}).call((function(){t.updateScaleLine()})).start()}))}))}),1))},s.onContinue=function(){var t=this;R.adTip=null,this.failPanel.active=!1,this.machineAnim.stop(),this.playMachineEffects(!1),this.resetPatientPosAndRot(),this.patientScale=.01*A.randRangeNumber(45,60),this.patient.setScale(this.patientScale),this.patient.walkSpeed=1.2,this.patient.walkTo(this.patientDstPos,(function(){y(t.patient.node).to(.1,{rotation:t.patientFrontRot}).call((function(){t.updateScaleLine()})).start()}))},s.onRetry=function(){var t=this;this.failPanel.active=!1,this.machineAnim.stop(),this.playMachineEffects(!1),this.patientId=0,this.initCurPatient(),this.scaleLineNode.setPosition(this.scaleLineOriginPos),this.updateProgressDisplay(),this.patient.walkSpeed=1.2,this.patient.walkTo(this.patientDstPos,(function(){y(t.patient.node).to(.1,{rotation:t.patientFrontRot}).call((function(){t.updateScaleLine()})).start()}))},s.showRetryBtn=function(){this.retryBtnNode.active=!0},s.update=function(t){!1!==this.gameCanOper&&this.touchStarted&&(this.patientScale+=t*this.scaleSpeed,this.patient.setScale(this.patientScale),this.patientScale>=this.targetScale*this.scaleMax&&(this.gameCanOper=!1,this.playFailEffects(),this.patient.anim.play("lizzy1"),this.patient.setExpression(this.dizzyPrefab),this.tipNode.active=!1,this.failPanel.active=!0,this.retryBtnNode.active=!1),this.gameCanOper&&N.instance.gameData.isVibrationOn()&&R.vibrateShort())},e}(b)).prototype,"cameraNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(Q.prototype,"canvas",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(Q.prototype,"maskSprite",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(Q.prototype,"scaleLineNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(Q.prototype,"patient",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(Q.prototype,"tipNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(Q.prototype,"particleEffects",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),et=e(Q.prototype,"failEffects",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),it=e(Q.prototype,"machineAnim",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(Q.prototype,"goodAnim",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(Q.prototype,"perfectAnim",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(Q.prototype,"failPanel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(Q.prototype,"progressNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(Q.prototype,"dizzyPrefab",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(Q.prototype,"retryBtnNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(Q.prototype,"oppoNativeAd",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=Q))||q));s._RF.pop()}}}));

System.register("chunks:///_virtual/Util.ts",["cc"],(function(r){"use strict";var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){n._RF.push({},"9eafde/y4VNKrZdt5isphX+","Util",void 0);r("default",function(){function r(){}return r.randNumber=function(r){return Math.floor(Math.random()*r+1)},r.randRangeNumber=function(r,n){var t=n-r;return r+Math.round(Math.random()*t)},r.randRangeExclude=function(n,t,e){if(n===t)return n;for(var u=r.randRangeNumber(n,t);u===e;)u=r.randRangeNumber(n,t);return u},r.randExtract=function(n,t,e){void 0===e&&(e=!1);for(var u=[];u.length<t;){for(var a=r.randNumber(n),o=!1,i=0;i<u.length;i++)if(u[i]===a){o=!0;break}!1===o&&u.push(a)}return e&&u.sort((function(r,n){return r-n})),u},r.toRadian=function(r){return r*Math.PI/180},r}());n._RF.pop()}}}));

System.register("chunks:///_virtual/XRayGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Util.ts","./GameMain.ts","./Platform.ts","./AudioManager.ts","./OppoNativeAd.ts"],(function(t){"use strict";var e,i,r,n,o,a,s,c,h,d,l,u,g,f,m,p,A,y,b,N,P,v,R,C,T,O,E,B,w,L,k,z;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Node,c=t.SkinnedMeshRenderer,h=t.Sprite,d=t.Canvas,l=t.ProgressBar,u=t.Animation,g=t.Prefab,f=t.v3,m=t.quat,p=t.v2,A=t.Camera,y=t.ParticleSystem,b=t.Quat,N=t.SkeletalAnimation,P=t.instantiate,v=t.tween,R=t.systemEvent,C=t.SystemEvent,T=t.director,O=t.Component},function(t){E=t.default},function(t){B=t.GameMain},function(t){w=t.default,L=t.PlatformType},function(t){k=t.AudioManager},function(t){z=t.OppoNativeAd}],execute:function(){var S,M,x,H,D,I,U,_,j,G,W,X,F,V,q,Q,Z,J,K,Y,$,tt,et,it,rt,nt,ot,at,st,ct,ht,dt,lt,ut,gt,ft,mt,pt,At,yt,bt,Nt,Pt,vt,Rt;o._RF.push({},"88408hfoEpGZqV3I7+4uMTC","XRayGame",void 0);var Ct=a.ccclass,Tt=a.property;t("XRayGame",(S=Ct("XRayGame"),M=Tt({type:s}),x=Tt({type:s}),H=Tt({type:c}),D=Tt({type:c}),I=Tt({type:s}),U=Tt({type:s}),_=Tt({type:h}),j=Tt({type:s}),G=Tt({type:d}),W=Tt({type:l}),X=Tt({type:[u]}),F=Tt({type:g}),V=Tt({type:u}),q=Tt({type:u}),Q=Tt({type:s}),Z=Tt({type:s}),J=Tt({type:s}),K=Tt({type:s}),Y=Tt({type:s}),$=Tt({type:s}),tt=Tt({type:z}),S((rt=e((it=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"detectorNode",rt,n(e)),r(e,"detectorMaskNode",nt,n(e)),r(e,"patientMeshRenderer",ot,n(e)),r(e,"patientAlphaMeshRenderer",at,n(e)),r(e,"headNode",st,n(e)),r(e,"cameraNode",ct,n(e)),r(e,"maskSprite",ht,n(e)),r(e,"startTipNode",dt,n(e)),r(e,"canvas",lt,n(e)),r(e,"detectorProgressBar",ut,n(e)),r(e,"checkAnims",gt,n(e)),r(e,"foreignBodyPrefabs",ft,n(e)),r(e,"lightAnim",mt,n(e)),r(e,"checkAnim",pt,n(e)),r(e,"headAttachNode",At,n(e)),r(e,"bodyAttachNode",yt,n(e)),r(e,"leftArmAttachNode",bt,n(e)),r(e,"rightArmAttachNode",Nt,n(e)),r(e,"leftLegAttachNode",Pt,n(e)),r(e,"rightLegAttachNode",vt,n(e)),r(e,"oppoNativeAd",Rt,n(e)),e.foreignObjs=[],e.camera=null,e.anim=null,e.successEffect=null,e.camPos0=f(-.011599,3.014014,-.224058),e.camRot0=m(0,0,0,0),e.camPos1=f(-.011233,6.750858,2.679813),e.camRot1=m(0,0,0,0),e.camPos2=f(-.011233,5,2.679813),e.detectorPos0=f(-1.473,2,3.148),e.detectorRot0=m(0,0,0,0),e.detectorPos1=f(0,2,2.7),e.detectorRot1=m(0,0,0,0),e.touchScale=.0015,e.touchDelta=p(0,0),e.detectorPos=f(0,0,0),e.gameStarted=!1,e.gameCanOper=!1,e.foreignIdInDetect=-1,e.detectProgress=0,e.detectedNum=0,e.lightAnimPlaying=!1,e}i(e,t);var o=e.prototype;return o.onLoad=function(){this.gameStarted=!1,this.gameCanOper=!1,this.camera=this.cameraNode.getComponent(A),this.successEffect=this.cameraNode.getChildByName("Confetti2").getComponent(y),b.fromEuler(this.camRot0,-34.381248,180,0),b.fromEuler(this.camRot1,-88.577,180,0),b.fromEuler(this.detectorRot0,0,-70,0),b.fromEuler(this.detectorRot1,0,0,0),this.cameraNode.setPosition(this.camPos0),this.cameraNode.setRotation(this.camRot0),this.detectorNode.setPosition(this.detectorPos0),this.detectorNode.setRotation(this.detectorRot0),this.anim=this.patientMeshRenderer.node.parent.parent.getComponent(N),this.patientMeshRenderer.mesh=B.instance.getCurPatientMesh(),this.patientMeshRenderer.material=B.instance.getRoleMat(B.instance.curPatient.meshId),this.patientMeshRenderer.skeleton=B.instance.getCurPatientSkeleton(),this.setExpression(B.instance.getCurPatientExpression()),this.patientAlphaMeshRenderer.mesh=B.instance.getCurPatientMesh(),this.addEvent()},o.setExpression=function(t){this.headNode.destroyAllChildren(),this.headNode.removeAllChildren(),B.instance.isCurPatientNeedExpression()&&this.headNode.addChild(P(t))},o.onDestroy=function(){this.removeEvent()},o.start=function(){var t=this;if(w.currentPlatform===L.WECHAT&&w.createBannerAd(),v(this.cameraNode).to(1,{position:this.camPos1,rotation:this.camRot1},{easing:"backOut"}).call((function(){t.gameCanOper=!0})).start(),this.genForeignBody(),this.scheduleOnce((function(){k.fadeinBgm()}),.8),this.maskSprite.node.active=!0,v(this.maskSprite.color).to(.75,{a:0}).call((function(){t.maskSprite.node.active=!1})).start(),w.currentPlatform===L.OPPO)if(B.instance.gameTimeTick>=20)null!==this.oppoNativeAd&&this.oppoNativeAd.show();else{var e=20-B.instance.gameTimeTick;this.scheduleOnce(this.showOppoNativeAd,e)}},o.showOppoNativeAd=function(){null!==this.oppoNativeAd&&this.oppoNativeAd.show()},o.genForeignBody=function(){var t=E.randRangeNumber(0,100);t>=0&&t<10?(this.createAndAttachHead(0),this.createAndAttachLeftArm(1),this.createAndAttachRightArm(2)):t>=10&&t<20?(this.createAndAttachHead(3),this.createAndAttachLeftArm(2),this.createAndAttachBody(1)):t>=20&&t<30?(this.createAndAttachHead(2),this.createAndAttachRightArm(3),this.createAndAttachBody(0)):t>=30&&t<40?(this.createAndAttachLeftArm(1),this.createAndAttachRightArm(0),this.createAndAttachBody(2)):t>=40&&t<50?(this.createAndAttachLeftArm(0),this.createAndAttachRightArm(1),this.createAndAttachRightLeg(2)):t>=50&&t<60?(this.createAndAttachLeftArm(3),this.createAndAttachRightArm(1),this.createAndAttachLeftLeg(0)):t>=60&&t<70?(this.createAndAttachHead(1),this.createAndAttachLeftArm(2),this.createAndAttachRightLeg(0)):t>=70&&t<80?(this.createAndAttachHead(2),this.createAndAttachRightArm(1),this.createAndAttachLeftLeg(3)):t>=80&&t<90?(this.createAndAttachLeftArm(1),this.createAndAttachBody(0),this.createAndAttachRightLeg(2)):(this.createAndAttachRightArm(0),this.createAndAttachBody(3),this.createAndAttachLeftLeg(2))},o.createAndAttachHead=function(t){var e=E.randRangeNumber(0,this.headAttachNode.children.length-1),i=P(this.foreignBodyPrefabs[t]);this.headAttachNode.children[e].addChild(i),this.foreignObjs.push(i)},o.createAndAttachLeftArm=function(t){var e=E.randRangeNumber(0,this.leftArmAttachNode.children.length-1),i=P(this.foreignBodyPrefabs[t]);this.leftArmAttachNode.children[e].addChild(i),this.foreignObjs.push(i);var r=m(0,0,0,0);b.fromEuler(r,-90,0,0),i.setRotation(r)},o.createAndAttachRightArm=function(t){var e=E.randRangeNumber(0,this.rightArmAttachNode.children.length-1),i=P(this.foreignBodyPrefabs[t]);this.rightArmAttachNode.children[e].addChild(i),this.foreignObjs.push(i);var r=m(0,0,0,0);b.fromEuler(r,-90,0,0),i.setRotation(r)},o.createAndAttachLeftLeg=function(t){var e=E.randRangeNumber(0,this.leftLegAttachNode.children.length-1),i=P(this.foreignBodyPrefabs[t]);this.leftLegAttachNode.children[e].addChild(i),i.setPosition(0,-.05,0),this.foreignObjs.push(i)},o.createAndAttachRightLeg=function(t){var e=E.randRangeNumber(0,this.rightLegAttachNode.children.length-1),i=P(this.foreignBodyPrefabs[t]);this.rightLegAttachNode.children[e].addChild(i),i.setPosition(0,-.05,0),this.foreignObjs.push(i)},o.createAndAttachBody=function(t){var e=E.randRangeNumber(0,this.bodyAttachNode.children.length-1),i=P(this.foreignBodyPrefabs[t]);this.bodyAttachNode.children[e].addChild(i),this.foreignObjs.push(i)},o.addEvent=function(){R.on(C.EventType.TOUCH_START,this.onTouchStart,this),R.on(C.EventType.TOUCH_MOVE,this.onTouchMove,this),R.on(C.EventType.TOUCH_END,this.onTouchEnd,this),R.on(C.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},o.removeEvent=function(){R.off(C.EventType.TOUCH_START,this.onTouchStart,this),R.off(C.EventType.TOUCH_MOVE,this.onTouchMove,this),R.off(C.EventType.TOUCH_END,this.onTouchEnd,this),R.off(C.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},o.onTouchStart=function(t){var e=this;this.gameCanOper&&!1===this.gameStarted&&(this.gameStarted=!0,this.startTipNode.active=!1,v(this.cameraNode).to(.35,{position:this.camPos2}).start(),v(this.detectorNode).to(.35,{position:this.detectorPos1,rotation:this.detectorRot1}).call((function(){e.gameCanOper=!0})).start(),w.startRecord())},o.onTouchMove=function(t){if(this.gameCanOper&&(this.touchDelta=t.getDelta(),this.detectorNode.getPosition(this.detectorPos),this.detectorPos.x-=this.touchDelta.x*this.touchScale,this.detectorPos.z+=this.touchDelta.y*this.touchScale,this.detectorPos.z>3.5&&(this.detectorPos.z=3.5),this.detectorPos.z<1.7&&(this.detectorPos.z=1.7),this.detectorPos.x<-.72&&(this.detectorPos.x=-.72),this.detectorPos.x>.72&&(this.detectorPos.x=.72),this.detectorNode.setPosition(this.detectorPos),this.detectorProgressBar.node.active)){var e=f(0,0,0),i=f(0,0,0);this.detectorNode.getWorldPosition(e),this.camera.convertToUINode(e,this.canvas.node,i),this.detectorProgressBar.node.setPosition(i.x,i.y+90,i.z)}},o.onTouchEnd=function(t){},o.onTouchCancel=function(t){},o.showResultUI=function(){w.currentPlatform===L.OPPO&&this.unschedule(this.showOppoNativeAd),w.currentPlatform===L.WECHAT&&w.destroyBannerAd(),T.loadScene("result")},o.update=function(t){var e=this;if(this.gameStarted&&this.gameCanOper){var i=this.detectorMaskNode.getWorldPosition(),r=f(0,0,0);this.camera.worldToScreen(i,r);for(var n=f(0,0,0),o=f(0,0,0),a=!1,s=-1,c=0;c<this.foreignObjs.length;c++)if(!1!==this.foreignObjs[c].active&&(this.foreignObjs[c].getWorldPosition(n),this.camera.worldToScreen(n,o),o.x>r.x-50&&o.x<r.x+50&&o.y>r.y-50&&o.y<r.y+50)){a=!0,s=c;break}if(!1===a)this.foreignIdInDetect=-1,this.detectProgress=0,this.detectorProgressBar.node.active=!1,this.lightAnim.stop(),this.lightAnimPlaying=!1;else if(!1===this.lightAnimPlaying&&(this.lightAnim.play("X-ray_warnning"),this.lightAnimPlaying=!0),this.foreignIdInDetect=s,this.detectorProgressBar.node.active=!0,this.detectProgress+=.7*t,this.detectProgress>1&&(this.detectProgress=1),this.detectorProgressBar.progress=this.detectProgress,this.detectProgress<1&&B.instance.gameData.isVibrationOn()&&w.vibrateShort(),1===this.detectorProgressBar.progress){this.detectProgress=0,this.detectorProgressBar.progress=0,this.detectorProgressBar.node.active=!1,this.foreignObjs[this.foreignIdInDetect].active=!1,this.lightAnim.stop(),this.lightAnimPlaying=!1,this.checkAnims[this.detectedNum].play(),this.checkAnims[this.detectedNum].node.getChildByName("check").active=!0,this.detectedNum++,this.detectedNum<=2&&this.scheduleOnce((function(){e.checkAnims[e.detectedNum].node.active=!0,e.checkAnims[e.detectedNum].node.setScale(1.3,1.3,1.3)}),.2),this.checkAnim.node.active=!0,this.checkAnim.play();var h=f(0,0,0),d=f(0,0,0);if(this.detectorNode.getWorldPosition(h),this.camera.convertToUINode(h,this.canvas.node,d),this.checkAnim.node.setPosition(d.x,d.y-12,d.z),this.scheduleOnce((function(){e.checkAnim.stop(),e.checkAnim.node.active=!1}),.75),3===this.detectedNum){this.gameCanOper=!1;var l=f(0,0,0);this.detectorNode.getPosition(l),l.add(f(-2,0,0)),v(this.detectorNode).to(.5,{position:l}).start(),this.setExpression(B.instance.getHappyExpression()),k.fadeoutBgm(),this.successEffect.play(),this.scheduleOnce((function(){e.showResultUI()}),1)}}}},e}(O)).prototype,"detectorNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(it.prototype,"detectorMaskNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(it.prototype,"patientMeshRenderer",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(it.prototype,"patientAlphaMeshRenderer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(it.prototype,"headNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(it.prototype,"cameraNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(it.prototype,"maskSprite",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=e(it.prototype,"startTipNode",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(it.prototype,"canvas",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(it.prototype,"detectorProgressBar",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=e(it.prototype,"checkAnims",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ft=e(it.prototype,"foreignBodyPrefabs",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),mt=e(it.prototype,"lightAnim",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(it.prototype,"checkAnim",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),At=e(it.prototype,"headAttachNode",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(it.prototype,"bodyAttachNode",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=e(it.prototype,"leftArmAttachNode",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=e(it.prototype,"rightArmAttachNode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=e(it.prototype,"leftLegAttachNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(it.prototype,"rightLegAttachNode",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rt=e(it.prototype,"oppoNativeAd",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=it))||et));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});